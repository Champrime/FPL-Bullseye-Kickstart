// For license information, see `https://assets.adobedtm.com/e7ad550d4f82/693c01019a2b/launch-a4f579b5dcc4.js`.
window._satellite=window._satellite||{},window._satellite.container={buildInfo:{minified:!0,buildDate:"2025-09-11T10:34:23Z",turbineBuildDate:"2024-08-22T17:32:44Z",turbineVersion:"28.0.0"},environment:{id:"ENbd89636d8def4c24b3f87a83746c58ec",stage:"production"},dataElements:{"DL | screen_page_player_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_player_name",isReturnOnlyEventProps:!1}},"Retail | DL | user_status":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"user_status",isReturnOnlyEventProps:!1}},"identityMap.ssoID":{modulePath:"adobe-alloy/dist/lib/dataElements/identityMap/index.js",settings:{ssoid:[{id:"%DL | ssoid%",primary:!1,authenticatedState:"authenticated"}]}},"Retail | DL | platfrom_country_code":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"platfrom_country_code",isReturnOnlyEventProps:!1}},"DL | screen_page_home_team_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_home_team_name",isReturnOnlyEventProps:!0}},"DL | story_start_trigger":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_start_trigger",isReturnOnlyEventProps:!0}},"DL | screen_page_content_stadium_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_stadium_id",isReturnOnlyEventProps:!1}},"DL | event_content_team_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_team_name",isReturnOnlyEventProps:!1}},"DL | story_page_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_page_id",isReturnOnlyEventProps:!0}},"DL | event_video_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_video_id",isReturnOnlyEventProps:!1}},"DL | moment_title":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"moment_title",isReturnOnlyEventProps:!0}},"DL | screen_page_content_genre":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_genre",isReturnOnlyEventProps:!1}},"DL | story_page_index":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_page_index",isReturnOnlyEventProps:!0}},"Retail | DL | tax":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"tax",isReturnOnlyEventProps:!0}},plmain_xdm_variable_click:{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DEba634003e9db44bfa2d42479f179f1f4"}},"DL | screen_page_content_label":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_label",isReturnOnlyEventProps:!1}},"DL | screen_page_match_time":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_match_time",isReturnOnlyEventProps:!0}},"Retail | DL | currency":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"currency",isReturnOnlyEventProps:!1}},plmain_xdm_pageview:{defaultValue:"",modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webPageDetails:{name:"%DL | screen_page_name%",pageViews:{value:1}}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{global:{platform:"%DL | platform%",screenTab:"%DL | active_tab_name%",screenPageCategory:"%DL | screen_page_category%"},matchCentres:{season:"%DL | season%",matchId:"%DL | match_id%",stadium:"%DL | stadium%",matchDate:"%DL | match_date%",matchTime:"%DL | match_time%",awayTeamId:"%DL | away_team_id%",homeTeamId:"%DL | home_team_id%",matchStatus:"%DL | match_status%",awayTeamName:"%DL | away_team_name%",homeTeamName:"%DL | home_team_name%"},userProperty:{sessionType:"%New vs Repeat%"},playerandteam:{teamIds:"%DL | screen_page_team_id%",playerIds:"%DL | screen_page_player_id%",teamNames:"%DL | screen_page_team_name%",playerNames:"%DL | screen_page_player_name%"},utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"}},identities:{ssoId:"%DL | ssoid%"}}},sandbox:{name:"prod"}}},"Retail | DL | dataLayer":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"",isReturnOnlyEventProps:!1}},"Plugin | utmCampaign":{defaultValue:"",modulePath:"common-web-sdk-plugins/src/lib/dataElements/getqueryparam.js",settings:{delimiter:"",urlToCheck:"",queryStringParameters:"utm_campaign"}},"DL | screen_page_content_franchise":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_franchise",isReturnOnlyEventProps:!1}},"DL | event_content_matchweek":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_matchweek",isReturnOnlyEventProps:!0}},"CC | ajoPopUp button":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(e){var t=e.target.closest("[ajobutton]");return t?t.getAttribute("ajobutton"):null}}},"DL | screen_page_season":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_season",isReturnOnlyEventProps:!0}},"DL | screen_page_content_match_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_match_id",isReturnOnlyEventProps:!1}},"DL | screen_page_team_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_team_name",isReturnOnlyEventProps:!1}},"Retail | DL | filter_action_value.pimgender":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"filter_action_value.pimgender",isReturnOnlyEventProps:!0}},"DL | event_component":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_component",isReturnOnlyEventProps:!0}},"Retail | DL | field_validation":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"field_validation",isReturnOnlyEventProps:!0}},"Retail | DL | user_number":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"user_number",isReturnOnlyEventProps:!0}},"DL | click_url":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"click_url",isReturnOnlyEventProps:!1}},"Retail | DL | environment":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"environment",isReturnOnlyEventProps:!1}},"Retail | DL | menu_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"menu_type",isReturnOnlyEventProps:!0}},"DL | screen_page_away_team_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_away_team_id",isReturnOnlyEventProps:!0}},plmain_xdm_variable_ajo:{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DEd2abf065e4c844318b6fe3049e6c0042"}},"DL | screen_page_category":{modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_category",isReturnOnlyEventProps:!1}},"Retail | DL | search_term_typed":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"search_term_typed",isReturnOnlyEventProps:!0}},"DL | screen_page_team_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_team_id",isReturnOnlyEventProps:!1}},"Retail | DL | search_term_used":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"search_term_used",isReturnOnlyEventProps:!0}},"Plugin | utmSource":{defaultValue:"",modulePath:"common-web-sdk-plugins/src/lib/dataElements/getqueryparam.js",settings:{delimiter:"",urlToCheck:"",queryStringParameters:"utm_source"}},"DL | event_content_player_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_player_id",isReturnOnlyEventProps:!1}},"Retail | DL | click_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"click_type",isReturnOnlyEventProps:!0}},"DL | event_video_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_video_name",isReturnOnlyEventProps:!1}},"Retail | DL | field_error":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"field_error",isReturnOnlyEventProps:!0}},plretail_xdm_variable_pageview:{defaultValue:"",modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DE8d13f5782bbd4334b6becdc76960b7a5"}},"Retail | DL | order_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"order_id",isReturnOnlyEventProps:!1}},"CC | deepClean Utility":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return function e(t){if(Array.isArray(t)){const n=t.map(e).filter((e=>void 0!==e));return n.length?n:void 0}if(t&&"object"==typeof t){const n=Object.entries(t).reduce(((t,[n,r])=>{const o=e(r);return null!=o&&""!==o&&"null"!==o&&(t[n]=o),t}),{});return Object.keys(n).length?n:void 0}if(null!==t&&""!==t&&"null"!==t)return t}}}},plretail_xdm_variable_non_ecommerce:{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DE1a1c8f95e42647199c6cbbdfcb83b18d"}},"Retail | DL | optin_status":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"optin_status",isReturnOnlyEventProps:!0}},"DL | event":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event",isReturnOnlyEventProps:!0}},plmain_xdm_variable_pageview:{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DE22cf3f7d9d3340ee8f2cebb3ccee27dd"}},"Retail | DL | revenue":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"revenue",isReturnOnlyEventProps:!0}},"CC | videoID":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"video consumption"===_satellite.getVar("DL | event_component")?_satellite.getVar("DL | event_video_id"):_satellite.getVar("DL | screen_page_video_id")}}},"CC | ajoPopUp Attribute":{modulePath:"core/src/lib/dataElements/domAttribute.js",settings:{elementProperty:"ajopopup",elementSelector:'#AdobePopupContainer[data-aep-interact-id="1"] > div'}},"DL | screen_page_video_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_video_id",isReturnOnlyEventProps:!1}},"Retail | DL | sort_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"sort_type",isReturnOnlyEventProps:!0}},"Retail | DL | field_input_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"field_input_type",isReturnOnlyEventProps:!0}},"DL | event_content_manager_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_manager_id",isReturnOnlyEventProps:!1}},"Retail | DL | page_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"page_id",isReturnOnlyEventProps:!1}},"Plugin | utmContent":{defaultValue:"",modulePath:"common-web-sdk-plugins/src/lib/dataElements/getqueryparam.js",settings:{delimiter:"",urlToCheck:"",queryStringParameters:"utm_content"}},"DL | event_content_franchise":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_franchise",isReturnOnlyEventProps:!1}},"CC | consentStatus":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){function e(e){const t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let r=n[e].trim();if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}function t(t){let n="pending";const r=/C0002:([01])/,o=e(t);if(o){const e=o.match(r);e&&(n="1"===e[1]?"in":"pending")}return n}return t("OptanonConsent")}}},"DL | moment_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"moment_id",isReturnOnlyEventProps:!0}},"DL | screen_page_article_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_article_id",isReturnOnlyEventProps:!1}},plmain_xdm_variable_article:{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DEc81ff5ced1de4103a8a9986e8875e779"}},"CC | category":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"video consumption"===_satellite.getVar("DL | event_component")?"Video":"article consumption"===_satellite.getVar("DL | event_component")?"Article":void 0}}},"DL | screen_page_article_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_article_name",isReturnOnlyEventProps:!1}},"Retail | DL | click_text":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"click_text",isReturnOnlyEventProps:!0}},"Retail | DL | shipping":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"shipping",isReturnOnlyEventProps:!0}},"DL | event_category":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_category",isReturnOnlyEventProps:!0}},"DL | event_content_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_type",isReturnOnlyEventProps:!1}},"DL | screen_page_match_date":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_match_date",isReturnOnlyEventProps:!0}},"Retail | CC | user_number":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){const e=_satellite.getVar("Retail | DL | dataLayer");return e&&void 0!==e.user_number&&!isNaN(Number(e.user_number))?Number(e.user_number):null}}},"Retail | DL | customer_group":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"customer_group",isReturnOnlyEventProps:!1}},"DL | event_content_series":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_series",isReturnOnlyEventProps:!1}},"DL | active_tab_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"active_tab_name",isReturnOnlyEventProps:!1}},"FPL | CC | gametype":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){switch(window.location.hostname){case"fantasy.premierleague.com":return"fantasy.premierleague.com";case"draft.premierleague.com":return"draft.premierleague.com";case"fplchallenge.premierleague.com":return"fplchallenge.premierleague.com";default:return""}}}},"Retail | DL | promotion":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"promotion.0",isReturnOnlyEventProps:!0}},"Retail | CC | product":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){const e=_satellite.getVar("Retail | DL | product"),t=window.dataLayer||[];_satellite.getVar("DL | event");let n=null;for(let e=t.length-1;e>=0;e--)if(["product_click","add_to_cart","product_interaction","view_cart","remove_from_cart"].includes(t[e].event)){n=t[e].product;break}const r=n||e||[],o=(Array.isArray(r),["price","position","discount","original_price","quantity"]);return r.map((e=>{const t={...e};return o.forEach((n=>{const r=e[n];void 0===r||"string"!=typeof r||isNaN(Number(r))||(t[n]=Number(r))})),t}))}}},"DL | story_page_count":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_page_count",isReturnOnlyEventProps:!0}},"DL | event_content_content_creator":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_content_creator",isReturnOnlyEventProps:!1}},"CC | videoName":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"video consumption"===_satellite.getVar("DL | event_component")?_satellite.getVar("DL | event_video_name"):_satellite.getVar("DL | screen_page_video_name")}}},"Retail | DL | payment_method":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"payment_method",isReturnOnlyEventProps:!1}},"DL | story_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_type",isReturnOnlyEventProps:!0}},"DL | screen_page_content_content_creator":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_content_creator",isReturnOnlyEventProps:!1}},"DL | screen_page_content_manager_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_manager_id",isReturnOnlyEventProps:!1}},"DL | screen_page_player_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_player_id",isReturnOnlyEventProps:!1}},"DL | story_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_id",isReturnOnlyEventProps:!0}},"CC | contentClick":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){return"content_consumption_track"===_satellite.getVar("DL | event")?"Y":"N"}}},"Retail | DL | page_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"page_type",isReturnOnlyEventProps:!1}},"FPL | DL | fpl_entry_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"fpl_entry_id",isReturnOnlyEventProps:!0}},"Retail | DL | affiliation":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"affiliation",isReturnOnlyEventProps:!1}},"DL |  screen_page_stadium":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_stadium",isReturnOnlyEventProps:!1}},"Retail | DL | search_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"search_type",isReturnOnlyEventProps:!0}},"DL | screen_page_content_series":{modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_series",isReturnOnlyEventProps:!1}},"New vs Repeat":{modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){var e="s_nr",t=(new Date).getTime(),n=document.cookie.split("; ").find((t=>t.startsWith(e+"=")));let r=new Date(t+18e5).toUTCString();return n?(document.cookie=`${e}=${t}-Repeat; domain = premierleague.com; path=/; expires=${r}; SameSite=Lax`,"Repeat"):(document.cookie=`${e}=${t}-New; domain = premierleague.com; path=/; expires=${r}; SameSite=Lax`,"New")}}},plmain_xdm_click_track:{defaultValue:"",modulePath:"adobe-alloy/dist/lib/dataElements/xdmObject/index.js",settings:{data:{web:{webInteraction:{URL:"%DL | click_url%",name:"%DL | event_detail%",linkClicks:{value:1}},webPageDetails:{name:"%DL | screen_page_name%"}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{global:{platform:"%DL | platform%"},eventType:"%DL | event_type%",userProperty:{sessionType:"%New vs Repeat%"},eventCategory:"%DL | event_category%",utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"},eventComponent:"%DL | event_component%"},identities:{ssoId:"%DL | ssoid%"}}},sandbox:{name:"prod"}}},"Plugin | utmMedium":{defaultValue:"",modulePath:"common-web-sdk-plugins/src/lib/dataElements/getqueryparam.js",settings:{delimiter:"",urlToCheck:"",queryStringParameters:"utm_medium"}},"DL | event_content_format":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_format",isReturnOnlyEventProps:!0}},"Retail | DL | coupon":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"coupon",isReturnOnlyEventProps:!1}},"DL | screen_page_content_format":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_format",isReturnOnlyEventProps:!1}},"Retail | DL | filter_selection.pimgender":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"filter_selection.pimgender",isReturnOnlyEventProps:!0}},"Plugin | utmTerm":{defaultValue:"",modulePath:"common-web-sdk-plugins/src/lib/dataElements/getqueryparam.js",settings:{delimiter:"",urlToCheck:"",queryStringParameters:"utm_term"}},"Retail | DL | product":{modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"product",isReturnOnlyEventProps:!0}},"Retail | DL | filter_action":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"filter_action",isReturnOnlyEventProps:!0}},"Retail | DL | platfrom_language_code":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"platfrom_language_code",isReturnOnlyEventProps:!1}},"DL | screen_page_content_season_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_season_id",isReturnOnlyEventProps:!1}},"DL | screen_page_home_team_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_home_team_id",isReturnOnlyEventProps:!0}},"DL | event_content_team_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_team_id",isReturnOnlyEventProps:!1}},"DL | screen_page_match_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_match_id",isReturnOnlyEventProps:!0}},"DL | event_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_type",isReturnOnlyEventProps:!0}},"DL | screen_page_video_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_video_name",isReturnOnlyEventProps:!1}},"Retail | DL | checkout_stage_number":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"checkout_stage_number",isReturnOnlyEventProps:!0}},"DL |  screen_page_match_status":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_match_status",isReturnOnlyEventProps:!0}},plmain_xdm_variable_video:{modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DE605f022de49847a4ace2f40131e5ac93"}},"DL | event_content_prioritisation_order":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_prioritisation_order",isReturnOnlyEventProps:!1}},"Retail | DL | form_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"form_type",isReturnOnlyEventProps:!0}},"DL | screen_page_name":{modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_name",isReturnOnlyEventProps:!1}},"Retail | DL | shipping_method":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"shipping_method",isReturnOnlyEventProps:!1}},"DL | moment_index":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"moment_index",isReturnOnlyEventProps:!0}},"DL | platform":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"platform",isReturnOnlyEventProps:!1}},"DL | screen_page_content_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_content_type",isReturnOnlyEventProps:!1}},"DL | event_detail":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_detail",isReturnOnlyEventProps:!0}},"Retail | DL | interaction_value":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"interaction_value",isReturnOnlyEventProps:!1}},"DL | story_title":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"story_title",isReturnOnlyEventProps:!0}},"Retail | DL | interaction_type":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"interaction_type",isReturnOnlyEventProps:!0}},"CC | event":{defaultValue:"",modulePath:"core/src/lib/dataElements/customCode.js",settings:{source:function(){switch(_satellite.getVar("DL | event_category")){case"article started":return"Article View";case"article fully read":return"Article Read Consumption";default:return _satellite.getVar("DL | event")}}}},"DL | event_content_match_id":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_match_id",isReturnOnlyEventProps:!0}},"DL | ssoid":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"sso_id",isReturnOnlyEventProps:!1}},"DL | screen_page_away_team_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"screen_page_away_team_name",isReturnOnlyEventProps:!0}},plretail_xdm_variable_ecommerce:{defaultValue:"",modulePath:"adobe-alloy/dist/lib/dataElements/variable/index.js",settings:{dataElementId:"DEc6192fd0159548aaa46bc9f9afe3629b"}},"Retail | DL | checkout_stage_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"checkout_stage_name",isReturnOnlyEventProps:!1}},"DL | event_content_player_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"event_content_player_name",isReturnOnlyEventProps:!1}},"Retail | DL | customer_number":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"customer_number",isReturnOnlyEventProps:!0}},"Retail | DL | field_name":{defaultValue:"",modulePath:"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js",settings:{value:"field_name",isReturnOnlyEventProps:!0}}},extensions:{adobegoogledatalayer:{displayName:"Google Data Layer",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP2f3baf761f0d4c4e942d3c5e7afcd399/",settings:{dataLayer:"dataLayer",doConvertArrayEvents:!1},modules:{"adobegoogledatalayer/src/lib/dataElements/gtmDlPropertyKey.js":{name:"gtm-dl-property-key",displayName:"Google DL property key",script:function(e,t,n,r){"use strict";e.exports=function(e,t){function n(){return!!l}function o(){return r.logger.debug("a property was read from the computed state at the time of rule execution "+JSON.stringify(u)),window.extensionGoogleDataLayer.dataLayerHelper.get(u)}function a(){if(u){let e="";return e=p&&i()?s(c.gaArrayEvent):s(c),e&&r.logger.debug("a property was read from the event object after a push event "+JSON.stringify(u+" = "+e)),e||d||(e=s(l),r.logger.debug("a property was read from the computed state after a push event "+JSON.stringify(u+" = "+e))),e}}function i(){return c&&void 0!==c.gaArrayEvent}function s(e){if(void 0===e)return;const t=u.split(".");for(let n=0;n<t.length;n++){if(void 0===e[t[n]])return;e=e[t[n]]}return e}const l=t&&t.event&&t.event.dataLayerModel?t.event.dataLayerModel:void 0,c=t&&t.event&&t.event.eventModel?t.event.eventModel:void 0,d=e.isReturnOnlyEventProps,u=e&&e.value?e.value:void 0,p=r.getExtensionSettings().doConvertArrayEvents;let m;return r.logger.debug("isReturnOnlyEventProps toggle is set to "+d),r.logger.debug(n()?"the rule is running in response to a data layer push event":"the rule is being executed outside a data layer push event"),u?m=n()?a():o():n()?m=d?c:l:(r.logger.debug("abstract model computed state was returned"),m=window.extensionGoogleDataLayer.dataLayerHelper.getComputedState()),m}}},"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js":{name:"gtm-dl-push-event",displayName:"Google DL Push Event",script:function(e,t,n,r){"use strict";const o=n("../helpers/constants"),a=n("../helpers/instantiateGtmDlHelper"),i=[],s=r.getExtensionSettings().doConvertArrayEvents,l=function(e){i.forEach((function(t){const n=t.settings,r=t.trigger,{method:a,valueIsRegex:i,eventKey:l}=n,c=e&&e.detail&&e.detail.eventModel?e.detail.eventModel:void 0;s&&c&&!c.event&&c[0]===o.KEYWORD_EVENT&&c[1]&&(c.event=c[1],c.gaArrayEvent=c[2]?c[2]:void 0);const d=c&&c.event,u={event:e.detail};if(a!==o.METHOD_ALLCHANGES)if(d)if(a!==o.METHOD_ALLEVENTS){if(a===o.METHOD_SPECIFICEVENT)if(i){const e=new RegExp(l);String(d).match(e)&&r(u)}else l===d&&r(u)}else r(u);else a===o.METHOD_ALLDATA&&r(u);else r(u)}))};let c=function(){document.addEventListener(o.DATALAYERCHANGE,l),c=function(){}};e.exports=function(e,t){i.push({settings:e,trigger:t}),c(),a()}}},"adobegoogledatalayer/src/lib/helpers/instantiateGtmDlHelper.js":{script:function(e,t,n,r){"use strict";const o=n("./constants"),a=n("./getDataLayer");n("./getHelper")(),e.exports=()=>{r.logger.debug("instantiating helper..."),window.extensionGoogleDataLayer.dataLayerHelper=window.extensionGoogleDataLayer.dataLayerHelper||new window.extensionGoogleDataLayer.DataLayerHelper(a(),{listener:function(e,t){document.dispatchEvent(new CustomEvent(o.DATALAYERCHANGE,{bubbles:!1,detail:{dataLayerModel:Object.assign({},e),eventModel:Object.assign({},t)}}))},listenToPast:!0})}}},"adobegoogledatalayer/src/lib/helpers/constants.js":{script:function(e){"use strict";const t={DATALAYERCHANGE:"dataLayerChange",METHOD_SPECIFICEVENT:"specificEvent",METHOD_ALLEVENTS:"allEvents",METHOD_ALLDATA:"allData",METHOD_ALLCHANGES:"allChanges",DEFAULTDATALAYER:"dataLayer",KEYWORD_EVENT:"event"};e.exports=Object.freeze(t)}},"adobegoogledatalayer/src/lib/helpers/getDataLayer.js":{script:function(e,t,n,r){"use strict";e.exports=()=>{const e=r.getExtensionSettings().dataLayer;return window[e]=window[e]||[],window[e]}}},"adobegoogledatalayer/src/lib/helpers/getHelper.js":{script:function(e){"use strict";e.exports=()=>{!function(){function e(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t]
;if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}function t(e,t){if(t)e:{var n=u;e=e.split(".");for(var r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))break e;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&d(n,e,{configurable:!0,writable:!0,value:t})}}function n(e){return null==e?String(e):(e=m.exec(Object.prototype.toString.call(Object(e))))?e[1].toLowerCase():"object"}function r(e,t){return Object.prototype.hasOwnProperty.call(Object(e),t)}function o(e){if(!e||"object"!=n(e)||e.nodeType||e==e.window)return!1;try{if(e.constructor&&!r(e,"constructor")&&!r(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(var t in e);return void 0===t||r(e,t)}function a(e,t){var n={},r=n;e=e.split(".");for(var o=0;o<e.length-1;o++)r=r[e[o]]={};return r[e[e.length-1]]=t,n}function i(e,t){var a,s=!e._clear;for(a in e)if(r(e,a)){var l=e[a];"array"===n(l)&&s?("array"===n(t[a])||(t[a]=[]),i(l,t[a])):o(l)&&s?(o(t[a])||(t[a]={}),i(l,t[a])):t[a]=l}delete t._clear}function s(e,t,n){t="function"==typeof(t=void 0===t?{}:t)?{listener:t,listenToPast:void 0!==n&&n,processNow:!0,commandProcessors:{}}:{listener:t.listener||function(){},listenToPast:t.listenToPast||!1,processNow:void 0===t.processNow||t.processNow,commandProcessors:t.commandProcessors||{}},this.a=e,this.m=t.listener,this.l=t.listenToPast,this.g=this.i=!1,this.b={},this.f=[],this.c=t.commandProcessors,this.h=c(this);var r=this.a.push,o=this;this.a.push=function(){var e=[].slice.call(arguments,0),t=r.apply(o.a,e);return l(o,e),t},t.processNow&&this.process()}function l(e,t,r){if(r=void 0!==r&&r,e.i&&(e.f.push.apply(e.f,t),!e.g))for(;0<e.f.length;){if("array"===n(t=e.f.shift()))e:{var s=e.b;n(t[0]);for(var l=t[0].split("."),c=l.pop(),d=t.slice(1),u=0;u<l.length;u++){if(void 0===s[l[u]])break e;s=s[l[u]]}try{s[c].apply(s,d)}catch(e){}}else if("arguments"===n(t)){if(l=e,c=[],d=t[0],l.c[d])for(s=l.c[d].length,u=0;u<s;u++)c.push(l.c[d][u].apply(l.h,[].slice.call(t,1)));e.f.push.apply(e.f,c)}else if("function"==typeof t)try{t.call(e.h)}catch(e){}else{if(!o(t))continue;for(var p in t)i(a(p,t[p]),e.b)}r||(e.g=!0,e.m(e.b,t),e.g=!1)}}function c(e){return{set:function(t,n){i(a(t,n),e.b)},get:function(t){return e.get(t)}}}var d="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},u=e(this),p="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};t("Object.assign",(function(e){return e||p}));var m=/\[object (Boolean|Number|String|Function|Array|Date|RegExp|Arguments)\]/;s.prototype.process=function(){this.registerProcessor("set",(function(){var e={};return 1===arguments.length&&"object"===n(arguments[0])?e=arguments[0]:2===arguments.length&&"string"===n(arguments[0])&&(e=a(arguments[0],arguments[1])),e})),this.i=!0;for(var e=this.a.length,t=0;t<e;t++)l(this,[this.a[t]],!this.l)},s.prototype.get=function(e){var t=this.b;e=e.split(".");for(var n=0;n<e.length;n++){if(void 0===t[e[n]])return;t=t[e[n]]}return t},s.prototype.j=function(){return Object.assign({},this.b)},s.prototype.flatten=function(){this.a.splice(0,this.a.length),this.a[0]={},i(this.b,this.a[0])},s.prototype.registerProcessor=function(e,t){e in this.c||(this.c[e]=[]),this.c[e].push(t)},s.prototype.registerProcessor=s.prototype.registerProcessor,s.prototype.flatten=s.prototype.flatten,s.prototype.getComputedState=s.prototype.j,s.prototype.get=s.prototype.get,s.prototype.process=s.prototype.process,window.extensionGoogleDataLayer=window.extensionGoogleDataLayer||{},window.extensionGoogleDataLayer.DataLayerHelper=s}()}}}}},"adobe-alloy":{displayName:"Adobe Experience Platform Web SDK",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP97ee26f077c34b44bd5b43f9d571c9e5/",settings:{instances:[{name:"alloy",edgeConfigId:"78c6b4ba-1a67-4a9c-b265-6cec74ec6ea2",defaultConsent:"%CC | consentStatus%",onBeforeEventSend:function(e){e.xdm=_satellite.getVar("CC | deepClean Utility")(e.xdm)||{}},stagingEdgeConfigId:"a7553d18-0db8-422a-b573-694881fa3f8b",clickCollectionEnabled:!1,developmentEdgeConfigId:"284b0252-6469-4e29-9175-0394e0601572"}]},modules:{"adobe-alloy/dist/lib/dataElements/identityMap/index.js":{name:"identity-map",displayName:"Identity map",script:function(e,t,n,r){"use strict";const o=n("./createIdentityMap")({logger:r.logger});e.exports=e=>o(e)}},"adobe-alloy/dist/lib/dataElements/variable/index.js":{name:"variable",displayName:"Variable",script:function(e,t,n){"use strict";const{variableStore:r}=n("../../index");e.exports=e=>r[e.dataElementId]||{}}},"adobe-alloy/dist/lib/dataElements/xdmObject/index.js":{name:"xdm-object",displayName:"XDM object",script:function(e){"use strict";e.exports=e=>e.data}},"adobe-alloy/dist/lib/actions/sendEvent/index.js":{name:"send-event",displayName:"Send event",script:function(e,t,n,r){"use strict";var o;const a=n("./createSendEvent"),i=n("../../instanceManager/index"),{sendEventCallbackStorage:s}=n("../../index"),l=n("../../utils/createGetConfigOverrides");e.exports=a({instanceManager:i,sendEventCallbackStorage:s,getConfigOverrides:l(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/actions/updateVariable/index.js":{name:"update-variable",displayName:"Update variable",script:function(e,t,n){"use strict";const{deepAssign:r}=n("../../alloy"),{variableStore:o}=n("../../index"),a=n("./createUpdateVariable");e.exports=a({variableStore:o,deepAssign:r})}},"adobe-alloy/dist/lib/actions/setConsent/index.js":{name:"set-consent",displayName:"Set consent",script:function(e,t,n,r){"use strict";var o;const a=n("./createSetConsent"),i=n("../../instanceManager/index"),s=n("../../utils/createGetConfigOverrides");e.exports=a({instanceManager:i,getConfigOverrides:s(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/instanceManager/index.js":{script:function(e,t,n,r){"use strict";var o;const{createCustomInstance:a,createEventMergeId:i,components:s}=n("../alloy"),l=n("./createInstanceManager"),c=n("./injectWrapOnBeforeEventSend"),d=n("../utils/createGetConfigOverrides"),u=c({version:"2.30.1"});e.exports=l({turbine:r,window:window,createCustomInstance:a,components:s,createEventMergeId:i,orgId:_satellite.company.orgId,wrapOnBeforeEventSend:u,getConfigOverrides:d(null===(o=r.environment)||void 0===o?void 0:o.stage)})}},"adobe-alloy/dist/lib/dataElements/identityMap/createIdentityMap.js":{script:function(e){"use strict";e.exports=({logger:e})=>t=>Object.keys(t).reduce(((n,r)=>{const o=t[r].filter((({id:t},n)=>{const o="string"==typeof t&&t.length;return o||e.log(`The identifier at ${r}[${n}] was removed from the identity map because its ID is not a populated string. Its ID value is:`,t),o}));return o.length?n[r]=o:e.log(`The ${r} namespace was removed from the identity map because it contains no identifiers.`),n}),{})}},"adobe-alloy/dist/lib/index.js":{script:function(e,t,n){"use strict";const r=n("./createEventMergeIdCache"),o=n("./createSendEventCallbackStorage"),a=n("./createMediaCollectionSessionStorage"),i=n("./createVariableStore");t.eventMergeIdCache=r(),t.sendEventCallbackStorage=o(),t.mediaCollectionSessionStorage=a(),t.variableStore=i()}},"adobe-alloy/dist/lib/createEventMergeIdCache.js":{script:function(e){"use strict";e.exports=()=>{const e={};return{set(t,n){e[t]=n},getByCacheId:t=>e[t],clearByEventMergeId(t){Object.keys(e).forEach((n=>{e[n]===t&&delete e[n]}))}}}}},"adobe-alloy/dist/lib/createSendEventCallbackStorage.js":{script:function(e){"use strict";e.exports=()=>{const e=[];return{add(t){e.push(t)},triggerEvent(t){e.forEach((e=>{e(t)}))}}}}},"adobe-alloy/dist/lib/createMediaCollectionSessionStorage.js":{script:function(e){"use strict";e.exports=()=>{const e={};return{add({playerId:t,sessionDetails:n}){if(e[t])throw new Error(`Player Id ${t} already exists`);e[t]=n},remove({playerId:t}){e[t]=void 0},get:({playerId:t})=>e[t]}}}},"adobe-alloy/dist/lib/createVariableStore.js":{script:function(e){"use strict";e.exports=()=>({})}},"adobe-alloy/dist/lib/actions/sendEvent/createSendEvent.js":{script:function(e,t,n){"use strict";const r=n("../../utils/clone");e.exports=({instanceManager:e,sendEventCallbackStorage:t,getConfigOverrides:n})=>o=>{const{instanceName:a,...i}=o;i.edgeConfigOverrides=n(i);const s=e.getInstance(a);if(!s)throw new Error(`Failed to send event for instance "${a}". No matching instance was configured with this name.`);return i.xdm&&(i.xdm=r(i.xdm)),i.data&&(i.data=r(i.data)),s("sendEvent",i).then((e=>{t.triggerEvent(e)}))}}},"adobe-alloy/dist/lib/utils/createGetConfigOverrides.js":{script:function(e){"use strict";const t=e=>t=>{var n,r,o,a;const{edgeConfigOverrides:i}=t;let s;if(i){if(i[e])s={...i[e]};else{if(i.development||i.staging||i.production)return;s=i}if(0!==Object.keys(s).length&&!1!==s.enabled){if(delete s.enabled,(null===(n=s.com_adobe_analytics)||void 0===n||null===(n=n.reportSuites)||void 0===n?void 0:n.length)>0&&(s.com_adobe_analytics.reportSuites=s.com_adobe_analytics.reportSuites.flatMap((e=>e.includes(",")?e.split(/,\s*/gi):e)).map((e=>e.trim())).filter(Boolean)),void 0!==(null===(r=s.com_adobe_identity)||void 0===r?void 0:r.idSyncContainerId)&&null!==(null===(o=s.com_adobe_identity)||void 0===o?void 0:o.idSyncContainerId)&&"string"==typeof(null===(a=s.com_adobe_identity)||void 0===a?void 0:a.idSyncContainerId)){const e=parseInt(s.com_adobe_identity.idSyncContainerId.trim(),10);if(Number.isNaN(e))throw new Error(`The ID sync container ID "${s.com_adobe_identity.idSyncContainerId}" is not a valid integer.`);s.com_adobe_identity.idSyncContainerId=e}return s}}};e.exports=t}},"adobe-alloy/dist/lib/utils/clone.js":{script:function(e){"use strict";e.exports=e=>JSON.parse(JSON.stringify(e))}},"adobe-alloy/dist/lib/alloy.js":{script:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function a(e,t){function n(n,r,a){if("undefined"!=typeof document){"number"==typeof(a=o({},t,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in a)a[s]&&(i+="; "+s,!0!==a[s]&&(i+="="+a[s].split(";")[0]));return document.cookie=n+"="+e.write(r,n)+i}}function r(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=e.read(i,s),t===s)break}catch(e){}}return t?r[t]:r}}return Object.create({set:n,get:r,remove:function(e,t){n(e,"",o({},t,{expires:-1}))},withAttributes:function(e){return a(this.converter,o({},this.attributes,e))},withConverter:function(e){return a(o({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}function i(e,t=0){return(sn[e[t+0]]+sn[e[t+1]]+sn[e[t+2]]+sn[e[t+3]]+"-"+sn[e[t+4]]+sn[e[t+5]]+"-"+sn[e[t+6]]+sn[e[t+7]]+"-"+sn[e[t+8]]+sn[e[t+9]]+"-"+sn[e[t+10]]+sn[e[t+11]]+sn[e[t+12]]+sn[e[t+13]]+sn[e[t+14]]+sn[e[t+15]]).toLowerCase()}function s(){if(!ln){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ln=crypto.getRandomValues.bind(crypto)}return ln(cn)}function l(e,t,n){if(dn.randomUUID&&!t&&!e)return dn.randomUUID();const r=(e=e||{}).random??e.rng?.()??s();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return i(r)}function c(e){return"object"==typeof e||void 0===e}function d(){return{matches:(e,t,n=[])=>{if(c(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!c(n[e])&&r===String(n[e]).toLowerCase())return!0;return!1}}}function u(){return{matches:(e,t,n=[])=>{if(c(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!c(n[e])&&r===String(n[e]).toLowerCase())return!1;return!0}}}function p(){return{matches:(e,t)=>void 0!==e[t]&&null!==e[t]}}function m(){return{matches:(e,t)=>void 0===e[t]||null===e[t]}}function g(e){return"number"==typeof e}function f(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r>n[e])return!0;return!1}}}function y(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r>=n[e])return!0;return!1}}}function h(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r<n[e])return!0;return!1}}}function v(){return{matches:(e,t,n=[])=>{const r=e[t];if(!g(r))return!1;for(let e=0;e<n.length;e+=1)if(g(n[e])&&r<=n[e])return!0;return!1}}}function b(){return{matches:(e,t,n=[])=>{if(c(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!c(n[e])&&-1!==r.indexOf(String(n[e]).toLowerCase()))return!0;return!1}}}function E(){return{matches:(e,t,n=[])=>{if(c(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!c(n[e])&&-1!==r.indexOf(String(n[e]).toLowerCase()))return!1;return!0}}}function _(){return{matches:(e,t,n=[])=>{if(c(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!c(n[e])&&r.startsWith(String(n[e]).toLowerCase()))return!0;return!1}}}function P(){return{matches:(e,t,n=[])=>{if(c(e[t]))return!1;const r=String(e[t]).toLowerCase();for(let e=0;e<n.length;e+=1)if(!c(n[e])&&r.endsWith(n[e].toLowerCase()))return!0;return!1}}}function w(e){return Sp[e]}function D(e){return void 0===e}function C(e,t,n,r=0,o=1/0){return e.reduce(((e,a)=>{try{const i=n.generateEventHash(Np(a)),s=t.events[i];if(!s)return e;const{timestamps:l=[]}=s;return e+l.filter((e=>e>=r&&e<=o)).length}catch{return e}}),0)}function I(e,t,n,r=0,o=1/0){try{let a=r;const i=e.every((e=>{const r=n.generateEventHash(Np(e)),i=t.events[r];if(!i)return!1;const s=i.timestamps[0],l=s>=a&&s<=o;return a=s,l}));return Number(i)}catch{return 0}}function S(e,t,n){let r=!0;for(let o=0;o<t.length;o+=1)r=r&&t[o].evaluate(e,n);return r}function k(e,t,n){let r=!1;for(let o=0;o<t.length;o+=1)if(r=r||t[o].evaluate(e,n),r)return!0;return!1}function T(e,t,n){return{version:e,rules:t,metadata:n}}function R(e,t,n){return{key:n,execute:(n,r)=>e.evaluate(n,r)?t:[],toString:()=>`Rule{condition=${e}, consequences=${t}}`}}function O(e,t){return{evaluate:(e,n)=>t.evaluate(e,n),toString:()=>`Condition{type=${e}, definition=${t}}`}}function L(e,t,n){return{id:e,type:t,detail:n}}function x(e,t){return{evaluate:(n,r)=>Cp.AND===e?S(n,t,r):Cp.OR===e&&k(n,t,r)}}function N(e,t,n){return{evaluate:r=>{const o=w(t);return!!o&&o.matches(r,e,n)}}}function j(e,t,n,r,o,a){return{evaluate:(i,s)=>{let l;return l=Ip.ORDERED===a?I(e,i,s,r,o):C(e,i,s,r,o),Lp(l,t,n)}}}function A(e){const{key:t,matcher:n,values:r}=e;return N(t,n,r)}function M(e){const{logic:t,conditions:n}=e;return x(t,n.map($))}function V(e){const{events:t,from:n,to:r,matcher:o,value:a,searchType:i}=e;return j(t,o,a,n,r,i)}function $(e){const{type:t,definition:n}=e;if(wp.MATCHER===t)return O(t,A(n));if(wp.GROUP===t)return O(t,M(n));if(wp.HISTORICAL===t)return O(t,V(n));throw new Error("Can not parse condition")}function q(e){const{id:t,type:n,detail:r}=e;return L(t,n,r)}function U(e){const{condition:t,consequences:n,key:r}=e;return R($(t),n.map(q),r)}function F(e){if(e)return{provider:e.provider,providerData:Object.assign({},e.providerData)}}function B(e){const{version:t,rules:n,metadata:r}=e;return T(t,n.map(U),F(r))}function K(e,t){return{provider:Ap,execute:n=>e.map((e=>e.execute(n,t))).filter((e=>e.length>0))}}function H(e){const{providerData:t}=e;if(!t)throw new Error("Provider data is missing in metadata");const{identityTemplate:n,buckets:r}=t;if(!n)throw new Error("Identity template is missing in provider data");if(!r)throw new Error("Buckets is missing in provider data")}function G(e){const{xdm:t}=e;if(!t)throw new Error("XDM object is missing in the context");const{identityMap:n}=t;if(!n)throw new Error("Identity map is missing in the XDM object");const r=n[Mp];if(!r)throw new Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(r)||0===r.length)throw new Error("ECID identities array is empty or not an array");const o=r[0].id;if(!o)throw new Error("ECID identity is missing in the identities array");return o}function z(e,t,n){const{providerData:r}=n,{identityTemplate:o}=r;return o.replace(Vp,t).replace($p,e)}function W(e){return!D(e)}function J(e,t=e=>e[0]){const n={};return function(...r){const o=t(r);return W(n[o])||(n[o]=e(...r)),n[o]}}function Q(e,t){const n=65535&t;return((t-n)*e|0)+(n*e|0)|0}function Y(e,t=0){let n;const r=e.length,o=3432918353,a=461845907;let i=t;const s=-2&r;for(let t=0;t<s;t+=2)n=e.charCodeAt(t)|e.charCodeAt(t+1)<<16,n=Q(n,o),n=(131071&n)<<15|n>>>17,n=Q(n,a),i^=n,i=(524287&i)<<13|i>>>19,i=5*i+3864292196|0;return r%2==1&&(n=e.charCodeAt(s),n=Q(n,o),n=(131071&n)<<15|n>>>17,n=Q(n,a),i^=n),i^=r<<1,i^=i>>>16,i=Q(i,2246822507),i^=i>>>13,i=Q(i,3266489909),i^=i>>>16,i}function X(e,t){const n=qp(e),r=Math.abs(n)%t/t*Up;return Math.round(r*Up)/Up}function Z(e,t,n){return{allocation:Fp(e,t),...n}}function ee(e){const t={};for(let n=0;n<e.length;n+=1){const r=e[n];r.key&&(t[r.key]||(t[r.key]=[]),t[r.key].push(r))}return t}function te(e,t){return t.map((t=>t.execute(e))).filter((e=>e.length>0))}function ne(e,t){H(t);const n=e.filter((e=>!e.key)),r=ee(e),{buckets:o}=t.providerData;return{provider:jp,execute:e=>{const a=G(e),i=te(e,n),s=Object.keys(r),l=[];for(let n=0;n<s.length;n+=1){const i=s[n],c=r[i],d=te(Z(z(a,i,t),o,e),c);l.push(...d)}return[...i,...l]}}}function re(e,t,n){const{provider:r}=t;return r===jp?ne(e,t):K(e,n)}function oe(e,t={generateEventHash:()=>{throw new Error("No hash function provided")}}){const{rules:n,metadata:r={}}=B(e);return re(n,r,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.deepAssign=t.createEventMergeId=t.createCustomInstance=t.components=void 0;var ae=r(n("@adobe/reactor-query-string")),ie=e=>null==e,se=e=>!ie(e)&&!Array.isArray(e)&&"object"==typeof e,le=(...e)=>e.length<2?Object.assign(...e):e.reduce(((e,t)=>(se(t)&&Object.keys(t).forEach((n=>{Array.isArray(t[n])?Array.isArray(e[n])?e[n].push(...t[n]):e[n]=[...t[n]]:e[n]=t[n]})),e))),ce=a({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),de={get:ce.get.bind(ce),set:ce.set.bind(ce),remove:ce.remove.bind(ce),withConverter:ce.withConverter.bind(ce)};const ue=(e,t)=>{Object.keys(t).forEach((n=>{se(e[n])&&se(t[n])?ue(e[n],t[n]):e[n]=t[n]}))};var pe=(e,...t)=>{if(ie(e))throw new TypeError('deepAssign "target" cannot be null or undefined');const n=Object(e);return t.forEach((e=>ue(n,Object(e)))),n};t.deepAssign=pe;var me=(e,t)=>n=>{const r=t.split(".").reduce(((e,t)=>(e[t]=e[t]||{},e[t])),e);pe(r,n)},ge=()=>{const e=[];return{add(t){e.push(t)},call:(...t)=>Promise.all(e.map((e=>e(...t))))}},fe=({logger:e,cookieJar:t})=>({...t,set(n,r,o){e.info("Setting cookie",{name:n,value:r,...o}),t.set(n,r,o)}}),ye=()=>{let e=0,t=Promise.resolve();return{addTask(n){e+=1;const r=()=>n().finally((()=>{e-=1}));return t=t.then(r,r),t},get length(){return e}}},he=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e};const ve=(e,t)=>e===t,be=(e,t,n)=>{for(let r=0;r<e.length;r+=1)if(n(e[r],t))return r;return-1};var Ee=(e,t=ve)=>e.filter(((n,r)=>be(e,n,t)===r)),_e=(e,t)=>e.appendChild(t);const Pe=(e,t)=>{Object.keys(t).forEach((n=>{if("style"===n&&se(t[n])){const r=t[n];Object.keys(r).forEach((t=>{e.style[t]=r[t]}))}else e[n]=t[n]}))};var we=(e,t={},n={},r=[],o=document)=>{const a=o.createElement(e);return Object.keys(t).forEach((e=>{a.setAttribute(e,t[e])})),Pe(a,n),r.forEach((e=>_e(a,e))),a};const De="BODY",Ce="IFRAME",Ie="IMG",Se="DIV",ke="STYLE",Te="SCRIPT",Re="HEAD";var Oe=({src:e,currentDocument:t=document})=>new Promise(((n,r)=>{we(Ie,{src:e},{onload:n,onerror:r,onabort:r},[],t)})),Le=e=>"function"==typeof e,xe=e=>Array.isArray(e)&&e.length>0,Ne=e=>Array.isArray(e)?e:null==e?[]:[].slice.call(e);const je=/^\s*>/;var Ae=(e,t)=>je.test(t)?Ne(e.querySelectorAll(`:scope ${t}`)):Ne(e.querySelectorAll(t)),Me=":shadow";const Ve=e=>e.split(Me),$e=(e,t)=>{const n=t;return n.startsWith(">")?`${e instanceof Element||e instanceof Document?":scope":":host"} ${n}`:n};var qe=(e,t)=>{const n=Ve(t);if(n.length<2)return Ae(e,t);let r=e;for(let e=0;e<n.length;e+=1){const t=n[e].trim();if(""===t&&r.shadowRoot){r=r.shadowRoot;continue}const o=$e(r,t),a=Ae(r,o);if(0===a.length||!a[0]||!a[0].shadowRoot)return a;r=a[0].shadowRoot}},Ue=e=>-1!==e.indexOf(Me),Fe=(e,t=document)=>Ue(e)?qe(t,e):Ae(t,e);const Be="MutationObserver",Ke="requestAnimationFrame",He={childList:!0,subtree:!0},Ge="visibilityState",ze="visible",We=100,Je=5e3,Qe=e=>new Error(`Could not find: ${e}`),Ye=e=>new Promise(e),Xe=e=>Le(e[Be]),Ze=(e,t,n,r,o)=>Ye(((a,i)=>{let s;const l=new e[Be]((()=>{const e=o(n);xe(e)&&(l.disconnect(),s&&clearTimeout(s),a(e))}));s=setTimeout((()=>{l.disconnect(),i(Qe(n))}),r),l.observe(t,He)})),et=e=>e[Ge]===ze,tt=(e,t,n,r)=>Ye(((o,a)=>{const i=()=>{const n=r(t);xe(n)?o(n):e[Ke](i)};i(),setTimeout((()=>{a(Qe(t))}),n)})),nt=(e,t,n)=>Ye(((r,o)=>{const a=()=>{const t=n(e);xe(t)?r(t):setTimeout(a,We)};a(),setTimeout((()=>{o(Qe(e))}),t)}));var rt=(e,t=Fe,n=Je,r=window,o=document)=>{const a=t(e);return xe(a)?Promise.resolve(a):Xe(r)?Ze(r,o,e,n,t):et(o)?tt(r,e,n,t):nt(e,n,t)},ot=(e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e),at=e=>{const t=e.parentNode;return t?t.removeChild(e):null};const it={name:"Adobe Alloy"},st={style:{display:"none",width:0,height:0}};var lt=({appendNode:e=_e,awaitSelector:t=rt,createNode:n=we,fireImage:r=Oe}={})=>{const o=r;let a;const i=()=>t(De).then((([t])=>a||(a=n(Ce,it,st),e(t,a)))),s=({src:e})=>i().then((t=>{const n=t.contentWindow.document;return r({src:e,currentDocument:n})}));return e=>{const{hideReferrer:t,url:n}=e;return t?s({src:n}):o({src:n})}},ct=e=>se(e)&&0===Object.keys(e).length;const dt=(e,t)=>ie(e)||!se(e)?e:Object.keys(e).reduce(((n,r)=>{const o=e[r];if(se(o)){const e=dt(o,t);return ct(e)?n:{...n,[r]:e}}return t(o)?{...n,[r]:o}:n}),{}),ut=e=>{let t=2166136261;const n=16777619,r=(new TextEncoder).encode(e);for(let e=0;e<r.length;e+=1)t^=r[e],t=Math.imul(t,n);return t>>>0},pt=e=>ut(e).toString(16).padStart(8,"0");var mt="com.adobe.alloy.",gt=(e,t)=>e.slice(-t);const ft=`${mt}getTld`;var yt=(e,t)=>{let n="";const r=e.location.hostname.toLowerCase().split(".");let o=1;for(;o<r.length&&!t.get(ft);)o+=1,n=gt(r,o).join("."),t.set(ft,ft,{domain:n});return t.remove(ft,{domain:n}),n},ht="kndctr",vt=e=>e.replace("@","_"),bt=(e,t)=>`${ht}_${vt(e)}_${t}`,Et=(e,t)=>{const n={};return e.forEach((e=>{const r=t(e);n[r]||(n[r]=[]),n[r].push(e)})),n};const _t="Chrome",Pt="Edge",wt="EdgeChromium",Dt="Firefox",Ct="IE",It="Safari",St="Unknown";var kt=e=>{let t,n=!1;return()=>(n||(n=!0,t=e()),t)};const Tt=[_t,Pt,wt,Ct,St];var Rt=({getBrowser:e})=>kt((()=>Tt.includes(e())));const Ot="identity",Lt="consent",xt="cluster";var Nt=({orgId:e})=>{const t=bt(e,Ot);return()=>Boolean(de.get(t))};const jt=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1){const o=n[r];if(e[o].test(t))return o}return St};var At=({userAgent:e})=>kt((()=>jt({[Pt]:/Edge\/([0-9\._]+)/,[wt]:/Edg\/([0-9\.]+)/,[_t]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,[Dt]:/Firefox\/([0-9\.]+)(?:\s|$)/,[Ct]:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,[It]:/Version\/([0-9\._]+).*Safari/},e)));const Mt=(e,t,n)=>({getItem(r){try{return e[t].getItem(n+r)}catch{return null}},setItem(r,o){try{return e[t].setItem(n+r,o),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach((r=>{r.startsWith(n)&&e[t].removeItem(r)})),!0}catch{return!1}}});var Vt=e=>t=>{const n=mt+t;return{session:Mt(e,"sessionStorage",n),persistent:Mt(e,"localStorage",n)}},$t=(e,t)=>e.filter((e=>t.includes(e))),qt=e=>"boolean"==typeof e,Ut=e=>"number"==typeof e&&!Number.isNaN(e),Ft=e=>{const t=parseInt(e,10);return Ut(t)&&e===t},Bt=(e,t)=>0===t.indexOf(`${ht}_${vt(e)}_`),Kt=e=>"string"==typeof e,Ht=e=>Kt(e)&&e.length>0,Gt=()=>{};const zt=e=>{const t={},n=e.split(".");switch(n.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=n[1];break;case 3:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=n[2];break;case 4:t.subdomain="www"===n[0]?"":n[0],t.domain=e,t.topLevelDomain=`${n[2]}.${n[3]}`}return t},Wt=e=>{try{const t=new URL(e);let n=t.pathname;return e.endsWith("/")||"/"!==n||(n=""),{host:t.hostname,path:n,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{host:"",path:"",query:"",anchor:""}}},Jt=(e,t=zt)=>{Kt(e)||(e="");const n=Wt(e),{host:r,path:o,query:a,anchor:i}=n;return{path:o,query:a,fragment:i,...t(r)}};var Qt=e=>{if(ie(e)||"object"!=typeof e)return null;const t=dt(e,(e=>!(ie(e)||!qt(e)&&!Ut(e)&&!Ht(e)&&!xe(e))));return ct(t)?null:t};const Yt=e=>Array.isArray(e)?e.map((e=>Yt(e))):"object"==typeof e&&null!==e?Object.keys(e).sort().reduce(((t,n)=>(t[n]=Yt(e[n]),t)),{}):e;var Xt=e=>Yt(e),Zt=e=>e instanceof Error?e:new Error(e),en=({error:e,message:t})=>{try{e.message=t}catch{}},tn=({error:e,message:t})=>{const n=Zt(e),r=`${t}\nCaused by: ${n.message}`;return en({error:n,message:r}),n},nn=e=>Kt(e)&&"true"===e.toLowerCase(),rn=(e,t)=>{if(Ut(e)||Kt(e)){const t=Math.round(Number(e));if(!Number.isNaN(t))return t}return t};const on=(e,t,n)=>`${e}`.padStart(t,n);var an=e=>{const t=e.getFullYear(),n=on(e.getMonth()+1,2,"0"),r=on(e.getDate(),2,"0"),o=on(e.getHours(),2,"0"),a=on(e.getMinutes(),2,"0"),i=on(e.getSeconds(),2,"0"),s=on(e.getMilliseconds(),3,"0"),l=rn(e.getTimezoneOffset(),0);return`${t}-${n}-${r}T${o}:${a}:${i}.${s}${l>0?"-":"+"}${on(Math.floor(Math.abs(l)/60),2,"0")}:${on(Math.abs(l)%60,2,"0")}`};const sn=[];for(let e=0;e<256;++e)sn.push((e+256).toString(16).slice(1));let ln;const cn=new Uint8Array(16);var dn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};const un=e=>function(t,n){return null==t?t:e.call(this,t,n)},pn=(e,t)=>function(n,r){return t.call(this,e.call(this,n,r),r)},mn=(e,t)=>function(n,r){const o=[],a=[e,t].reduce(((e,t)=>{try{return t.call(this,e,r)}catch(t){return o.push(t),e}}),n);if(o.length)throw new Error(o.join("\n"));return a},gn=(e,t,n)=>Object.assign(pn(e,t),e,n),fn=(e,t,n)=>Object.assign(pn(e,un(t)),e,n),yn=(e,t,n)=>Object.assign(mn(un(t),e),e,n),hn=(e,t,n,r)=>{if(!e)throw new Error(`'${n}': Expected ${r}, but got ${JSON.stringify(t)}.`)};var vn=(e,t)=>(hn(qt(e),e,t,"true or false"),e),bn=(e,t)=>(hn(Le(e),e,t,"a function"),e),En=(e,t)=>function(n,r){let o;const a=e.find((e=>{try{return o=e.call(this,n,r),!0}catch{return!1}}));return hn(a,n,r,t),o},_n=e=>function(t,n){hn(Array.isArray(t),t,n,"an array");const r=[],o=t.map(((o,a)=>{try{return e.call(this,o,`${n}[${a}]`,t)}catch(e){return void r.push(e.message)}}));if(r.length)throw new Error(r.join("\n"));return o},Pn=e=>t=>null==t?e:t,wn=(e="This field has been deprecated")=>function(t,n){let r=e;return void 0!==t&&(n&&(r=`'${n}': ${r}`),this&&this.logger&&this.logger.warn(r)),t},Dn=e=>(t,n)=>(hn(t===e,t,n,`${e}`),t),Cn=e=>function(t,n){hn(se(t),t,n,"an object");const r=[],o={};if(Object.keys(t).forEach((a=>{const i=t[a],s=n?`${n}.${a}`:a;try{const t=e.call(this,i,s);void 0!==t&&(o[a]=t)}catch(e){r.push(e.message)}})),r.length)throw new Error(r.join("\n"));return o},In=(e,t)=>(n,r)=>(hn(n>=t,n,r,`${e} greater than or equal to ${t}`),n),Sn=(e,t)=>(n,r)=>(hn(n<=t,n,r,`${e} less than or equal to ${t}`),n),kn=e=>(t,n)=>{const r=[];if(Object.keys(t).forEach((t=>{if(!e[t]){const e=n?`${n}.${t}`:t;r.push(`'${e}': Unknown field.`)}})),r.length)throw new Error(r.join("\n"));return t},Tn=e=>(t,n)=>(se(t)?hn(!ct(t),t,n,e):hn(t.length>0,t,n,e),t),Rn=e=>function(t,n){hn(se(t),t,n,"an object");const r=[],o={};if(Object.keys(e).forEach((a=>{const i=t[a],s=e[a],l=n?`${n}.${a}`:a;try{const e=s.call(this,i,l);void 0!==e&&(o[a]=e)}catch(e){r.push(e.message)}})),Object.keys(t).forEach((e=>{Object.prototype.hasOwnProperty.call(o,e)||(o[e]=t[e])})),r.length)throw new Error(r.join("\n"));return o},On=(e,t,n)=>function(r,o){hn(se(r),r,o,"an object");const{[e]:a,[n]:i,...s}=r,l=t(a,o);if(void 0!==l){let t=`The field '${e}' is deprecated. Use '${n}' instead.`;if(o&&(t=`'${o}': ${t}`),void 0!==i&&i!==l)throw new Error(t);this&&this.logger&&this.logger.warn(t)}return{[n]:i||l,...s}},Ln=()=>{const e=[];return(t,n)=>(hn(-1===e.indexOf(t),t,n,"a unique value across instances"),e.push(t),t)},xn=e=>{const t=Object.create(null);for(let n=0;n<e.length;n+=1){const r=e[n];if(r in t)return!1;t[r]=!0}return!0},Nn=()=>(e,t)=>(hn(xn(e),e,t,"array values to be unique"),e);const jn=/^[a-z0-9.-]{1,}$/i;var An=(e,t)=>(hn(jn.test(e),e,t,"a valid domain"),e),Mn=(e,t)=>(hn(Ft(e),e,t,"an integer"),e),Vn=(e,t)=>(hn(Ut(e),e,t,"a number"),e),$n=e=>{try{return null!==RegExp(e)}catch{return!1}},qn=(e,t)=>(hn($n(e),e,t,"a regular expression"),e),Un=(e,t)=>{if(null==e)throw new Error(`'${t}' is a required option`);return e},Fn=(e,t)=>(hn(Kt(e),e,t,"a string"),e),Bn=e=>(t,n)=>(hn(e.test(t),t,n,`does not match the ${e.toString()}`),t);const Kn=e=>e;Kn.default=function(e){return gn(this,Pn(e))},Kn.required=function(){return gn(this,Un)},Kn.deprecated=function(e){return gn(this,wn(e))};const Hn=function(){return fn(this,An)},Gn=function(e){return fn(this,In("an integer",e))},zn=function(e){return fn(this,In("a number",e))},Wn=function(e){return fn(this,Sn("a number",e))},Jn=function(){return fn(this,Mn,{minimum:Gn})},Qn=function(){return fn(this,Tn("a non-empty string"))},Yn=function(){return fn(this,Tn("a non-empty array"))},Xn=function(){return fn(this,Tn("a non-empty object"))},Zn=function(){return fn(this,qn)},er=function(e){return fn(this,Bn(e))},tr=function(){return fn(this,Ln())},nr=function(){return fn(this,Nn())},rr=function(e,t){return gn(this,En(e,t))},or=function(){return this},ar=function(e){return fn(this,_n(e),{nonEmpty:Yn,uniqueItems:nr})},ir=function(){return fn(this,vn)},sr=function(){return fn(this,bn)},lr=function(e){return fn(this,Dn(e))},cr=function(){return fn(this,Vn,{minimum:zn,maximum:Wn,integer:Jn,unique:tr})},dr=function(e){return fn(this,Cn(e),{nonEmpty:Xn})},ur=e=>({noUnknownFields:function(){return fn(this,kn(e))},nonEmpty:Xn,concat:function(t){const n={...e,...t.schema};return fn(this,t,ur(n))},renamed:function(e,t,n){return yn(this,On(e,t,n))},schema:e}),pr=function(e){return fn(this,Rn(e),ur(e))},mr=function(){return fn(this,Fn,{regexp:Zn,domain:Hn,nonEmpty:Qn,unique:tr,matches:er})},gr=rr.bind(Kn),fr=or.bind(Kn),yr=ar.bind(Kn),hr=ir.bind(Kn),vr=sr.bind(Kn),br=lr.bind(Kn),Er=cr.bind(Kn),_r=dr.bind(Kn),Pr=pr.bind(Kn),wr=mr.bind(Kn),Dr=function(...e){return gr(e.map(br),`one of these values: ${JSON.stringify(e)}`)};var Cr=_r(yr(Pr({authenticatedState:Dr("ambiguous","authenticated","loggedOut"),id:wr(),namespace:Pr({code:wr()}).noUnknownFields(),primary:hr(),xid:wr()}).noUnknownFields()).required()),Ir=Pr({}),Sr="alloy_debug",kr=({console:e,locationSearch:t,createLogger:n,instanceName:r,createNamespacedStorage:o,getMonitors:a})=>{const i=ae.default.parse(t),s=o(`instance.${r}.`),l=s.session.getItem("debug");let c="true"===l,d=null===l;const u=()=>c,p=(e,{fromConfig:t})=>{t&&!d||(c=e),t||(s.session.setItem("debug",e.toString()),d=!1)};return void 0!==i[Sr]&&p(nn(i[Sr]),{fromConfig:!1}),{setDebugEnabled:p,logger:n({getDebugEnabled:u,context:{instanceName:r},getMonitors:a,console:e}),createComponentLogger:t=>n({getDebugEnabled:u,context:{instanceName:r,componentName:t},getMonitors:a,console:e})}};const Tr=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Rr=(e,t)=>(...n)=>Promise.all(e.getLifecycleCallbacks(t).map((e=>new Promise((t=>{t(e(...n))}))))),Or=e=>(...t)=>Promise.resolve().then((()=>e(...t)));var Lr=e=>Tr.reduce(((t,n)=>(t[n]=Or(Rr(e,n)),t)),{});const xr=(e,t)=>(...n)=>{let r;try{r=e(...n)}catch(e){throw tn({error:e,message:t})}return r instanceof Promise&&(r=r.catch((e=>{throw tn({error:e,message:t})}))),r};var Nr=()=>{const e={},t={},n={},r=(e,n={})=>{const r=$t(Object.keys(t),Object.keys(n))
;if(r.length)throw new Error(`[ComponentRegistry] Could not register ${e} because it has existing command(s): ${r.join(",")}`);Object.keys(n).forEach((r=>{const o=n[r];o.commandName=r,o.run=xr(o.run,`[${e}] An error occurred while executing the ${r} command.`),t[r]=o}))},o=(e,t={})=>{Object.keys(t).forEach((r=>{n[r]=n[r]||[],n[r].push(xr(t[r],`[${e}] An error occurred while executing the ${r} lifecycle hook.`))}))};return{register(t,n){const{commands:a,lifecycle:i}=n;r(t,a),o(t,i),e[t]=n},getCommand:e=>t[e],getCommandNames:()=>Object.keys(t),getLifecycleCallbacks:e=>n[e]||[],getComponentNames:()=>Object.keys(e)}},jr=({logger:e,sendFetchRequest:t,sendBeaconRequest:n,isRequestRetryable:r,getRequestRetryDelay:o})=>({requestId:a,url:i,payload:s,useSendBeacon:l})=>{const c=JSON.stringify(s),d=JSON.parse(c);e.logOnBeforeNetworkRequest({url:i,requestId:a,payload:d});const u=(s=0)=>(l?n:t)(i,c).then((t=>{if(r({response:t,retriesAttempted:s})){const e=o({response:t,retriesAttempted:s});return new Promise((t=>{setTimeout((()=>{t(u(s+1))}),e)}))}let n;try{n=JSON.parse(t.body)}catch{}return e.logOnNetworkResponse({requestId:a,url:i,payload:d,...t,parsedBody:n,retriesAttempted:s}),{statusCode:t.statusCode,body:t.body,parsedBody:n,getHeader:t.getHeader}}));return u().catch((t=>{throw e.logOnNetworkError({requestId:a,url:i,payload:d,error:t}),tn({error:t,message:"Network request failed."})}))},Ar=({logger:e})=>t=>{if(t){const n=t.split(";");if(n.length>=2&&n[1].length>0)try{const e=parseInt(n[1],10);if(!Number.isNaN(e))return{regionId:e}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}};const Mr="in",Vr="out",$r="pending",qr="general",Ur="declinedConsent",Fr="default",Br="initial",Kr="new",Hr=e=>{const t=new Error(e);return t.code=Ur,t.message=e,t};var Gr=({logger:e})=>{const t=[],n=()=>{for(;t.length;)t.shift().resolve()},r=()=>{for(;t.length;)t.shift().reject(Hr("The user declined consent."))},o=()=>Promise.resolve(),a=()=>Promise.resolve(),i=()=>Promise.resolve(),s=()=>Promise.reject(Hr("No consent preferences have been set.")),l=()=>Promise.reject(Hr("The user declined consent.")),c=e=>{if(e)return Promise.reject(new Error("Consent is pending."));const n=he();return t.push(n),n.promise};return{in(t){t===Fr?this.awaitConsent=a:(t===Br?e.info("Loaded user consent preferences. The user previously consented."):t===Kr&&this.awaitConsent!==i&&e.info("User consented."),n(),this.awaitConsent=i)},out(t){t===Fr?(e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=s):(t===Br?e.warn("Loaded user consent preferences. The user previously declined consent."):t===Kr&&this.awaitConsent!==l&&e.warn("User declined consent."),r(),this.awaitConsent=l)},pending(t){t===Fr&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=c},awaitConsent:o,withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case a:return{state:"in",wasSet:!1};case i:return{state:"in",wasSet:!0};case s:return{state:"out",wasSet:!1};case l:return{state:"out",wasSet:!0};case c:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}},zr=({generalConsentState:e,logger:t})=>{const n=(n,r)=>{switch(n[qr]){case Mr:e.in(r);break;case Vr:e.out(r);break;case $r:e.pending(r);break;default:t.warn(`Unknown consent value: ${n[qr]}`)}};return{initializeConsent(e,t){t[qr]?n(t,Br):n(e,Fr)},setConsent(e){n(e,Kr)},suspend(){e.pending()},awaitConsent:()=>e.awaitConsent(),withConsent:()=>e.withConsent(),current:()=>e.current()}};const Wr=e=>e&&e._experience&&e._experience.decisioning&&xe(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[];var Jr=()=>{const e={};let t,n,r=!1,o=!1,a=!0;const i=e=>{if(o)throw new Error(`${e} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){const r=JSON.parse(JSON.stringify(e));return t&&pe(r,{xdm:t}),n&&pe(r,{data:n}),r},setUserXdm(e){i("setUserXdm"),t=e},setUserData(e){i("setUserData"),n=e},mergeXdm(t){i("mergeXdm"),t&&pe(e,{xdm:t})},mergeData(t){i("mergeData"),t&&pe(e,{data:t})},mergeMeta(t){i("mergeMeta"),t&&pe(e,{meta:t})},mergeQuery(t){i("mergeQuery"),t&&pe(e,{query:t})},documentMayUnload(){r=!0},finalize(r){if(o)return;const i=Ee([...Wr(t),...Wr(e.xdm)],((e,t)=>e===t||e.id&&t.id&&e.id===t.id&&e.scope&&t.scope&&e.scope===t.scope));if(t&&this.mergeXdm(t),i.length>0&&(e.xdm._experience.decisioning.propositions=i),n&&s.mergeData(n),o=!0,r){a=!1;const t={xdm:e.xdm||{},data:e.data||{}},n=r(t);a=!1!==n,e.xdm=t.xdm||{},e.data=t.data||{},ct(e.xdm)&&delete e.xdm,ct(e.data)&&delete e.data}},getDocumentMayUnload:()=>r,isEmpty:()=>ct(e)&&(!t||ct(t))&&(!n||ct(n)),shouldSend:()=>a,getViewName(){if(t&&t.web&&t.web.webPageDetails)return t.web.webPageDetails.viewName},toJSON(){if(!o)throw new Error("toJSON called before finalize");return e}};return s};const Qr="Retry-After",Yr="x-adobe-edge";var Xr=({extractEdgeInfo:e})=>({content:t={},getHeader:n})=>{const{handle:r=[],errors:o=[],warnings:a=[]}=t;return{getPayloadsByType:e=>r.filter((t=>t.type===e)).flatMap((e=>e.payload)),getErrors:()=>o,getWarnings:()=>a,getEdge:()=>e(n(Yr)),toJSON:()=>t}};const Zr="configure",eo="setDebug";var to=({logger:e,configureCommand:t,setDebugCommand:n,handleError:r,validateCommandOptions:o})=>{let a;const i=(r,i)=>{let s;if(r===Zr){if(a)throw new Error("The library has already been configured and may only be configured once.");s=()=>(a=t(i),a.then((()=>{})))}else{if(!a)throw new Error("The library must be configured first. Please do so by executing the configure command.");s=r===eo?()=>{const e=Pr({enabled:hr().required()}).noUnknownFields(),t=o({command:{commandName:eo,optionsValidator:e},options:i});n(t)}:()=>a.then((e=>{const t=e.getCommand(r);if(!t||!Le(t.run)){const t=[Zr,eo].concat(e.getCommandNames()).join(", ");throw new Error(`The ${r} command does not exist. List of available commands: ${t}.`)}const n=o({command:t,options:i});return t.run(n)}),(()=>(e.warn(`An error during configuration is preventing the ${r} command from executing.`),new Promise((()=>{})))))}return s};return(t,n={})=>new Promise((r=>{const o=i(t,n);e.logOnBeforeCommand({commandName:t,options:n}),r(o())})).catch((e=>r(e,`${t} command`))).catch((r=>{throw e.logOnCommandRejected({commandName:t,options:n,error:r}),r})).then((r=>{const o=se(r)?r:{};return e.logOnCommandResolved({commandName:t,options:n,result:o}),o}))};const no="https://adobe.ly/3sHgQHb";var ro=({command:e,options:t})=>{const{commandName:n,documentationUri:r=no,optionsValidator:o}=e;let a=t;if(o)try{a=o(t)}catch(e){throw new Error(`Invalid ${n} command options:\n\t - ${e} For command documentation see: ${r}`)}return a};const oo="https://adobe.ly/3sHh553",ao=({combinedConfigValidator:e,options:t,logger:n})=>{try{return e.noUnknownFields().required().call({logger:n},t)}catch(e){throw new Error(`Resolve these configuration problems:\n\t - ${e.message.split("\n").join("\n\t - ")}\nFor configuration documentation see: ${oo}`)}},io=(e,t,n)=>n.reduce(((n,{buildOnInstanceConfiguredExtraParams:r})=>(r&&(n={...n,...r({config:e,logger:t})}),n)),{}),so=e=>{const t=[],n={get enabled(){return e.enabled},flush(){t.forEach((({method:t,args:n})=>e[t](...n)))}};return Object.keys(e).filter((t=>"function"==typeof e[t])).forEach((e=>{n[e]=(...n)=>{t.push({method:e,args:n})}})),n};var lo=({options:e,componentCreators:t,coreConfigValidators:n,createConfig:r,logger:o,setDebugEnabled:a})=>{const i=so(o),s=t.map((({configValidators:e})=>e)).filter((e=>e)).reduce(((e,t)=>e.concat(t)),n),l=r(ao({combinedConfigValidator:s,options:e,logger:i}));a(l.debugEnabled,{fromConfig:!0}),i.flush();const c=io(l,o,t);return o.logOnInstanceConfigured({...c,config:l}),l},co=({componentCreators:e,lifecycle:t,componentRegistry:n,getImmediatelyAvailableTools:r})=>(e.forEach((e=>{const{namespace:t}=e,o=r(t);let a;try{a=e(o)}catch(e){throw tn({error:e,message:`[${t}] An error occurred during component creation.`})}n.register(t,a)})),t.onComponentsRegistered({lifecycle:t}).then((()=>n)));const uo=e=>({...e}),po="edge.adobedc.net",mo="adobedc.demdex.net";var go="ee",fo=()=>Pr({debugEnabled:hr().default(!1),datastreamId:wr().unique().required(),edgeDomain:wr().domain().default(po),edgeBasePath:wr().nonEmpty().default(go),orgId:wr().unique().required(),onBeforeEventSend:vr().default(Gt),edgeConfigOverrides:Ir}).renamed("edgeConfigId",wr().unique(),"datastreamId"),yo=({errorPrefix:e,logger:t})=>(n,r)=>{const o=Zt(n);if(o.code===Ur)return t.warn(`The ${r} could not fully complete. ${o.message}`),{};throw en({error:o,message:`${e} ${o.message}`}),o},ho=({fetch:e})=>(t,n)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:n}).then((e=>e.text().then((t=>({statusCode:e.status,getHeader:t=>e.headers.get(t),body:t}))))),vo=({sendBeacon:e,sendFetchRequest:t,logger:n})=>(r,o)=>{const a=new Blob([o],{type:"text/plain; charset=UTF-8"});return e(r,a)?Promise.resolve({statusCode:204,getHeader:()=>null,body:""}):(n.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(r,o))},bo=({getDebugEnabled:e,console:t,getMonitors:n,context:r})=>{let o=`[${r.instanceName}]`;r.componentName&&(o+=` [${r.componentName}]`);const a=(e,t)=>{const o=n();if(o.length>0){const n={...r,...t};o.forEach((t=>{t[e]&&t[e](n)}))}},i=(n,...r)=>{a("onBeforeLog",{level:n,arguments:r}),e()&&t[n](o,...r)};return{get enabled(){return n().length>0||e()},logOnInstanceCreated(e){a("onInstanceCreated",e),i("info","Instance initialized.")},logOnInstanceConfigured(e){a("onInstanceConfigured",e),i("info","Instance configured. Computed configuration:",e.config)},logOnBeforeCommand(e){a("onBeforeCommand",e),i("info",`Executing ${e.commandName} command. Options:`,e.options)},logOnCommandResolved(e){a("onCommandResolved",e),i("info",`${e.commandName} command resolved. Result:`,e.result)},logOnCommandRejected(e){a("onCommandRejected",e),i("error",`${e.commandName} command was rejected. Error:`,e.error)},logOnBeforeNetworkRequest(e){a("onBeforeNetworkRequest",e),i("info",`Request ${e.requestId}: Sending request.`,e.payload)},logOnNetworkResponse(e){a("onNetworkResponse",e);const t=e.parsedBody||e.body?"response body:":"no response body.";i("info",`Request ${e.requestId}: Received response with status code ${e.statusCode} and ${t}`,e.parsedBody||e.body)},logOnNetworkError(e){a("onNetworkError",e),i("error",`Request ${e.requestId}: Network request failed.`,e.error)},logOnContentHiding(e){a("onContentHiding",{status:e.status}),i(e.logLevel,e.message)},logOnContentRendering(e){a("onContentRendering",{status:e.status,payload:e.detail}),i(e.logLevel,e.message)},info:i.bind(null,"info"),warn:i.bind(null,"warn"),error:i.bind(null,"error")}},Eo="__view__",_o=e=>(t,n)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(n)},Po=e=>{const{payload:t,getAction:n,getUseSendBeacon:r,datastreamIdOverride:o,edgeSubPath:a}=e,i=l();let s=!1,c=!1;return{getId:()=>i,getPayload:()=>t,getAction:()=>n({isIdentityEstablished:c}),getDatastreamIdOverride:()=>o,getUseSendBeacon:()=>r({isIdentityEstablished:c}),getEdgeSubPath:()=>a||"",getUseIdThirdPartyDomain:()=>s,setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){c=!0}}},wo=({payload:e,datastreamIdOverride:t})=>{const n=({isIdentityEstablished:t})=>e.getDocumentMayUnload()&&t;return Po({payload:e,getAction:({isIdentityEstablished:e})=>n({isIdentityEstablished:e})?"collect":"interact",getUseSendBeacon:n,datastreamIdOverride:t})},Do=e=>{const{content:t,addIdentity:n,hasIdentity:r}=e,o=me(t,"meta.configOverrides");return{mergeMeta:me(t,"meta"),mergeState:me(t,"meta.state"),mergeQuery:me(t,"query"),mergeConfigOverride:e=>o(Qt(e)),addIdentity:n,hasIdentity:r,toJSON:()=>t}},Co=e=>t=>void 0!==(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t]),Io=()=>{const e={},t=Do({content:e,addIdentity:_o(e),hasIdentity:Co(e)});return t.addEvent=t=>{e.events=e.events||[],e.events.push(t)},t.getDocumentMayUnload=()=>(e.events||[]).some((e=>e.getDocumentMayUnload())),t},So=({localConfigOverrides:e,globalConfigOverrides:t,payload:n})=>{const r={payload:n},{datastreamId:o,...a}=e||{};return o&&(r.datastreamIdOverride=o),t&&!ct(t)&&n.mergeConfigOverride(t),a&&!ct(a)&&n.mergeConfigOverride(a),r};const ko="adb_validation_sessionid",To="validation.",Ro="clientId",Oo=e=>{let t=e.persistent.getItem(Ro);return t||(t=l(),e.persistent.setItem(Ro,t)),t};var Lo=({window:e,createNamespacedStorage:t})=>{const n=t(To);return()=>{const t=ae.default.parse(e.location.search)[ko];if(!t)return"";const r=`${t}|${Oo(n)}`;return`&${ae.default.stringify({adobeAepValidationToken:r})}`}};const xo="Event was canceled because the onBeforeEventSend callback returned false.";var No=({config:e,logger:t,lifecycle:n,consent:r,createEvent:o,createDataCollectionRequestPayload:a,createDataCollectionRequest:i,sendEdgeNetworkRequest:s,applyResponse:l})=>{const{onBeforeEventSend:c,edgeConfigOverrides:d}=e;return{createEvent:o,sendEvent(e,o={}){const{edgeConfigOverrides:l,...u}=o,p=So({payload:a(),localConfigOverrides:l,globalConfigOverrides:d}),m=i(p),g=ge(),f=ge();return n.onBeforeEvent({...u,event:e,onResponse:g.add,onRequestFailure:f.add}).then((()=>(p.payload.addEvent(e),r.awaitConsent()))).then((()=>{try{e.finalize(c)}catch(e){const t=()=>{throw e};return f.add(n.onRequestFailure),f.call({error:e}).then(t,t)}if(!e.shouldSend()){f.add(n.onRequestFailure),t.info(xo);const e=new Error(xo);return f.call({error:e}).then((()=>{}))}return s({request:m,runOnResponseCallbacks:g.call,runOnRequestFailureCallbacks:f.call})}))},applyResponse(e,t={}){const{renderDecisions:r=!1,decisionContext:o={},responseHeaders:s={},responseBody:c={handle:[]},personalization:d}=t,u=a(),p=i({payload:u}),m=ge();return n.onBeforeEvent({event:e,renderDecisions:r,decisionContext:o,decisionScopes:[Eo],personalization:d,onResponse:m.add,onRequestFailure:Gt}).then((()=>(u.addEvent(e),l({request:p,responseHeaders:s,responseBody:c,runOnResponseCallbacks:m.call}))))}}};const jo="state:store";var Ao=({cookieJar:e,shouldTransferCookie:t,apexDomain:n,dateProvider:r})=>({cookiesToPayload(r,o){const a=""!==n&&o.endsWith(n),i={domain:n,cookiesEnabled:!0};if(!a){const n=e.get(),r=Object.keys(n).filter(t).map((e=>({key:e,value:n[e]})));r.length&&(i.entries=r)}r.mergeState(i)},responseToCookies(t){t.getPayloadsByType(jo).forEach((t=>{const o={domain:n},a=t.attrs&&t.attrs.SameSite&&t.attrs.SameSite.toLowerCase();void 0!==t.maxAge&&(o.expires=new Date(r().getTime()+1e3*t.maxAge)),void 0!==a&&(o.sameSite=a),"none"===a&&(o.secure=!0),e.set(t.key,t.value,o)}))}});const Mo="mboxEdgeCluster",Vo="at_qa_mode",$o="mbox";var qo=({orgId:e,targetMigrationEnabled:t})=>n=>Bt(e,n)||n===Vo||t&&n===$o,Uo="v1";const Fo="TypeError",Bo="NetworkError",Ko=e=>e.name===Fo||e.name===Bo||0===e.status;var Ho=e=>{const t=e.shift()||[],n=e.shift()||[];return le({},...t,...n,...e)},Go=e=>t=>{const n=()=>{throw t};return e.call({error:t}).then(n,n)};const zo=(e,t)=>t.getUseIdThirdPartyDomain()&&Ko(e);var Wo=({config:e,lifecycle:t,cookieTransfer:n,sendNetworkRequest:r,createResponse:o,processWarningsAndErrors:a,getLocationHint:i,getAssuranceValidationTokenParams:s})=>{const{edgeDomain:l,edgeBasePath:c,datastreamId:d}=e;let u=!1;const p=(e,t)=>{const n=i(),r=n?`${c}/${n}${t.getEdgeSubPath()}`:`${c}${t.getEdgeSubPath()}`,o=t.getDatastreamIdOverride()||d;return o!==d&&t.getPayload().mergeMeta({sdkConfig:{datastream:{original:d}}}),`https://${e}/${r}/${Uo}/${t.getAction()}?configId=${o}&requestId=${t.getId()}${s()}`};return({request:e,runOnResponseCallbacks:i=Gt,runOnRequestFailureCallbacks:s=Gt})=>{const c=ge();c.add(t.onResponse),c.add(i);const d=ge();return d.add(t.onRequestFailure),d.add(s),t.onBeforeRequest({request:e,onResponse:c.add,onRequestFailure:d.add}).then((()=>{const t=u||!e.getUseIdThirdPartyDomain()?l:mo,o=p(t,e),a=e.getPayload();return n.cookiesToPayload(a,t),r({requestId:e.getId(),url:o,payload:a,useSendBeacon:e.getUseSendBeacon()})})).then((e=>(a(e),e))).catch((t=>{if(zo(t,e)){u=!0,e.setUseIdThirdPartyDomain(!1);const t=p(l,e),o=e.getPayload();return n.cookiesToPayload(o,l),r({requestId:e.getId(),url:t,payload:o,useSendBeacon:e.getUseSendBeacon()})}return Go(d)(t)})).then((({parsedBody:e,getHeader:t})=>{const r=o({content:e,getHeader:t});return n.responseToCookies(r),c.call({response:r}).then(Ho)}))}};const Jo=204,Qo="The server responded with a";var Yo=({logger:e})=>t=>{const{statusCode:n,body:r,parsedBody:o}=t;if(n<200||n>=300||!o&&n!==Jo||o&&!Array.isArray(o.handle)){const e=o?JSON.stringify(o,null,2):r;throw new Error(`${Qo} status code ${n} and ${e?`response body:\n${e}`:"no response body."}`)}if(o){const{warnings:t=[],errors:n=[]}=o;t.forEach((t=>{e.warn(`${Qo} warning:`,t)})),n.forEach((t=>{e.error(`${Qo} non-fatal error:`,t)}))}},Xo=({orgId:e,cookieJar:t})=>{const n=bt(e,xt),r=()=>t.get(n),o=()=>{const e=t.get(Mo);if(e)return`t${e}`};return()=>r()||o()};const Zo=3,ea=[429,503,502,504];var ta=({response:e,retriesAttempted:t})=>t<Zo&&ea.includes(e.statusCode);const na=1e3,ra=1e3,oa=.3,aa=e=>{const t=na+e*ra,n=t*oa,r=t-n,o=t+n;return Math.round(r+Math.random()*(o-r))},ia=e=>{const t=e.getHeader(Qr);let n;if(t){const e=parseInt(t,10);n=Ft(e)?1e3*e:Math.max(0,new Date(t).getTime()-(new Date).getTime())}return n};var sa=({response:e,retriesAttempted:t})=>{let n=ia(e);return void 0===n&&(n=aa(t)),n};const la=200;var ca=({cookieTransfer:e,lifecycle:t,createResponse:n,processWarningsAndErrors:r})=>({request:o,responseHeaders:a,responseBody:i,runOnResponseCallbacks:s=Gt,runOnRequestFailureCallbacks:l=Gt})=>{const c=ge();c.add(t.onResponse),c.add(s);const d=ge();d.add(t.onRequestFailure),d.add(l);const u=e=>a[e];return t.onBeforeRequest({request:o,onResponse:c.add,onRequestFailure:d.add}).then((()=>r({statusCode:la,getHeader:u,body:JSON.stringify(i),parsedBody:i}))).catch(Go(d)).then((()=>{const t=n({content:i,getHeader:u});return e.responseToCookies(t),c.call({response:t}).then(Ho)}))},da=e=>{let t=window.__alloyMonitors||[];return e&&(t=t.concat(e)),t},ua=e=>t=>{const n={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};pe(t,{web:n})};const pa=e=>{const{screen:{orientation:t}}=e;if(null==t||null==t.type)return null;const n=t.type.split("-");return 0===n.length||"portrait"!==n[0]&&"landscape"!==n[0]?null:n[0]},ma=e=>{if(Le(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null};var ga=e=>t=>{const{screen:{width:n,height:r}}=e,o={},a=rn(r);a>=0&&(o.screenHeight=a);const i=rn(n);i>=0&&(o.screenWidth=i);const s=pa(e)||ma(e);s&&(o.screenOrientation=s),Object.keys(o).length>0&&pe(t,{device:o})},fa=e=>t=>{const{document:{documentElement:{clientWidth:n,clientHeight:r}={}}}=e,o={type:"browser"},a=rn(n);a>=0&&(o.browserDetails={viewportWidth:a});const i=rn(r);i>=0&&(o.browserDetails=o.browserDetails||{},o.browserDetails.viewportHeight=i),pe(t,{environment:o})},ya=e=>t=>{const n=e(),r={},o=rn(n.getTimezoneOffset());void 0!==o&&(r.localTimezoneOffset=o),(void 0===o||Math.abs(o)<6e3)&&(r.localTime=an(n)),pe(t,{placeContext:r})},ha=e=>t=>{const n=e().toISOString();pe(t,{timestamp:n})},va="https://ns.adobe.com/experience/alloy",ba="2.27.0",Ea=e=>{pe(e,{implementationDetails:{name:va,version:ba,environment:"browser"}})},_a=(e,t,n,r)=>{const o=e.context.flatMap(((e,r)=>n[e]?[n[e]]:(t.warn(`Invalid context[${r}]: '${e}' is not available.`),[]))).concat(r);return{namespace:"Context",lifecycle:{onBeforeEvent({event:e}){const n={};return Promise.all(o.map((e=>Promise.resolve(e(n,t))))).then((()=>e.mergeXdm(n)))}}}},Pa=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]];const wa=e=>"userAgentData"in e;var Da=e=>wa(e)?(t,n)=>{try{return e.userAgentData.getHighEntropyValues(Pa.map((e=>e[0]))).then((e=>{const n={};Pa.forEach((([t,r])=>{Object.prototype.hasOwnProperty.call(e,t)&&typeof e[t]===r&&(n[t]=e[t])})),pe(t,{environment:{browserDetails:{userAgentClientHints:n}}})}))}catch(e){return n.warn(`Unable to collect user-agent client hints. ${e.message}`),Gt}}:Gt;const Ca=ua(window),Ia=ga(window),Sa=fa(window),ka=ya((()=>new Date)),Ta=ha((()=>new Date)),Ra={web:Ca,device:Ia,environment:Sa,placeContext:ka},Oa={highEntropyUserAgentHints:Da(navigator)},La={...Ra,...Oa},xa=[Ta,Ea],Na=({config:e,logger:t})=>_a(e,t,La,xa);Na.namespace="Context",Na.configValidators=Pr({context:yr(wr()).default(Object.keys(Ra))});var ja=({options:e})=>Pr({type:wr(),xdm:Pr({eventType:wr(),identityMap:Cr}),data:Pr({}),documentUnloading:hr(),renderDecisions:hr(),decisionScopes:yr(wr()).uniqueItems(),personalization:Pr({decisionScopes:yr(wr()).uniqueItems(),surfaces:yr(wr()).uniqueItems(),sendDisplayEvent:hr().default(!0),includeRenderedPropositions:hr().default(!1),defaultPersonalizationEnabled:hr(),decisionContext:Pr({})}).default({sendDisplayEvent:!0}),datasetId:wr(),mergeId:wr(),edgeConfigOverrides:Ir}).required().noUnknownFields()(e),Aa=({options:e})=>Pr({renderDecisions:hr(),responseHeaders:_r(wr().required()),responseBody:Pr({handle:yr(Pr({type:wr().required(),payload:fr().required()})).required()}).required(),personalization:Pr({sendDisplayEvent:hr().default(!0),decisionContext:Pr({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e);const Ma=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:e=>ja({options:e}),run:n=>{const{xdm:r,data:o,documentUnloading:a,type:i,mergeId:s,datasetId:l,edgeConfigOverrides:c,...d}=n,u=e.createEvent();return a&&u.documentMayUnload(),u.setUserXdm(r),u.setUserData(o),i&&u.mergeXdm({eventType:i}),s&&u.mergeXdm({eventMergeId:s}),c&&(d.edgeConfigOverrides=c),l&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),d.edgeConfigOverrides=c||{},pe(d.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:l}}}})),e.sendEvent(u,d)}},applyResponse:{documentationUri:"",optionsValidator:e=>Aa({options:e}),run:t=>{const{renderDecisions:n=!1,decisionContext:r={},responseHeaders:o={},responseBody:a={handle:[]},personalization:i}=t,s=e.createEvent();return e.applyResponse(s,{renderDecisions:n,decisionContext:r,responseHeaders:o,responseBody:a,personalization:i})}}}});Ma.namespace="DataCollector";const Va=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`;var $a=({fireReferrerHideableImage:e,logger:t})=>n=>{const r=n.filter((e=>"url"===e.type));return r.length?Promise.all(r.map((n=>e(n.spec).then((()=>{t.info(Va(n,!0))})).catch((()=>{t.error(Va(n,!1))}))))).then(Gt):Promise.resolve()};const qa=Pr({thirdPartyCookiesEnabled:hr().default(!0),idMigrationEnabled:hr().default(!0)});var Ua=Pr({url:wr().required().nonEmpty(),edgeConfigOverrides:Ir}).required().noUnknownFields(),Fa="ECID",Ba=({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:n,setLegacyEcid:r,handleResponseForIdSyncs:o,getNamespacesFromResponse:a,getIdentity:i,consent:s,appendIdentityToUrl:l,logger:c,getIdentityOptionsValidator:d,decodeKndctrCookie:u})=>{let p,m={};return{lifecycle:{onBeforeRequest:({request:r,onResponse:o,onRequestFailure:a})=>(e(r.getPayload()),t(r.getPayload()),n({request:r,onResponse:o,onRequestFailure:a})),onResponse({response:e}){const t=a(e);return p&&p[Fa]||!t||!t[Fa]||r(t[Fa]),t&&Object.keys(t).length>0&&(p={...p,...t}),m={...m,...e.getEdge()},o(e)}},commands:{getIdentity:{optionsValidator:d,run:e=>{const{namespaces:t}=e;return s.awaitConsent().then((()=>{if(p)return;const n=u();return n&&t.includes(Fa)&&(p||(p={}),p[Fa]=n,1===t.length)?void 0:i(e)})).then((()=>({identity:t.reduce(((e,t)=>(e[t]=p[t]||null,e)),{}),edge:m})))}},appendIdentityToUrl:{optionsValidator:Ua,run:e=>s.withConsent().then((()=>{if(p)return;const t=u();return t?(p||(p={}),void(p[Fa]=t)):i(e)})).then((()=>({url:l(p[Fa],e.url)}))).catch((t=>(c.warn(`Unable to append identity to url. ${t.message}`),e)))}}}},Ka=({config:e,getEcidFromVisitor:t,apexDomain:n,isPageSsl:r,cookieJar:o})=>{const{idMigrationEnabled:a,orgId:i}=e,s=`AMCV_${i}`,l=()=>{let e=null;const t="s_ecid",n=o.get(t)||o.get(s);if(n){const t=/(^|\|)MCMID\|(\d+)($|\|)/,r=n.match(t);r&&(e=r[2])}return e};return{getEcid(){if(a){const e=l();return e?Promise.resolve(e):t()}return Promise.resolve()},setEcid(e){if(a&&l()!==e){const t=r?{sameSite:"none",secure:!0}:{};o.set(s,`MCMID|${e}`,{domain:n,expires:390,...t})}}}},Ha=({logger:e})=>new Promise(((t,n)=>{if(se(window.adobe)&&se(window.adobe.optIn)){const r=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),r.fetchPermissions((()=>{r.isApproved([r.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):n(new Error("Legacy opt-in was declined."))}),!0)}else t()})),Ga=e=>{const t=e.Visitor;return Le(t)&&Le(t.getInstance)&&t},za=({logger:e,orgId:t,awaitVisitorOptIn:n})=>()=>{const r=Ga(window);return r?n({logger:e}).then((()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise((n=>{r.getInstance(t,{}).getMarketingCloudVisitorID((t=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),n(t)}),!0)}))))).catch((t=>{t?e.info(`${t.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")})):Promise.resolve()},Wa=({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange")),Ja=({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:n,awaitIdentityCookie:r,logger:o})=>{let a;const i=e=>(t(e),n(e.getPayload()));return({request:t,onResponse:n,onRequestFailure:s})=>{if(e())return t.setIsIdentityEstablished(),Promise.resolve();if(a){o.info("Delaying request while retrieving ECID from server.");const e=a;return a=e.catch((()=>r({onResponse:n,onRequestFailure:s}))),e.then((()=>{o.info("Resuming previously delayed request."),t.setIsIdentityEstablished()})).catch((()=>i(t)))}return a=r({onResponse:n,onRequestFailure:s}),a.catch((()=>{})),i(t)}},Qa="CORE",Ya=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{const n={identity:{fetch:[Fa]}};return e&&t()&&n.identity.fetch.push(Qa),e=>{e.mergeQuery(n)}},Xa=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>n=>{e&&t()&&n.setUseIdThirdPartyDomain()},Za=({getLegacyEcid:e,addEcidToPayload:t})=>n=>n.hasIdentity(Fa)?Promise.resolve():e().then((e=>{e&&t(n,e)})),ei="adobe_mc",ti=e=>{try{return decodeURIComponent(e)}catch{return""}};const ni=300;var ri=({locationSearch:e,dateProvider:t,orgId:n,logger:r})=>o=>{if(o.hasIdentity(Fa))return;let a=ae.default.parse(e)[ei];if(void 0===a)return;Array.isArray(a)&&(r.warn("Found multiple adobe_mc query string paramters, only using the last one."),a=a[a.length-1]);const i=a.split("|").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=ti(r),e[n]=e[n].replace(/[^a-zA-Z0-9@.]/g,""),e}),{}),s=parseInt(i.TS,10),l=i.MCMID,c=ti(i.MCORGID);t().getTime()/1e3<=s+ni&&c===n&&l?(r.info(`Found valid ECID identity ${l} from the adobe_mc query string parameter.`),o.addIdentity(Fa,{id:l})):r.info("Detected invalid or expired adobe_mc query string parameter.")},oi=(e,t)=>{e.addIdentity(Fa,{id:t})},ai=({doesIdentityCookieExist:e,orgId:t,logger:n})=>({onResponse:r,onRequestFailure:o})=>new Promise(((a,i)=>{r((()=>{e()?a():(n.warn(`Identity cookie not found. This could be caused by any of the following issues:\n\t* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.\n\t* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.\n\t* The request was canceled by the browser and not fully processed.`),i(new Error("Identity cookie not found.")))})),o((()=>{e()?a():i(new Error("Identity cookie not found."))}))})),ii=e=>e.getPayloadsByType("identity:result").reduce(((e,t)=>(t.namespace&&t.namespace.code&&(e[t.namespace.code]=t.id),e)),{}),si=({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:n,globalConfigOverrides:r})=>({namespaces:o,edgeConfigOverrides:a}={})=>{const i=So({payload:t(o),globalConfigOverrides:r,localConfigOverrides:a}),s=n(i);return e({request:s})},li=({payload:e,datastreamIdOverride:t})=>Po({payload:e,datastreamIdOverride:t,getAction:()=>"identity/acquire",getUseSendBeacon:()=>!1}),ci=e=>{const t={query:{identity:{fetch:e}}};return Do({content:t,addIdentity:_o(t),hasIdentity:Co(t)})};const di=/^([^?#]*)(\??[^#]*)(#?.*)$/,ui=e=>""===e?"?":"?"===e?"":"&";var pi=({dateProvider:e,orgId:t})=>(n,r)=>{const o=Math.round(e().getTime()/1e3),a=encodeURIComponent(`TS=${o}|MCMID=${n}|MCORGID=${encodeURIComponent(t)}`),[,i,s,l]=r.match(di);return`${i}${s}${ui(s)}adobe_mc=${a}${l}`};const mi=Pr({namespaces:yr(Dr(Fa,Qa)).nonEmpty().uniqueItems().default([Fa]),edgeConfigOverrides:Ir}).noUnknownFields().default({namespaces:[Fa]});var gi=({thirdPartyCookiesEnabled:e})=>t=>{const n=mi(t);if(!e&&n.namespaces.includes(Qa))throw new Error(`namespaces: The ${Qa} namespace cannot be requested when third-party cookies are disabled.`);return n};const fi=1,yi=(e,t)=>{let n,r=0,o=0;do{if(t<0||t+o>=e.length)throw new Error("Invalid varint: buffer ended unexpectedly");if(n=e[t+o],r|=(127&n)<<7*o,o+=1,o>10)throw new Error("Invalid varint: too long")}while(128&n);return{value:r,length:o}},hi=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),vi=e=>{let t=0,n=null;for(;t<e.length&&!n;){const{value:r,length:o}=yi(e,t);t+=o;const a=7&r;if(r>>3===fi){if(a===hi.LEN){const r=yi(e,t);return t+=r.length,n=(new TextDecoder).decode(e.slice(t,t+r.value)),t+=r.value,n}}else switch(a){case hi.VARINT:t+=yi(e,t).length;break;case hi.I64:t+=8;break;case hi.LEN:{const n=yi(e,t);t+=n.length+n.value;break}case hi.SGROUP:case hi.EGROUP:break;case hi.I32:t+=4;break;default:throw new Error(`Malformed kndctr cookie. Unknown wire type: ${a}`)}}throw new Error("No ECID found in cookie.")},bi=e=>{const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)))};var Ei=({orgId:e,cookieJar:t,logger:n})=>{const r=bt(e,"identity");return()=>{const e=t.get(r);if(!e)return null;try{const t=decodeURIComponent(e).replace(/_/g,"/").replace(/-/g,"+"),n=bi(t);return vi(n)}catch(e){return n.warn(`Unable to decode ECID from ${r} cookie`,e),null}}};const _i=({config:e,logger:t,consent:n,fireReferrerHideableImage:r,sendEdgeNetworkRequest:o,apexDomain:a,getBrowser:i})=>{const{orgId:s,thirdPartyCookiesEnabled:l,edgeConfigOverrides:c}=e,d=za({logger:t,orgId:s,awaitVisitorOptIn:Ha}),u=fe({logger:t,cookieJar:de}),p=Ka({config:e,getEcidFromVisitor:d,apexDomain:a,cookieJar:u,isPageSsl:"https:"===window.location.protocol}),m=Nt({orgId:s}),g=si({sendEdgeNetworkRequest:o,createIdentityRequestPayload:ci,createIdentityRequest:li,globalConfigOverrides:c}),f=Rt({getBrowser:i}),y=Xa({thirdPartyCookiesEnabled:l,areThirdPartyCookiesSupportedByDefault:f}),h=Za({getLegacyEcid:p.getEcid,addEcidToPayload:oi}),v=ri({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:s,logger:t}),b=ai({doesIdentityCookieExist:m,orgId:s,logger:t}),E=Ja({doesIdentityCookieExist:m,setDomainForInitialIdentityPayload:y,addLegacyEcidToPayload:h,awaitIdentityCookie:b,logger:t}),_=$a({fireReferrerHideableImage:r,logger:t}),P=Wa({processIdSyncs:_}),w=pi({dateProvider:()=>new Date,orgId:s}),D=gi({thirdPartyCookiesEnabled:l}),C=Ya({thirdPartyCookiesEnabled:l,areThirdPartyCookiesSupportedByDefault:f}),I=Ei({orgId:s,cookieJar:u,logger:t});return Ba({addEcidQueryToPayload:C,addQueryStringIdentityToPayload:v,ensureSingleIdentity:E,setLegacyEcid:p.setEcid,handleResponseForIdSyncs:P,getNamespacesFromResponse:ii,getIdentity:g,consent:n,appendIdentityToUrl:w,logger:t,getIdentityOptionsValidator:D,decodeKndctrCookie:I})};_i.namespace="Identity",_i.configValidators=qa;const Pi=({config:e,componentRegistry:t})=>{const n=[...t.getCommandNames(),Zr,eo].sort(),r={...e};Object.keys(e).forEach((t=>{const n=e[t];"function"==typeof n&&(r[t]=n.toString())}));const o=t.getComponentNames();return{version:ba,configs:r,commands:n,components:o}},wi=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:Pi({config:e,componentRegistry:t})})}}});wi.namespace="LibraryInfo";var Di=Object.freeze({__proto__:null,context:Na,dataCollector:Ma,identity:_i,libraryInfo:wi})
;const Ci=Vt(window),{fetch:Ii,navigator:Si}=window,ki=fo(),Ti=yt(window,de),Ri=ho({fetch:Ii}),Oi=lt(),Li=Lo({window:window,createNamespacedStorage:Ci}),xi=At({userAgent:window.navigator.userAgent}),Ni=({instanceName:e,logController:{setDebugEnabled:t,logger:n,createComponentLogger:r},components:o})=>{const a=Nr(),i=Lr(a),s=o.concat(Object.values(Di)),l=e=>{t(e.enabled,{fromConfig:!1})},c=fe({logger:n,cookieJar:de}),d=o=>{const l=lo({options:o,componentCreators:s,coreConfigValidators:ki,createConfig:uo,logger:n,setDebugEnabled:t}),{orgId:d,targetMigrationEnabled:u}=l,p=qo({orgId:d,targetMigrationEnabled:u}),m=Ao({cookieJar:c,shouldTransferCookie:p,apexDomain:Ti,dateProvider:()=>new Date}),g=Le(Si.sendBeacon)?vo({sendBeacon:Si.sendBeacon.bind(Si),sendFetchRequest:Ri,logger:n}):Ri,f=jr({logger:n,sendFetchRequest:Ri,sendBeaconRequest:g,isRequestRetryable:ta,getRequestRetryDelay:sa}),y=Yo({logger:n}),h=Ar({logger:n}),v=Xr({extractEdgeInfo:h}),b=Xo({orgId:d,cookieJar:de}),E=Wo({config:l,lifecycle:i,cookieTransfer:m,sendNetworkRequest:f,createResponse:v,processWarningsAndErrors:y,getLocationHint:b,getAssuranceValidationTokenParams:Li}),_=ca({lifecycle:i,cookieTransfer:m,createResponse:v,processWarningsAndErrors:y}),P=Gr({logger:n}),w=zr({generalConsentState:P,logger:n}),D=No({config:l,logger:n,lifecycle:i,consent:w,createEvent:Jr,createDataCollectionRequestPayload:Io,createDataCollectionRequest:wo,sendEdgeNetworkRequest:E,applyResponse:_});return co({componentCreators:s,lifecycle:i,componentRegistry:a,getImmediatelyAvailableTools(t){const n=r(t);return{config:l,componentRegistry:a,consent:w,eventManager:D,fireReferrerHideableImage:Oi,logger:n,lifecycle:i,sendEdgeNetworkRequest:E,handleError:yo({errorPrefix:`[${e}] [${t}]`,logger:n}),createNamespacedStorage:Ci,apexDomain:Ti,getBrowser:xi}}})},u=yo({errorPrefix:`[${e}]`,logger:n});return to({logger:n,configureCommand:d,setDebugCommand:l,handleError:u,validateCommandOptions:ro})},ji=({eventManager:e,lifecycle:t,handleError:n})=>r=>{if(r.s_fe)return Promise.resolve();const o="composedPath"in r&&r.composedPath().length>0?r.composedPath()[0]:r.target,a=e.createEvent();return a.documentMayUnload(),t.onClick({event:a,clickedElement:o}).then((()=>a.isEmpty()?Promise.resolve():e.sendEvent(a))).then(Gt).catch((e=>{n(e,"click collection")}))};var Ai=({eventManager:e,lifecycle:t,handleError:n})=>{const r=ji({eventManager:e,lifecycle:t,handleError:n});document.addEventListener("click",r,!0)};const Mi="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",Vi=wr().regexp().default(Mi),$i=Pr({clickCollectionEnabled:hr().default(!0),clickCollection:Pr({internalLinkEnabled:hr().default(!0),externalLinkEnabled:hr().default(!0),downloadLinkEnabled:hr().default(!0),sessionStorageEnabled:hr().default(!1),eventGroupingEnabled:hr().default(!1),filterClickProperties:vr()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:Vi,onBeforeLinkClickSend:vr().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')}),qi="cppXYctnr";var Ui=(e=document)=>null!==e.getElementById(qi),Fi=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname},Bi=(e,t)=>Fi(e)!==Fi(t);const Ki=(e,t)=>t&&("download"===t&&!e.downloadLinkEnabled||"exit"===t&&!e.externalLinkEnabled||"other"===t&&!e.internalLinkEnabled);var Hi=({config:e,logger:t,getClickedElementProperties:n,clickActivityStorage:r})=>{const{clickCollectionEnabled:o,clickCollection:a}=e;return o?({event:o,clickedElement:i})=>{const s=n({clickActivityStorage:r,clickedElement:i,config:e,logger:t}),l=s.linkType;Ui()||(s.isValidLink()&&Ki(a,l)?t.info(`Cancelling link click event due to clickCollection.${l}LinkEnabled = false.`):!s.isInternalLink()||!a.eventGroupingEnabled||e.onBeforeLinkClickSend&&!a.filterClickDetails||Bi(window.location.hostname,s.linkUrl)?s.isValidLink()?(o.mergeXdm(s.xdm),o.mergeData(s.data),r.save({pageName:s.pageName,pageIDType:s.pageIDType})):s.isValidActivityMapData()&&r.save(s.properties):r.save(s.properties))}:()=>{}};const Gi=e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}),zi=e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}),Wi=(e,t)=>{const{xdm:n,data:r,clickedElement:o}=e;if(t.clickedElement=o,n&&n.web&&n.web.webInteraction){const{name:e,region:r,type:o,URL:a}=n.web.webInteraction;t.linkName=e,t.linkRegion=r,t.linkType=o,t.linkUrl=a}if(r&&r.__adobe&&r.__adobe.analytics){const{contextData:e}=r.__adobe.analytics;if(e&&e.a&&e.a.activitymap){const{page:n,link:r,region:o,pageIDType:a}=e.a.activitymap;t.pageName=n||t.pageName,t.linkName=r||t.linkName,t.linkRegion=o||t.linkRegion,void 0!==a&&(t.pageIDType=a)}}};var Ji=({properties:e,logger:t}={})=>{let n=e||{};return{get pageName(){return n.pageName},set pageName(e){n.pageName=e},get linkName(){return n.linkName},set linkName(e){n.linkName=e},get linkRegion(){return n.linkRegion},set linkRegion(e){n.linkRegion=e},get linkType(){return n.linkType},set linkType(e){n.linkType=e},get linkUrl(){return n.linkUrl},set linkUrl(e){n.linkUrl=e},get pageIDType(){return n.pageIDType},set pageIDType(e){n.pageIDType=e},get clickedElement(){return n.clickedElement},set clickedElement(e){n.clickedElement=e},get properties(){return{pageName:n.pageName,linkName:n.linkName,linkRegion:n.linkRegion,linkType:n.linkType,linkUrl:n.linkUrl,pageIDType:n.pageIDType}},isValidLink:()=>!!(n.linkUrl&&n.linkType&&n.linkName&&n.linkRegion),isInternalLink(){return this.isValidLink()&&"other"===n.linkType},isValidActivityMapData:()=>!!n.pageName&&!!n.linkName&&!!n.linkRegion&&void 0!==n.pageIDType,get xdm(){return n.filteredXdm?n.filteredXdm:Gi(this)},get data(){return n.filteredData?n.filteredData:zi(this)},applyPropertyFilter(e){e&&!1===e(n)&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),n={})},applyOptionsFilter(e){const r=this.options;if(r&&r.clickedElement&&(r.xdm||r.data)){if(e&&!1===e(r))return t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),void(this.options=void 0);this.options=r,n.filteredXdm=r.xdm,n.filteredData=r.data}},get options(){const e={};if(this.isValidLink()&&(e.xdm=this.xdm),this.isValidActivityMapData()&&(e.data=this.data),this.clickedElement&&(e.clickedElement=this.clickedElement),e.xdm||e.data)return e},set options(e){n={},e&&Wi(e,n)}}},Qi=({clickActivityStorage:e})=>t=>{if(Ui())return;const n=e.load(),r=Ji({properties:n});if(r.isValidLink()||r.isValidActivityMapData()){if(r.isValidLink()){const e=r.xdm;delete e.eventType,t.mergeXdm(e)}r.isValidActivityMapData()&&t.mergeData(r.data),e.save({pageName:r.pageName,pageIDType:r.pageIDType})}},Yi=({window:e,getLinkName:t,getLinkRegion:n,getAbsoluteUrlFromAnchorElement:r,findClickableElement:o,determineLinkType:a})=>({clickedElement:i,config:s,logger:l,clickActivityStorage:c})=>{const{onBeforeLinkClickSend:d,clickCollection:u}=s,{filterClickDetails:p}=u,m=Ji({logger:l});if(i){const l=o(i);if(l){m.clickedElement=i,m.linkUrl=r(e,l),m.linkType=a(e,s,m.linkUrl,l),m.linkRegion=n(l),m.linkName=t(l),m.pageIDType=0,m.pageName=e.location.href;const o=c.load();o&&o.pageName&&(m.pageName=o.pageName,m.pageIDType=1),p?m.applyPropertyFilter(p):d&&m.applyOptionsFilter(d)}}return m};const Xi="clickData";var Zi=({storage:e})=>({save:t=>{const n=JSON.stringify(t);e.setItem(Xi,n)},load:()=>{let t=null;const n=e.getItem(Xi);return n&&(t=JSON.parse(n)),t},remove:()=>{e.removeItem(Xi)}}),es=({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})},ts=(e,t)=>{const{clickCollectionEnabled:n,onBeforeLinkClickSend:r,downloadLinkQualifier:o}=e;!1===n&&(r&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),o&&o!==Mi&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))},ns=e=>e&&e.replace(/\s+/g," ").trim();const rs=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i;var os=e=>!(e&&e.nodeName&&e.nodeName.match(rs));const as=e=>{let t=[],n=!1;return os(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach((e=>{const r=as(e);t=t.concat(r.supportedNodes),n=n||r.includesUnsupportedNodes}))):n=!0,{supportedNodes:t,includesUnsupportedNodes:n}},is=(e,t,n)=>{let r;return n&&n!==e.nodeName.toUpperCase()||(r=e.getAttribute(t)),r},ss=e=>{const t={texts:[]};return e.supportedNodes.forEach((e=>{e.getAttribute&&(t.alt||(t.alt=ns(e.getAttribute("alt"))),t.title||(t.title=ns(e.getAttribute("title"))),t.inputValue||(t.inputValue=ns(is(e,"value","INPUT"))),t.imgSrc||(t.imgSrc=ns(is(e,"src","IMG")))),e.nodeValue&&t.texts.push(e.nodeValue)})),t},ls=/^(HEADER|MAIN|FOOTER|NAV)$/i,cs=e=>{let t;return"region"===e.role&&Ht(e["aria-label"])&&(t=e["aria-label"]),t},ds=e=>{let t;return e&&e.nodeName&&e.nodeName.match(ls)&&(t=e.nodeName),t};var us=e=>!!e&&/^[a-z0-9]+:\/\//i.test(e),ps=e=>!(!e.href||"A"!==e.tagName&&"AREA"!==e.tagName||e.onclick&&e.protocol&&!(e.protocol.toLowerCase().indexOf("javascript")<0)),ms=e=>!!e&&!!e.onclick,gs=e=>{if("INPUT"===e.tagName){const t=e.getAttribute("type");if("submit"===t)return!0;if("image"===t&&e.src)return!0}return!1},fs=e=>"BUTTON"===e.tagName&&"submit"===e.type,ys=e=>{const t=e.indexOf("?"),n=e.indexOf("#");return t>=0&&(t<n||n<0)?e.substring(0,t):n>=0?e.substring(0,n):e},hs=(e,t,n)=>{let r=!1;if(t)if(n&&n.download)r=!0;else if(e){const n=new RegExp(e),o=ys(t).toLowerCase();r=n.test(o)}return r},vs=(e,t)=>{let n=!1;if(t&&e.location.hostname){const r=e.location.hostname.toLowerCase();n=ys(t).toLowerCase().indexOf(r)<0}return n},bs=e=>{const t=e.getContent();return void 0!==t.xdm&&void 0!==t.xdm.web&&void 0!==t.xdm.web.webPageDetails&&void 0!==t.xdm.web.webPageDetails.name},Es=()=>{const e={};return{getItem:t=>e[t],setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}};const _s=Yi({window:window,getLinkName:e=>{let t=ns(e.innerText||e.textContent);const n=as(e);if(!t||n.includesUnsupportedNodes){const e=ss(n);t=ns(e.texts.join("")),t||(t=e.alt||e.title||e.inputValue||e.imgSrc)}return t||""},getLinkRegion:e=>{let t,n=e.parentNode;for(;n;){if(t=ns(n.id||cs(n)||ds(n)),t)return t;n=n.parentNode}return"BODY"},getAbsoluteUrlFromAnchorElement:(e,t)=>{const n=e.location;let r=t.href||"";"string"!=typeof r&&(r="");let{protocol:o,host:a}=t;if(r&&!us(r)){o||(o=n.protocol?n.protocol:""),o=o?`${o}//`:"",a||(a=n.host?n.host:"");let e="";if("/"!==r.substring(0,1)){let t=n.pathname.lastIndexOf("/");t=t<0?0:t,e=n.pathname.substring(0,t)}r=`${o}${a}${e}/${r}`}return r},findClickableElement:e=>{let t=e;for(;t;){if(ps(t)||ms(t)||gs(t)||fs(t))return t;t=t.parentNode}return null},determineLinkType:(e,t,n,r)=>{let o="other";return Ht(n)&&(hs(t.downloadLinkQualifier,n,r)?o="download":vs(e,n)&&(o="exit")),o}});let Ps;const ws=e=>{if(!Ps){const t=Vt(window)(e.orgId||""),n=Es(),r=e.clickCollection.sessionStorageEnabled?t.session:n;Ps=Zi({storage:r})}},Ds=({config:e,eventManager:t,handleError:n,logger:r})=>{ts(e,r);const o=e.clickCollection;Ps||ws(e);const a=Hi({config:e,logger:r,clickActivityStorage:Ps,getClickedElementProperties:_s}),i=Qi({clickActivityStorage:Ps}),s=es({clickActivityStorage:Ps});return{lifecycle:{onComponentsRegistered(e){const{lifecycle:r}=e;Ai({eventManager:t,lifecycle:r,handleError:n})},onClick({event:e,clickedElement:t}){a({event:e,clickedElement:t})},onBeforeEvent({event:e}){bs(e)&&(o.eventGroupingEnabled&&i(e),s(e,r,Ps))}}}};Ds.namespace="ActivityCollector",Ds.configValidators=$i,Ds.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(Ps||ws(e),{getLinkDetails:n=>_s({clickActivityStorage:Ps,clickedElement:n,config:e,logger:t}).properties});const Cs=e=>`URL destination succeeded: ${e.spec.url}`;var Is=({fireReferrerHideableImage:e,logger:t,cookieJar:n,isPageSsl:r})=>{const o=r?{sameSite:"none",secure:!0}:{},a=e=>{e.filter((e=>"cookie"===e.type)).forEach((e=>{const{name:t,value:r,domain:a,ttlDays:i}=e.spec;n.set(t,r||"",{domain:a||"",expires:i||10,...o})}))},i=n=>{const r=n.filter((e=>"url"===e.type));return Promise.all(r.map((n=>e(n.spec).then((()=>{t.info(Cs(n))})).catch((()=>{}))))).then(Gt)};return e=>(a(e),i(e))},Ss=({processDestinations:e})=>{const t=({response:t})=>{const n=t.getPayloadsByType("activation:push");return e(n)},n=({response:e})=>({destinations:e.getPayloadsByType("activation:pull")});return({response:e})=>t({response:e}).then((()=>n({response:e})))};const ks=({logger:e,fireReferrerHideableImage:t})=>{const n=de.withConverter({write:e=>encodeURIComponent(e)}),r=fe({logger:e,cookieJar:n}),o=Is({fireReferrerHideableImage:t,logger:e,cookieJar:r,isPageSsl:"https:"===window.location.protocol});return{lifecycle:{onResponse:Ss({processDestinations:o})},commands:{}}};ks.namespace="Audiences";var Ts=({storedConsent:e,taskQueue:t,defaultConsent:n,consent:r,sendSetConsentRequest:o,validateSetConsentOptions:a,consentHashStore:i,doesIdentityCookieExist:s})=>{const l={[qr]:n};let c=e.read();const d=s(),u=void 0!==c[qr];d&&u||i.clear(),d||(e.clear(),c={}),r.initializeConsent(l,c);const p=()=>{if(0===t.length){const t=e.read();void 0!==t[qr]&&r.setConsent(t)}};return{commands:{setConsent:{optionsValidator:a,run:({consent:e,identityMap:n,edgeConfigOverrides:a})=>{r.suspend();const s=i.lookup(e);return t.addTask((()=>s.isNew()?o({consentOptions:e,identityMap:n,edgeConfigOverrides:a}):Promise.resolve())).then((()=>s.save())).finally(p)}}},lifecycle:{onResponse:p,onRequestFailure:p}}},Rs=e=>pt(JSON.stringify(Xt(e)));const Os=({standard:e,version:t})=>`${e}.${t}`;var Ls=({storage:e})=>({clear(){e.clear()},lookup(t){const n={},r=e=>{const t=Os(e),{standard:r,version:o,...a}=e;return n[t]||(n[t]=Rs(a).toString()),n[t]};return{isNew:()=>t.some((t=>{const n=Os(t),o=e.getItem(n);return null===o||o!==r(t)})),save(){t.forEach((t=>{const n=Os(t);e.setItem(n,r(t))}))}}}}),xs=()=>{const e={},t=Do({content:e,addIdentity:(t,n)=>{e.identityMap=e.identityMap||{},e.identityMap[t]=e.identityMap[t]||[],e.identityMap[t].push(n)},hasIdentity:t=>void 0!==(e.identityMap&&e.identityMap[t])});return t.setConsent=t=>{e.consent=t},t},Ns=({payload:e,datastreamIdOverride:t})=>Po({payload:e,datastreamIdOverride:t,getAction:()=>"privacy/set-consent",getUseSendBeacon:()=>!1}),js=({parseConsentCookie:e,orgId:t,cookieJar:n})=>{const r=bt(t,Lt);return{read(){const t=n.get(r);return t?e(t):{}},clear(){n.remove(r)}}},As=({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:n,edgeConfigOverrides:r})=>({consentOptions:o,identityMap:a,edgeConfigOverrides:i})=>{const s=So({payload:e(),globalConfigOverrides:r,localConfigOverrides:i});s.payload.setConsent(o),se(a)&&Object.keys(a).forEach((e=>{a[e].forEach((t=>{s.payload.addIdentity(e,t)}))}));const l=t(s);return n({request:l}).then((()=>{}))},Ms=e=>e.split(";").reduce(((e,t)=>{const[n,r]=t.split("=");return e[n]=r,e}),{}),Vs=Pr({consent:yr(fr()).required().nonEmpty(),identityMap:Cr,edgeConfigOverrides:Ir}).noUnknownFields().required(),$s=Pr({defaultConsent:Dr(Mr,Vr,$r).default(Mr)});const qs=({config:e,consent:t,sendEdgeNetworkRequest:n,createNamespacedStorage:r})=>{const{orgId:o,defaultConsent:a}=e,i=js({parseConsentCookie:Ms,orgId:o,cookieJar:de}),s=ye(),l=As({createConsentRequestPayload:xs,createConsentRequest:Ns,sendEdgeNetworkRequest:n,edgeConfigOverrides:e.edgeConfigOverrides}),c=r(`${vt(o)}.consentHashes.`),d=Ls({storage:c.persistent}),u=Nt({orgId:o});return Ts({storedConsent:i,taskQueue:s,defaultConsent:a,consent:t,sendSetConsentRequest:l,validateSetConsentOptions:Vs,consentHashStore:d,doesIdentityCookieExist:u})};qs.namespace="Consent",qs.configValidators=$s;var Us=()=>({eventMergeId:l()});t.createEventMergeId=Us;var Fs=({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}});const Bs=()=>Fs({createEventMergeId:Us});Bs.namespace="EventMerge";var Ks={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"},Hs=({mediaRequestPayload:e,action:t})=>Po({payload:e,edgeSubPath:"/va",getAction:()=>t,getUseSendBeacon:()=>!1}),Gs=({config:e,eventManager:t,consent:n,sendEdgeNetworkRequest:r,setTimestamp:o})=>({createMediaEvent({options:n}){const r=t.createEvent(),{xdm:a}=n;if(o(a),r.setUserXdm(a),a.eventType===Ks.AD_START){const{advertisingDetails:t}=n.xdm.mediaCollection;r.mergeXdm({mediaCollection:{advertisingDetails:{playerName:t.playerName||e.streamingMedia.playerName}}})}return r},createMediaSession(n){const{playerName:r,channel:o,appVersion:a}=e.streamingMedia,i=t.createEvent(),{sessionDetails:s}=n.xdm.mediaCollection;return i.setUserXdm(n.xdm),i.mergeXdm({eventType:Ks.SESSION_START,mediaCollection:{sessionDetails:{playerName:s.playerName||r,channel:s.channel||o,appVersion:s.appVersion||a}}}),i},augmentMediaEvent({event:e,playerId:t,getPlayerDetails:n,sessionID:r}){if(!t||!n)return e;const{playhead:o,qoeDataDetails:a}=n({playerId:t});return e.mergeXdm({mediaCollection:{playhead:rn(o),qoeDataDetails:a,sessionID:r}}),e},trackMediaSession({event:e,mediaOptions:n,edgeConfigOverrides:r}){const o={mediaOptions:n,edgeConfigOverrides:r};return t.sendEvent(e,o)},trackMediaEvent({event:e,action:t}){const o=Io(),a=Hs({mediaRequestPayload:o,action:t});return o.addEvent(e),e.finalize(),n.awaitConsent().then((()=>r({request:a}).then((()=>({})))))}}),zs={MAIN:"main",COMPLETED:"completed"},Ws=()=>{let e;return{getSession:t=>e[t]||{},storeSession:({playerId:t,sessionDetails:n})=>{void 0===e&&(e={}),e[t]=n},stopPing:({playerId:t})=>{const n=e[t];n&&(clearTimeout(n.pingId),n.pingId=null,n.playbackState=zs.COMPLETED)},savePing:({playerId:t,pingId:n,playbackState:r})=>{e[t]&&(e[t].pingId&&clearTimeout(e[t].pingId),e[t].pingId=n,e[t].playbackState=r)}}};const Js=(e,t)=>e===Ks.AD_START||e===Ks.Ad_BREAK_START||e===Ks.AD_SKIP||e===Ks.AD_COMPLETE?"ad":e===Ks.AD_BREAK_COMPLETE||e===Ks.CHAPTER_COMPLETE||e===Ks.CHAPTER_START||e===Ks.CHAPTER_SKIP||e===Ks.SESSION_START?"main":e===Ks.SESSION_END||e===Ks.SESSION_COMPLETE?"completed":t;var Qs=({mediaEventManager:e,mediaSessionCacheManager:t,config:n})=>{const r=o=>{const a=e.createMediaEvent({options:o}),{playerId:i,xdm:s}=o,{eventType:l}=s,c=l.split(".")[1],{getPlayerDetails:d,sessionPromise:u,playbackState:p}=t.getSession(i);return u.then((o=>o.sessionId?(e.augmentMediaEvent({event:a,eventType:l,playerId:i,getPlayerDetails:d,sessionID:o.sessionId}),e.trackMediaEvent({event:a,action:c}).then((()=>{if(i)if(l===Ks.SESSION_COMPLETE||l===Ks.SESSION_END)t.stopPing({playerId:i});else{const e=Js(l,p);if("completed"===e)return;const o="ad"===e?n.streamingMedia.adPingInterval:n.streamingMedia.mainPingInterval,a=setTimeout((()=>{const e={playerId:i,xdm:{eventType:Ks.PING}};r(e)}),1e3*o);t.savePing({playerId:i,pingId:a,playbackState:e})}}))):Promise.reject(new Error(`Failed to trigger media event: ${l}. Session ID is not available for playerId: ${i}.`))))};return e=>r(e)},Ys=({config:e,mediaEventManager:t,mediaSessionCacheManager:n,legacy:r=!1})=>o=>{if(!e.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));const{playerId:a,getPlayerDetails:i,edgeConfigOverrides:s}=o,l=t.createMediaSession(o);t.augmentMediaEvent({event:l,playerId:a,getPlayerDetails:i});const c=t.trackMediaSession({event:l,mediaOptions:{playerId:a,getPlayerDetails:i,legacy:r},edgeConfigOverrides:s});return n.storeSession({playerId:a,sessionDetails:{sessionPromise:c,getPlayerDetails:i,playbackState:zs.MAIN}}),c},Xs=e=>!Kt(e)||!e.trim(),Zs=({mediaSessionCacheManager:e,config:t,trackMediaEvent:n})=>({response:r,playerId:o,getPlayerDetails:a})=>{const i=r.getPayloadsByType("media-analytics:new-session");if(xe(i)){const{sessionId:r}=i[0];if(Xs(r))return{};if(!o||!a)return{sessionId:r};const s=setTimeout((()=>{n({playerId:o,xdm:{eventType:Ks.PING}})}),1e3*t.streamingMedia.mainPingInterval);return e.savePing({playerId:o,pingId:s,playbackState:zs.MAIN}),{sessionId:r}}return{}};const el={Video:"video",Audio:"audio"},tl={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},nl={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},rl={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},ol={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},al={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},il={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},sl={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},ll={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"};var cl=({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:n,logger:r,createMediaHelper:o,createGetInstance:a,config:i})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Gt}){if(!e)return;const{legacy:r,playerId:o,getPlayerDetails:a}=e;r&&t((({response:e})=>n({playerId:o,getPlayerDetails:a,response:e})))}},commands:{getMediaAnalyticsTracker:{run:()=>{if(!i.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));r.info("Streaming media is configured in legacy mode.");const n=o({logger:r});return Promise.resolve({getInstance:()=>a({logger:r,trackMediaEvent:e,trackMediaSession:t,uuid:l}),Event:rl,MediaType:el,PlayerState:nl,StreamType:tl,MediaObjectKey:al,VideoMetadataKeys:il,AudioMetadataKeys:sl,AdMetadataKeys:ll,...n})}}}}),dl=({logger:e})=>{const t=(t,n,r)=>{const o={friendlyName:t,offset:n,index:r},a=Pr({friendlyName:wr().nonEmpty(),offset:Er(),index:Er()});try{const e=a(o);return{advertisingPodDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index}}}catch(t){return e.warn("An error occurred while creating the Ad Break Object.",t),{}}},n=(t,n,r,o)=>{const a={friendlyName:t,name:n,podPosition:r,length:o},i=Pr({friendlyName:wr().nonEmpty(),name:wr().nonEmpty(),podPosition:Er(),length:Er()});try{const e=i(a);return{advertisingDetails:{friendlyName:e.friendlyName,name:e.name,podPosition:e.podPosition,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Advertising Object.",t),{}}},r=(t,n,r,o)=>{const a={friendlyName:t,offset:n,length:r,index:o},i=Pr({friendlyName:wr().nonEmpty(),offset:Er(),length:Er(),index:Er()});try{const e=i(a);return{chapterDetails:{friendlyName:e.friendlyName,offset:e.offset,index:e.index,length:e.length}}}catch(t){return e.warn("An error occurred while creating the Chapter Object.",t),{}}},o=t=>{const n=/^[a-zA-Z0-9_]{1,64}$/,r=wr().matches(n,"This is not a valid state name.");try{return{name:r(t)}}catch(t){return e.warn("An error occurred while creating the State Object.",t),{}}},a=(t,n,r,o)=>{const a={bitrate:t,droppedFrames:n,fps:r,startupTime:o},i=Pr({bitrate:Er(),droppedFrames:Er(),fps:Er(),startupTime:Er()});try{const e=i(a);return{bitrate:e.bitrate,droppedFrames:e.droppedFrames,framesPerSecond:e.fps,timeToStart:e.startupTime}}catch(t){return e.warn("An error occurred while creating the QOE Object.",t),{}}};return{createMediaObject:(t,n,r,o,a)=>{const i={friendlyName:t,name:n,length:r,streamType:a,contentType:o},s=Pr({friendlyName:wr().nonEmpty(),name:wr().nonEmpty(),length:Er().required(),streamType:wr().nonEmpty(),contentType:wr().nonEmpty()});try{const e=s(i);return{sessionDetails:{name:e.name,friendlyName:e.friendlyName,length:e.length,streamType:e.streamType,contentType:e.contentType}}}catch(t){return e.warn("An error occurred while creating the Media Object.",t),{}}},createAdBreakObject:t,createAdObject:n,createChapterObject:r,createStateObject:o,createQoEObject:a}};const ul={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},pl={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"};var ml=({logger:e,trackMediaSession:t,trackMediaEvent:n,uuid:r})=>{let o=null;const a=()=>{o={qoe:null,lastPlayhead:0,playerId:r()}},i=({eventType:e})=>e===rl.BufferComplete||e===rl.SeekComplete?ol.Play:e===rl.StateStart||e===rl.StateEnd?ol.StateUpdate:e===rl.SeekStart?ol.Pause:e,s=({eventType:e,mediaDetails:t={},contextData:n=[]})=>{const r=i({eventType:e});if(e===rl.StateStart)return{eventType:`media.${r}`,mediaCollection:{statesStart:[t]}};if(e===rl.StateEnd)return{eventType:`media.${r}`,mediaCollection:{statesEnd:[t]}};const o={eventType:`media.${r}`,mediaCollection:{...t}},a=[];return Object.keys(n).forEach((e=>{ul[e]?o.mediaCollection.sessionDetails[ul[e]]=n[e]:pl[e]?o.mediaCollection.advertisingDetails[pl[e]]=n[e]:a.push({name:e,value:n[e]})})),xe(a)&&(o.mediaCollection.customMetadata=a),o};return{trackSessionStart:(n,r={})=>{if(ie(n)||ct(n))return e.warn("Invalid media object"),{};null===o&&(e.warn("The Media Session was completed. Restarting a new session."),a());const i=s({eventType:ol.SessionStart,mediaDetails:n,contextData:r});return t({playerId:o.playerId,getPlayerDetails:()=>({playhead:o.lastPlayhead,qoeDataDetails:o.qoe}),xdm:i})},trackPlay:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ol.Play});return n({playerId:o.playerId,xdm:t})},trackPause:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ol.Pause});return n({playerId:o.playerId,xdm:t})},trackSessionEnd:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ol.SessionEnd});return n({playerId:o.playerId,xdm:t})},trackComplete:()=>{if(null===o)return e.warn("The Media Session was completed."),{};const t=s({eventType:ol.SessionComplete});return n({playerId:o.playerId,xdm:t})},trackError:t=>{if(e.warn(`trackError(${t})`),null===o)return e.warn("The Media Session was completed."),{};const r={name:t,source:"player"},a=s({eventType:ol.Error,mediaDetails:{errorDetails:r}});return n({playerId:o.playerId,xdm:a})},trackEvent:(t,r,a)=>{if(ct(r))return e.warn("Invalid media object."),{};if(null===o)return e.warn("The Media Session was completed."),{};if(!Object.values(rl).includes(t))return e.warn("Invalid event type"),{};const i=s({eventType:t,mediaDetails:r,contextData:a});return n({playerId:o.playerId,xdm:i})},updatePlayhead:t=>{null!==o?Ut(t)&&(o.lastPlayhead=parseInt(t,10)):e.warn("The Media Session was completed.")},updateQoEObject:t=>{null!==o?t&&(o.qoe=t):e.warn("The Media Session was completed.")},destroy:()=>{e.warn("Destroy called, destroying the tracker."),o=null}}};const gl=({eventManager:e,sendEdgeNetworkRequest:t,config:n,logger:r,consent:o})=>{const a=Ws(),i=Gs({sendEdgeNetworkRequest:t,config:n,consent:o,eventManager:e,setTimestamp:ha((()=>new Date))}),s=Qs({mediaSessionCacheManager:a,mediaEventManager:i,config:n}),l=Ys({config:n,mediaEventManager:i,mediaSessionCacheManager:a,legacy:!0}),c=Zs({mediaSessionCacheManager:a,config:n,trackMediaEvent:s});return cl({mediaResponseHandler:c,trackMediaSession:l,trackMediaEvent:s,createMediaHelper:dl,createGetInstance:ml,logger:r,config:n})};gl.namespace="Legacy Media Analytics";const fl="web",yl="webapp",hl="://",vl="#",bl=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,El=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,_l=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,Pl=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,wl=(e="/")=>{let t=e.length;for(;t>0&&-1!=="/".indexOf(e.charAt(t-1));)t-=1;return e.substring(0,t)||"/"},Dl=e=>Ht(e)?e.toLowerCase():"",Cl=e=>Ht(e)?e.toLowerCase():"",Il=e=>Ht(e)?wl(e):"/",Sl=e=>{const t=e.match(bl);return t?{surfaceType:Dl(t[1]),authority:Cl(t[2]),path:Il(t[3]),fragment:t[4]}:null},kl=e=>`${e.surfaceType}${hl}${e.authority}${e.path||""}${e.fragment||""}`,Tl=e=>{const t=e(),n=t.host.toLowerCase(),r=t.pathname;return fl+hl+n+wl(r)},Rl=(e,t)=>e.startsWith(vl)?Tl(t)+e:e,Ol=(e,t,n)=>{const r=e=>(n.warn(e),null);if(!Ht(e))return r(`Invalid surface: ${e}`);const o=Rl(e,t),a=Sl(o);return null===a?r(`Invalid surface: ${e}`):[fl,yl].includes(a.surfaceType)?a.authority&&El.test(a.authority)?a.path&&!_l.test(a.path)?r(`Invalid path ${a.path} in surface: ${e}`):a.fragment&&!Pl.test(a.fragment)?r(`Invalid fragment ${a.fragment} in surface: ${e}`):a:r(`Invalid authority ${a.authority} in surface: ${e}`):r(`Unsupported surface type ${a.surfaceType} in surface: ${e}`)},Ll=e=>!!e&&0===e.indexOf(fl+hl)&&-1===e.indexOf(vl),xl=(e=[],t,n)=>e.map((e=>Ol(e,t,n))).filter((e=>!ie(e))).map(kl),Nl="https://ns.adobe.com/personalization/default-content-item",jl="https://ns.adobe.com/personalization/dom-action",Al="https://ns.adobe.com/personalization/html-content-item",Ml="https://ns.adobe.com/personalization/json-content-item",Vl="https://ns.adobe.com/personalization/ruleset-item",$l="https://ns.adobe.com/personalization/redirect-item",ql="https://ns.adobe.com/personalization/message/in-app",Ul="https://ns.adobe.com/personalization/message/content-card",Fl=e=>{e.includes(Eo)||e.push(Eo)},Bl=(e,t)=>{const n=Tl(t);e.includes(n)||e.push(n)},Kl=e=>e.filter(((t,n)=>e.indexOf(t)===n));var Hl=({getPageLocation:e,renderDecisions:t,decisionScopes:n,personalization:r,event:o,isCacheInitialized:a,logger:i})=>{const s=o.getViewName();return{isRenderDecisions:()=>t,isSendDisplayEvent:()=>!!r.sendDisplayEvent,shouldIncludeRenderedPropositions:()=>!!r.includeRenderedPropositions,getViewName:()=>s,hasScopes:()=>n.length>0||xe(r.decisionScopes),hasSurfaces:()=>xe(r.surfaces),hasViewName:()=>Ht(s),createQueryDetails(){const t=[...n];xe(r.decisionScopes)&&t.push(...r.decisionScopes);const o=xl(r.surfaces,e,i);this.shouldRequestDefaultPersonalization()&&(Fl(t),Bl(o,e));const a=[Nl,Al,Ml,$l,Vl,ql,Ul];return t.includes(Eo)&&a.push(jl),{schemas:a,decisionScopes:Kl(t),surfaces:Kl(o)}},isCacheInitialized:()=>a,shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return r.defaultPersonalizationEnabled||!this.isCacheInitialized()&&!1!==r.defaultPersonalizationEnabled}}};const Gl="Rendering is disabled for authoring mode.",zl="decisioning.propositionDisplay",Wl="decisioning.propositionInteract",Jl="decisioning.propositionTrigger",Ql="decisioning.propositionDismiss",Yl="decisioning.propositionSuppressDisplay",Xl=1,Zl={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",
SUPPRESS:"suppressDisplay"},ec={[zl]:Zl.DISPLAY,[Wl]:Zl.INTERACT,[Jl]:Zl.TRIGGER,[Ql]:Zl.DISMISS,[Yl]:Zl.SUPPRESS},tc={[Zl.DISPLAY]:zl,[Zl.INTERACT]:Wl,[Zl.TRIGGER]:Jl,[Zl.DISMISS]:Ql,[Zl.SUPPRESS]:Yl},nc=e=>ec[e],rc=e=>tc[e],oc={propositions:[]};var ac=({logger:e,options:t})=>{const n=Pr({propositions:yr(Pr({id:wr().required(),scope:wr().required(),scopeDetails:Pr({decisionProvider:wr().required()}).required(),items:yr(Pr({id:wr().required(),schema:wr().required(),data:Pr(fr())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:Pr(fr()),viewName:wr()}).required();try{return n(t)}catch(t){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",t),oc}},ic=({getPageLocation:e,logger:t,fetchDataHandler:n,viewChangeHandler:r,onClickHandler:o,isAuthoringModeEnabled:a,mergeQuery:i,viewCache:s,showContainers:l,applyPropositions:c,setTargetMigration:d,mergeDecisionsMeta:u,renderedPropositions:p,onDecisionHandler:m,handleConsentFlicker:g})=>({lifecycle:{onComponentsRegistered(){g()},onDecision:m,onBeforeRequest:({request:e})=>(d(e),Promise.resolve()),onBeforeEvent({event:o,renderDecisions:c,decisionScopes:d=[],personalization:m={},onResponse:g=Gt,onRequestFailure:f=Gt}){if(g((()=>({propositions:[]}))),f((()=>l())),a())return t.warn(Gl),i(o,{enabled:!1}),Promise.resolve();const y=Hl({getPageLocation:e,renderDecisions:c,decisionScopes:d,personalization:m,event:o,isCacheInitialized:s.isInitialized(),logger:t}),h=[];if(y.shouldIncludeRenderedPropositions()&&h.push(p.clear()),y.shouldFetchData()){const e=s.createCacheUpdate(y.getViewName());f((()=>e.cancel())),n({cacheUpdate:e,personalizationDetails:y,event:o,onResponse:g})}else y.shouldUseCachedData()&&h.push(r({personalizationDetails:y,event:o,onResponse:g,onRequestFailure:f}));return Promise.all(h).then((e=>{const t=e.flatMap((e=>e));xe(t)&&u(o,t,[Zl.DISPLAY])}))},onClick({event:e,clickedElement:t}){o({event:e,clickedElement:t})}},commands:{applyPropositions:{optionsValidator:e=>ac({logger:t,options:e}),run:c}}}),sc=(e="undefined")=>we(Se,{},{innerHTML:e});const lc=":eq(",cc=/:eq\((\d+)\)/g,dc=e=>-1===e.indexOf(lc),uc=e=>e.split(cc).filter(Ht),pc=/(#|\.)(-?\w+)/g,mc=(e,t,n)=>`${t}${CSS.escape(n)}`,gc=e=>e.replace(pc,mc),fc=e=>{const t=[],n=gc(e.trim()),r=uc(n),{length:o}=r;let a=0;for(;a<o;){const e=r[a],n=r[a+1];n?t.push({sel:e,eq:Number(n)}):t.push({sel:e}),a+=2}return t},yc=e=>{const t=document;if(dc(e))return Fe(e,t);const n=fc(e),{length:r}=n;let o=[],a=t,i=0;for(;i<r;){const{sel:e,eq:t}=n[i],s=Fe(e,a),{length:l}=s;if(0===l)break;if(null!=t&&t>l-1)break;i<r-1&&(null==t?[a]=s:a=s[t]),i===r-1&&(o=null==t?s:[s[t]]),i+=1}return o};var hc=(e,t=document)=>t.getElementById(e),vc=(e,t,n)=>{e.setAttribute(t,n)},bc=(e,t)=>e.getAttribute(t),Ec=(e,t)=>{e.removeAttribute(t)},_c=(e,t,n,r)=>{let o;o=r?`${t}:${n} !${r};`:`${t}:${n};`,e.style.cssText+=`;${o}`},Pc=e=>e.parentNode,wc=e=>e.nextElementSibling,Dc=(e,t)=>{if(!e)return;const n=Pc(e);n&&n.insertBefore(t,wc(e))},Cc=(e,t)=>{if(!e)return;const n=Pc(e);n&&n.insertBefore(t,e)},Ic=e=>{const{children:t}=e;return t?Ne(t):[]},Sc=e=>{const{childNodes:t}=e;return t?Ne(t):[]},kc=e=>e.firstElementChild;let Tc;var Rc=(e=document)=>{if(void 0===Tc){const t=e.querySelector("[nonce]");Tc=t&&(t.nonce||t.getAttribute("nonce"))}return Tc};const Oc="src",Lc=e=>e.tagName===Ie,xc=e=>we(Ie,{src:e}),Nc=e=>{Fe(Ie,e).forEach((e=>{const t=bc(e,Oc);t&&xc(t)}))},jc=(e,t)=>e.tagName===t,Ac=e=>jc(e,ke)&&!bc(e,Oc);var Mc=e=>{const t=Fe(ke,e),{length:n}=t,r=Rc();if(r)for(let e=0;e<n;e+=1){const n=t[e];Ac(n)&&(n.nonce=r)}};const Vc=(e,t)=>new Promise(((n,r)=>{t.onload=()=>{n(t)},t.onerror=()=>{r(new Error(`Failed to load script: ${e}`))}})),$c=e=>{const t=document.createElement("script");t.src=e,t.async=!0;const n=Vc(e,t);return document.head.appendChild(t),n},qc=(e,t)=>!!e&&e.tagName===t,Uc=e=>qc(e,Te)&&!bc(e,Oc),Fc=e=>qc(e,Te)&&bc(e,Oc),Bc=e=>{const t=Fe(Te,e),n=[],{length:r}=t,o=Rc(),a={...o&&{nonce:o}};for(let e=0;e<r;e+=1){const r=t[e];if(!Uc(r))continue;const{textContent:o}=r;o&&n.push(we(Te,a,{textContent:o}))}return n},Kc=e=>{const t=Fe(Te,e),n=[],{length:r}=t;for(let e=0;e<r;e+=1){const r=t[e];if(!Fc(r))continue;const o=bc(r,Oc);o&&n.push(o)}return n},Hc=(e,t)=>{t.forEach((t=>{e.appendChild(t),e.removeChild(t)}))},Gc=e=>Promise.all(e.map($c));var zc=(e,t,n)=>{const r=sc(t);Mc(r);const o=Sc(r),a=Bc(r),i=Kc(r);return Nc(r),o.forEach((t=>{_e(e,t)})),n(e),Hc(e,a),Gc(i)};const Wc=e=>{Sc(e).forEach(at)};var Jc=(e,t,n)=>(Wc(e),zc(e,t,n)),Qc=(e,t,n)=>{const r=sc(t);Mc(r);const o=Sc(r),a=Bc(r),i=Kc(r),{length:s}=o;let l=s-1;for(Nc(r);l>=0;){const t=o[l];n(t);const r=kc(e);r?Cc(r,t):_e(e,t),l-=1}return Hc(e,a),Gc(i)};const Yc="alloy-prehiding",Xc="{ visibility: hidden }",Zc={},ed=e=>{if(Zc[e])return;const t=Rc(),n={...t&&{nonce:t}},r=we(ke,n,{textContent:`${e} ${Xc}`});_e(document.head,r),Zc[e]=r},td=e=>{const t=Zc[e];t&&(at(t),delete Zc[e])},nd=e=>t=>{if(!t)return;if(hc(Yc))return;const n=Rc(),r={id:Yc,...n&&{nonce:n}},o=we(ke,r,{textContent:t});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),_e(document.head,o)},rd=e=>()=>{const t=hc(Yc);t&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),at(t))};var od=(e,t,n)=>{n(e),e.textContent=t},ad=(e,t,n)=>{const r=sc(t);Mc(r);const o=Sc(r),a=Bc(r),i=Kc(r);return Nc(r),o.forEach((t=>{n(t),Cc(e,t)})),Hc(e,a),Gc(i)},id=(e,t,n)=>ad(e,t,n).then((()=>{at(e)})),sd=(e,t,n)=>{const r=sc(t);Mc(r);const o=Sc(r),a=Bc(r),i=Kc(r);Nc(r);let s=e;return o.forEach((e=>{n(e),Dc(s,e),s=e})),Hc(e,a),Gc(i)},ld=(e,t,n)=>{const{priority:r,...o}=t;Object.keys(o).forEach((t=>{_c(e,t,o[t],r)})),n(e)},cd=(e,t,n)=>{Object.keys(t).forEach((n=>{vc(e,n,t[n])})),n(e)},dd=(e,t,n)=>{Lc(e)&&(xc(t),n(e),Ec(e,Oc),vc(e,Oc,t))},ud=(e,{from:t,to:n},r)=>{const o=Ic(e),a=o[t],i=o[n];a&&i&&(t<n?Dc(i,a):Cc(i,a),r(i),r(a))};const pd=({containers:e,content:t,decorateProposition:n,renderFunc:r,renderStatusHandler:o})=>{const a=e.filter(o.shouldRender).map((async e=>{await r(e,t,n),o.markAsRendered(e)}));return Promise.all(a)},md=e=>async(t,n,r)=>{const{selector:o,prehidingSelector:a,content:i}=t;ed(a);try{const t=await rt(o,yc);pd({containers:t,content:i,decorateProposition:n,renderFunc:e,renderStatusHandler:r})}finally{td(a)}},gd=e=>`${e}`.endsWith("px")?e:`${e}px`;var fd=(e,t,n)=>{const{priority:r,...o}=t;Object.keys(o).forEach((t=>{let n=o[t];"left"!==t&&"top"!==t||(n=gd(n)),_c(e,t,n,r)})),n(e)},yd=(e,t,n)=>{n(e)},hd=(e,t,n)=>{const{priority:r,...o}=t;Object.keys(o).forEach((t=>{let n=o[t];"width"!==t&&"height"!==t||(n=gd(n)),_c(e,t,n,r)})),n(e)};const vd="setHtml",bd="customCode",Ed="setText",_d="setAttribute",Pd="setImageSource",wd="setStyle",Dd="move",Cd="resize",Id="rearrange",Sd="remove",kd="insertAfter",Td="insertBefore",Rd="replaceHtml",Od="prependHtml",Ld="appendHtml",xd="click",Nd="collectInteractions";var jd=()=>({[vd]:md(Jc),[bd]:md(Qc),[Ed]:md(od),[_d]:md(cd),[Pd]:md(dd),[wd]:md(ld),[Dd]:md(fd),[Cd]:md(hd),[Id]:md(ud),[Sd]:md(at),[kd]:md(sd),[Td]:md(ad),[Rd]:md(id),[Od]:md(Qc),[Ld]:md(zc),[Nd]:md(yd)}),Ad=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:n=[],propositionAction:r,documentMayUnload:o=!1,eventType:a=zl,propositionEventTypes:i=[nc(a)],viewName:s})=>{const l=e.createEvent(),c={eventType:a};return s&&(c.web={webPageDetails:{viewName:s}}),xe(n)&&t(l,n,i,r),l.mergeXdm(c),o&&l.documentMayUnload(),e.sendEvent(l)};const Md="personalization:decisions";var Vd=({logger:e,prehidingStyle:t,showContainers:n,hideContainers:r,mergeQuery:o,processPropositions:a,createProposition:i,notificationHandler:s,consent:l})=>({cacheUpdate:c,personalizationDetails:d,event:u,onResponse:p})=>{const{state:m,wasSet:g}=l.current();"out"===m&&g||(d.isRenderDecisions()?r(t):n()),o(u,d.createQueryDetails());const f=s(d.isRenderDecisions(),d.isSendDisplayEvent(),d.getViewName());p((({response:t})=>{const r=t.getPayloadsByType(Md);xe(r)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:d.createQueryDetails()}});const o=r.map((e=>i(e))),{page:s=[],view:l=[],proposition:u=[]}=Et(o,(e=>e.getScopeType())),p=c.update(l);let m,g,y;return d.isRenderDecisions()?(({render:m,returnedPropositions:g,returnedDecisions:y}=a([...s,...p],u)),xe(s)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:Eo,propositions:s.map((e=>e.toJSON()))}}),xe(p)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${d.getViewName()}.`,logLevel:"info",detail:{scope:d.getViewName(),propositions:p.map((e=>e.toJSON()))}}),m().then(f),n()):({returnedPropositions:g,returnedDecisions:y}=a([],[...s,...p,...u])),{propositions:g,decisions:y}}))},$d=(e,t)=>{if(dc(e))return ot(e,t);const n=yc(e);let r=!1;for(let e=0;e<n.length;e+=1)if(n[e]===t){r=!0;break}return r};const qd="view",Ud="page",Fd="proposition",Bd=e=>e.map((e=>{const{trackingLabel:t,scopeType:n,...r}=e;return r})),Kd=e=>e.filter(((t,n)=>{const r=JSON.stringify(t);return n===e.findIndex((e=>JSON.stringify(e)===r))})),Hd=(e,t,n)=>{const{documentElement:r}=document;let o=e,a=0;for(;o&&o!==r;){if($d(t,o)){const e=n(t),r={metas:e},o=e.find((e=>e.trackingLabel));o&&(r.label=o.trackingLabel,r.weight=a);const i=e.find((e=>e.scopeType===qd));return i&&(r.viewName=i.scope,r.weight=a),r}o=o.parentNode,a+=1}return{metas:null}};var Gd=(e,t,n)=>{const r=[];let o,a="",i=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER;for(let l=0;l<t.length;l+=1){const{metas:c,label:d,weight:u,viewName:p}=Hd(e,t[l],n);c&&(d&&u<=i&&(a=d,i=u),p&&u<=s&&(o=p,s=u),r.push(...Bd(c)))}return{decisionsMeta:Kd(r),propositionActionLabel:a,propositionActionToken:void 0,viewName:o}},zd=(e=document)=>-1!==e.location.href.indexOf("adobe_authoring_enabled");const Wd=(e,t,n,r)=>{if(0===t.length)return;const o={};n.forEach((e=>{o[e]=Xl}));const a={_experience:{decisioning:{propositions:t,propositionEventType:o}}};r&&(a._experience.decisioning.propositionAction=r),e.mergeXdm(a)},Jd=(e,t)=>{e.mergeQuery({personalization:{...t}})},Qd=(e,t)=>{if(!t&&!e)return;const n={};return e&&(n.label=e),t&&(n.tokens=[t]),n};var Yd=({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:n,getInteractionMetas:r,getClickMetas:o,getClickSelectors:a,autoCollectPropositionInteractions:i})=>({event:s,clickedElement:l})=>{const c=[];let d,u,p;if([t(l,r,i),n(l,a(),o)].forEach((({decisionsMeta:e,propositionActionLabel:t,propositionActionToken:n,viewName:r})=>{Array.prototype.push.apply(c,e),!d&&t&&(d=t),!u&&n&&(u=n),!p&&r&&(p=r)})),xe(c)){const t={eventType:Wl};p&&(t.web={webPageDetails:{viewName:p}}),s.mergeXdm(t),e(s,c,[Zl.INTERACT],Qd(d,u))}},Xd=({createProposition:e})=>{let t=!1,n=Promise.resolve({});const r=(t,n)=>{const r=t[n.toLowerCase()];return r&&r.length>0?r:[e({scope:n,scopeDetails:{characteristics:{scopeType:qd}},items:[{schema:Nl}]},!1)]};return{createCacheUpdate:e=>{const o=he();return t=!0,n=n.then((e=>o.promise.then((t=>({...e,...t}))).catch((()=>e)))),{update(t){const n=t.filter((e=>e.getScope())),a=Et(n,(e=>e.getScope().toLowerCase()));return o.resolve(a),e?r(a,e):[]},cancel(){o.reject()}}},getView:e=>n.then((t=>r(t,e))),isInitialized:()=>t}},Zd=({processPropositions:e,viewCache:t,logger:n})=>({personalizationDetails:r,onResponse:o})=>{let a,i;const s=r.getViewName();return o((()=>({propositions:a,decisions:i}))),t.getView(s).then((t=>{let o;return r.isRenderDecisions()?(({render:o,returnedPropositions:a,returnedDecisions:i}=e(t)),n.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:t.map((e=>e.toJSON()))}}),o()):(({returnedPropositions:a,returnedDecisions:i}=e([],t)),[])}))};const eu=e=>Object.keys(e).map((t=>({id:t,...e[t]})));var tu=()=>{const e={};return{storeClickMeta:({selector:t,meta:{id:n,scope:r,scopeDetails:o,trackingLabel:a,scopeType:i}})=>{e[t]||(e[t]={}),e[t][n]={scope:r,scopeDetails:o,trackingLabel:a,scopeType:i}},getClickSelectors:()=>Object.keys(e),getClickMetas:t=>e[t]?eu(e[t]):{}}},nu=()=>{const e={},t={};return{storeInteractionMeta:(n,r,o,a,i)=>{i=parseInt(i,10),e[i]||(e[i]={},t[i]={}),t[i][n]||(t[i][n]=new Set),t[i][n].add(r),e[i][n]={...a,scopeType:o}},getInteractionMetas:n=>Array.isArray(n)&&0!==n.length?Object.values(n.map((e=>parseInt(e,10))).reduce(((n,r)=>(Object.keys(e[r]||{}).forEach((o=>{n[o]||(n[o]={proposition:e[r][o],items:new Set}),n[o].items=new Set([...n[o].items,...t[r][o]])})),n)),{})).map((({proposition:e,items:t})=>({...e,items:Array.from(t).map((e=>({id:e})))}))):[]}};const ru=(e,t)=>e===Ml&&t===Nd,ou={[jl]:()=>!0,[Al]:()=>!0,[Ml]:ru,[ql]:()=>!0,[Nl]:()=>!0},au=(e,t)=>"function"==typeof ou[e]&&ou[e](e,t);var iu=({processPropositions:e,createProposition:t,renderedPropositions:n,viewCache:r})=>{const o=({items:e,metadataForScope:t={}})=>{const{actionType:n,selector:r}=t;return e.filter((e=>au(e.schema,n))).map((e=>{const{schema:o}=e;return o===Al||ru(o,n)?ct(t)?void 0:{...e,schema:ru(o,n)?jl:o,data:{...e.data,selector:r,type:n}}:{...e}})).filter((e=>e))},a=e=>!(e.scope===Eo&&e.renderAttempted),i=({propositions:e,metadata:t})=>e.filter(a).map((e=>{if(xe(e.items)){const{id:n,scope:r,scopeDetails:a}=e;return{id:n,scope:r,scopeDetails:a,items:o({items:e.items,metadataForScope:t[e.scope]})}}return e})).filter((e=>xe(e.items)));return({propositions:o=[],metadata:a={},viewName:s})=>{const l=he();n.concat(l.promise);const c=i({propositions:o,metadata:a}).map((e=>t(e)));return Promise.resolve().then((()=>s?r.getView(s):[])).then((t=>{const{render:n,returnedPropositions:r}=e([...c,...t]);return n().then(l.resolve),{propositions:r}}))}},su=({window:e})=>()=>e.location,lu=({targetMigrationEnabled:e})=>e?e=>{e.getPayload().mergeMeta({target:{migration:!0}})}:Gt;const cu="BODY > *:eq(0)";var du=e=>{const{selector:t,type:n}=e;return n!==bd||t!==cu?e:{...e,selector:"BODY"}};const uu="SCRIPT,LINK,STYLE",pu=e=>{const t=sc(e);return Fe(uu,t).map((e=>e.outerHTML)).join("")};var mu=e=>{const t={...e},{content:n,selector:r}=t;if(Xs(n))return t;if(null==r)return t;const o=yc(r);return qc(o[0],Re)?(t.type=Ld,t.content=pu(n),t):t},gu=e=>t=>t?e.reduce(((e,t)=>({...e,...t(e)})),t):t,fu=({preprocess:e,isPageWideSurface:t})=>{const n=(t,n)=>{const{id:r,schema:o,data:a,characteristics:{trackingLabel:i}={}}=t,s=a?a.type:void 0,l=e(a);return{getId:()=>r,getSchema:()=>o,getSchemaType:()=>s,getData:()=>l,getProposition:()=>n,getTrackingLabel:()=>i,getOriginalItem:()=>t,toString:()=>JSON.stringify(t),toJSON:()=>t}};return(e,r=!0,o=!1)=>{const{id:a,scope:i,scopeDetails:s,items:l=[]}=e,{characteristics:{scopeType:c}={}}=s||{};return{getScope:()=>i,getScopeType:()=>i===Eo||t(i)?Ud:c===qd?qd:Fd,getItems(){return l.map((e=>n(e,this)))},getNotification:()=>({id:a,scope:i,scopeDetails:s}),getId:()=>a,toJSON:()=>e,shouldSuppressDisplay:()=>o,addToReturnValues(t,n,o,a){r&&(t.push({...e,items:o.map((e=>e.getOriginalItem())),renderAttempted:a}),a||n.push({...e,items:o.map((e=>e.getOriginalItem()))}))}}}},yu=()=>{let e=Promise.resolve([]);return{concat(t){e=e.then((e=>t.then((t=>e.concat(t))).catch((()=>e))))},clear(){const t=e;return e=Promise.resolve([]),t}}},hu=()=>({render:Gt,setRenderAttempted:!0,includeInNotification:!0});const vu="always",bu="never",Eu="decoratedElementsOnly",_u=[vu,bu,Eu],Pu="data-aep-interact-id",wu="data-aep-click-label",Du="data-aep-click-token";let Cu=0;const Iu=(e,t)=>t?parseInt(t,10):++Cu,Su=(e,t)=>!!e&&!!e[t]&&[vu,Eu].includes(e[t]),ku=(e,t,n,r,o,a,i,s)=>{const{scopeDetails:l={}}=i,{decisionProvider:c}=l;return Su(e,c)||t===xd?e=>{if(!e.tagName)return;const t=Iu(n,bc(e,Pu));s(n,r,a,i,t),vc(e,Pu,t),o&&!bc(e,wu)&&vc(e,wu,o)}:Gt};var Tu=(e,t)=>e!==qd?{shouldRender:()=>!0,markAsRendered:()=>{}}:{shouldRender:e=>!e||!(e.dataset.adobePropositionIds??"").split(",").includes(t),markAsRendered:e=>{const n=(e.dataset.adobePropositionIds??"").split(",");n.includes(t)||n.push(t),e.dataset.adobePropositionIds=n.sort().join(",")}},Ru=({modules:e,logger:t,storeInteractionMeta:n,storeClickMeta:r,autoCollectPropositionInteractions:o})=>a=>{const{type:i,selector:s}=a.getData()||{};if(!i)return t.warn("Invalid DOM action data: missing type.",a.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(i===xd)return s?(r({selector:s,meta:{...a.getProposition().getNotification(),trackingLabel:a.getTrackingLabel(),scopeType:a.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",a.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[i])return t.warn("Invalid DOM action data: unknown type.",a.getData()),{setRenderAttempted:!1,includeInNotification:!1};const l=Tu(a.getProposition().getScopeType(),a.getId()),c=ku(o,i,a.getProposition().getId(),a.getId(),a.getTrackingLabel(),a.getProposition().getScopeType(),a.getProposition().getNotification(),n);return{render:()=>e[i](a.getData(),c,l),setRenderAttempted:!0,includeInNotification:!0}},Ou=({modules:e,logger:t,storeInteractionMeta:n,autoCollectPropositionInteractions:r})=>o=>{const{type:a,selector:i}=o.getData()||{};if(!i||!a)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[a])return t.warn("Invalid HTML content data",o.getData()),{setRenderAttempted:!1,includeInNotification:!1};const s=ku(r,a,o.getProposition().getId(),o.getId(),o.getTrackingLabel(),o.getProposition().getScopeType(),o.getProposition().getNotification(),n);return{render:()=>e[a](o.getData(),s),setRenderAttempted:!0,includeInNotification:!0}};const Lu="BODY";var xu=({logger:e,executeRedirect:t,collect:n})=>r=>{const{content:o}=r.getData()||{};return o?{render:()=>(ed(Lu),n({decisionsMeta:[r.getProposition().getNotification()],documentMayUnload:!0}).then((()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:r.getProposition().getNotification(),redirect:o},message:`Redirect action ${r.toString()} executed.`,logLevel:"info"}),t(o)))).catch((e=>{throw td(Lu),e}))),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",r.getData()),{})},Nu=({schemaProcessors:e,logger:t})=>{const n=(e,n)=>()=>Promise.resolve().then(e).then((()=>(t.enabled&&t.info(`Action ${n.toString()} executed.`),n.toJSON()))).catch((e=>{const{message:r,stack:o}=e,a=`Failed to execute action ${n.toString()}. ${r} ${o}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:n.getProposition().getNotification(),item:n.toJSON()},error:e,message:a,logLevel:"warn"})})),r=async(e,t)=>{const n=(await Promise.allSettled(e.map((e=>e())))).filter((e=>"fulfilled"===e.status)).map((e=>e.value));if(t&&xe(n))return{...t,items:n}},o=t=>{const n=e[t.getSchema()];return n?n(t):{}},a=({renderers:e,returnedPropositions:t,returnedDecisions:a,items:i,proposition:s})=>{let l,c,d,u,p=[...e],m=[...t],g=[...a],f=[],y=[],h=[],v=!1,b=!1,E=0;for(;i.length>E;){if(u=i[E],({render:l,setRenderAttempted:c,includeInNotification:d,onlyRenderThis:b}=o(u)),b){m=[],g=[],c?(f=[u],y=[]):(f=[],y=[u]),p=[],h=[l],v=d;break}l&&h.push(n(l,u)),d&&(v=!0),c?f.push(u):y.push(u),E+=1}if(h.length>0){const e=v?s.getNotification():void 0;p.push((()=>r(h,e)))}else v&&p.push((()=>Promise.resolve(s.getNotification())));return f.length>0&&s.addToReturnValues(m,g,f,!0),y.length>0&&s.addToReturnValues(m,g,y,!1),{renderers:p,returnedPropositions:m,returnedDecisions:g,onlyRenderThis:b}};return(e,n=[])=>{let r,o,i,s=[],l=[],c=[],d=0;for(;e.length>d&&(o=e[d],i=o.getItems(),({renderers:s,returnedPropositions:l,returnedDecisions:c,onlyRenderThis:r}=a({renderers:s,returnedPropositions:l,returnedDecisions:c,items:i,proposition:o})),!r);)d+=1;return r&&e.forEach(((e,t)=>{t!==d&&e.addToReturnValues(l,c,e.getItems(),!1)})),n.forEach((e=>{e.addToReturnValues(l,c,e.getItems(),!1)})),{returnedPropositions:l,returnedDecisions:c,render:()=>Promise.all(s.map((e=>e()))).then((e=>{const n=e.filter((e=>e)),r=n.map((e=>{const{id:t,scope:n,scopeDetails:r}=e;return{id:t,scope:n,scopeDetails:r}}));if(xe(n)){const e=Et(n,(e=>e.scope));t.logOnContentRendering({status:"rendering-succeeded",detail:{...e},message:`Scopes: ${JSON.stringify(e)} successfully executed.`,logLevel:"info"})}return r}))}}};const ju=()=>{let e=0;return t=>{const{items:n=[]}=t;return!!n.some((e=>e.schema===ql))&&(e+=1,e>1)}};var Au=({processPropositions:e,createProposition:t,notificationHandler:n})=>({renderDecisions:r,propositions:o,event:a,personalization:i={}})=>{if(!r)return Promise.resolve();const{sendDisplayEvent:s=!0}=i,l=a?a.getViewName():void 0,c=ju(),d=o.map((e=>t(e,!0,c(e)))),{render:u,returnedPropositions:p}=e(d),m=n(r,s,l),g=d.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return u().then((e=>{const t=e.filter((e=>!g[e.id].shouldSuppressDisplay())),n=e.filter((e=>g[e.id].shouldSuppressDisplay()));m(t,n)})),Promise.resolve({propositions:p})};const Mu="text/html",Vu="application/json",$u="defaultContent",qu=["content","contentType"],Uu=["mobileParameters","webParameters","html"],Fu=(e,t)=>{for(let n=0;n<qu.length;n+=1){const r=qu[n];if(!Object.prototype.hasOwnProperty.call(e,r))return t.warn(`Invalid in-app message data: missing property '${r}'.`,e),!1}const{content:n,contentType:r}=e;if(r===Vu)for(let r=0;r<Uu.length;r+=1){const o=Uu[r];if(!Object.prototype.hasOwnProperty.call(n,o))return t.warn(`Invalid in-app message data.content: missing property '${o}'.`,e),!1}return!0};var Bu=({modules:e,logger:t})=>n=>{const r=n.getData(),o=n.getProposition(),a={...o.getNotification()},i=o.shouldSuppressDisplay();if(!r)return t.warn("Invalid in-app message data: undefined.",r),{};const{type:s=$u}=r;return e[s]?Fu(r,t)?a?{render:()=>i?null:e[s]({...r,meta:a}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",a),{}):{}:(t.warn("Invalid in-app message data: unknown type.",r),{})};const Ku=e=>{const t=Fe(`#${e}`,document);t&&t.length>0&&at(t[0])},Hu=e=>{const t={};if(!e||"a"!==e.tagName.toLowerCase())return t;const{href:n}=e;if(!n||!n.startsWith("adbinapp://"))return t;const r=n.split("?"),o=r[0].split("://")[1],a=e.innerText,i=e.getAttribute("data-uuid")||"";let s,l;if(xe(r)){const e=ae.default.parse(r[1]);s=e.interaction||"",l=ti(e.link||"")}return{action:o,interaction:s,link:l,label:a,uuid:i}};var Gu=e=>(t,n=!1)=>(n?e.location.href=t:e.location.replace(t),new Promise((()=>{})));const zu="alloy-messaging-container",Wu="alloy-overlay-container",Ju="alloy-content-iframe",Qu=()=>[zu,Wu].forEach(Ku),Yu=(e,t=Gu(window))=>n=>{n.preventDefault(),n.stopImmediatePropagation();const{target:r}=n,o="a"===r.tagName.toLowerCase()?r:r.closest("a");if(!o)return;const{action:a,interaction:i,link:s,label:l,uuid:c}=Hu(o);e(a,{label:l,id:i,uuid:c,link:s}),"dismiss"===a&&Qu(),Ht(s)&&s.length>0&&t(s,!0)},Xu=(e,t)=>{const n=(new DOMParser).parseFromString(e,Mu),r=n.querySelector("script");r&&r.setAttribute("nonce",Rc());const o=we("iframe",{src:URL.createObjectURL(new Blob([n.documentElement.outerHTML],{type:"text/html"})),id:Ju});return o.addEventListener("load",(()=>{const{addEventListener:e}=o.contentDocument||o.contentWindow.document;e("click",t)})),o},Zu=(e,t,n,r)=>{[{id:Wu,element:r},{id:zu,element:n},{id:Ju,element:e}].forEach((({id:e,element:n})=>{const{style:r={},params:o={}}=t[e];Object.assign(n.style,r);const{parentElement:a="body",insertionMethod:i="appendChild",enabled:s=!0}=o,l=document.querySelector(a);s&&l&&"function"==typeof l[i]&&l[i](n)}))},ep=e=>{const{verticalAlign:t,width:n,horizontalAlign:r,backdropColor:o,height:a,cornerRadius:i,horizontalInset:s,verticalInset:l,uiTakeover:c=!1}=e,d={width:n?`${n}%`:"100%",backgroundColor:o||"rgba(0, 0, 0, 0.5)",borderRadius:i?`${i}px`:"0px",border:"none",position:c?"fixed":"relative",overflow:"hidden"};return"left"===r?d.left=s?`${s}%`:"0":"right"===r?d.right=s?`${s}%`:"0":"center"===r&&(d.left="50%",d.transform="translateX(-50%)"),"top"===t?d.top=l?`${l}%`:"0":"bottom"===t?(d.position="fixed",d.bottom=l?`${l}%`:"0"):"center"===t&&(d.top="50%",d.transform=("center"===r?`${d.transform} `:"")+"translateY(-50%)",d.display="flex",d.alignItems="center",d.justifyContent="center"),d.height=a?`${a}vh`:"100%",d},tp=e=>{const{backdropOpacity:t,backdropColor:n}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:n||"#FFFFFF"}},np=["enabled","parentElement","insertionMethod"],rp=e=>{if(!e)return!1;const t=Object.keys(e);if(!t.includes(zu))return!1;if(!t.includes(Wu))return!1;const n=Object.values(e);for(let e=0;e<n.length;e+=1){if(!Pr(n[e],"style"))return!1;if(!Pr(n[e],"params"))return!1;for(let t=0;t<np.length;t+=1)if(!Pr(n[e].params,np[t]))return!1}return!0},op=e=>{if(!e)return;const{uiTakeover:t=!1}=e;return{[Ju]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[zu]:{style:ep(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[Wu]:{style:tp(e),params:{enabled:!0===t,parentElement:"body",insertionMethod:"appendChild"}}}},ap=(e={},t)=>{Qu();const{content:n,contentType:r,mobileParameters:o}=e;let{webParameters:a}=e;if(r!==Mu)return;const i=we("div",{id:zu}),s=Xu(n,Yu(t)),l=we("div",{id:Wu});rp(a)||(a=op(o)),a&&Zu(s,a,i,l)};var ip=(e,t)=>new Promise((n=>{const{meta:r}=e;ap(e,((e,n)=>{const o={};o[Zl.INTERACT]=Xl,-1!==Object.values(Zl).indexOf(e)&&(o[e]=Xl),t({decisionsMeta:[r],propositionAction:n,eventType:Wl,propositionEventTypes:Object.keys(o)})})),n({meta:r})})),sp=e=>({defaultContent:t=>ip(t,e)}),lp=(e,t)=>(n,r,o)=>{if(!n)return()=>{};if(!r){const e=he();return t.concat(e.promise),e.resolve}return(t=[],n=[])=>{xe(t)&&e({decisionsMeta:t,viewName:o}),xe(n)&&e({decisionsMeta:n,eventType:Yl,propositionAction:{reason:"Conflict"},viewName:o})}},cp=({showContainers:e,consent:t})=>()=>{const{state:n,wasSet:r}=t.current();n===Vr&&r?e():t.awaitConsent().catch(e)};const dp=e=>{const{documentElement:t}=document;let n=e;const r=new Set;let o,a;for(;n&&n!==t&&!(n instanceof ShadowRoot);){const e=bc(n,Pu);e&&r.add(e),o=o||bc(n,wu),a=a||bc(n,Du),n=n.parentNode}return{interactIds:[...r],clickLabel:o,clickToken:a}},up=e=>{const t=e.find((e=>e.scopeType===qd));return t?t.scope:void 0},pp=(e,t,n)=>r=>{const{scopeDetails:o={}}=r,{decisionProvider:a}=o;return e[a]===vu||e[a]===Eu&&(t||n)};var mp=(e,t,n)=>{const{interactIds:r,clickLabel:o="",clickToken:a}=dp(e),i=pp(n,o,a);if(0===r.length)return{};const s=t(r).filter(i);return{decisionsMeta:Bd(s),propositionActionLabel:o,propositionActionToken:a,viewName:up(s)}};const gp="AJO",fp="TGT",yp=({config:e,logger:t,eventManager:n,consent:r})=>{const{targetMigrationEnabled:o,prehidingStyle:a,autoCollectPropositionInteractions:i}=e,s=Ad({eventManager:n,mergeDecisionsMeta:Wd}),l=rd(t),c=nd(t),{storeInteractionMeta:d,getInteractionMetas:u}=nu(),{storeClickMeta:p,getClickSelectors:m,getClickMetas:g}=tu(),f=su({window:window}),y=jd(),h=gu([mu,du]),v=fu({preprocess:h,isPageWideSurface:Ll}),b=Xd({createProposition:v}),E=Gu(window),_={[Nl]:hu,[jl]:Ru({modules:y,logger:t,storeInteractionMeta:d,storeClickMeta:p,autoCollectPropositionInteractions:i}),[Al]:Ou({modules:y,logger:t,storeInteractionMeta:d,autoCollectPropositionInteractions:i}),[$l]:xu({logger:t,executeRedirect:E,collect:s}),[ql]:Bu({modules:sp(s),logger:t})},P=Nu({schemaProcessors:_,logger:t}),w=yu(),D=lp(s,w),C=Vd({prehidingStyle:a,showContainers:l,hideContainers:c,mergeQuery:Jd,processPropositions:P,createProposition:v,notificationHandler:D,consent:r,logger:t}),I=Yd({mergeDecisionsMeta:Wd,collectInteractions:mp,collectClicks:Gd,getInteractionMetas:u,getClickMetas:g,getClickSelectors:m,autoCollectPropositionInteractions:i}),S=Zd({processPropositions:P,viewCache:b,logger:t}),k=iu({processPropositions:P,createProposition:v,renderedPropositions:w,viewCache:b}),T=lu({targetMigrationEnabled:o}),R=Au({processPropositions:P,createProposition:v,notificationHandler:D}),O=cp({showContainers:l,consent:r});return ic({getPageLocation:f,logger:t,fetchDataHandler:C,viewChangeHandler:S,onClickHandler:I,isAuthoringModeEnabled:zd,mergeQuery:Jd,viewCache:b,showContainers:l,applyPropositions:k,setTargetMigration:T,mergeDecisionsMeta:Wd,renderedPropositions:w,onDecisionHandler:R,handleConsentFlicker:O})};yp.namespace="Personalization";const hp=_u.map((e=>br(e)));yp.configValidators=Pr({prehidingStyle:wr().nonEmpty(),targetMigrationEnabled:hr().default(!1),autoCollectPropositionInteractions:Pr({[gp]:gr(hp).default(vu),[fp]:gr(hp).default(bu)}).default({[gp]:vu,[fp]:bu}).noUnknownFields()});const vp="personalization:decisions",bp=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,Ep=(e,t={},n=[])=>(Object.keys(e).forEach((r=>{bp(e[r])||Array.isArray(e[r])?Ep(e[r],t,[...n,r]):t[[...n,r].join(".")]=e[r]})),t);var _p=e=>bp(e)?Ep(e):e,Pp=({renderDecisions:e,decisionProvider:t,applyResponse:n,event:r,personalization:o,decisionContext:a})=>{const i={..._p(r.getContent()),...a};return({response:a})=>{if(t.addPayloads(a.getPayloadsByType(vp)),!r.hasQuery())return{propositions:[]};const s=t.evaluate(i);return n({renderDecisions:e,propositions:s,event:r,personalization:o})}};const wp={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},Dp={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},Cp={AND:"and",OR:"or"},Ip={ORDERED:"ordered"},Sp={[Dp.EQUALS]:d(),[Dp.NOT_EQUALS]:u(),[Dp.EXISTS]:p(),[Dp.NOT_EXISTS]:m(),[Dp.GREATER_THAN]:f(),[Dp.GREATER_THAN_OR_EQUAL_TO]:y(),[Dp.LESS_THAN]:h(),[Dp.LESS_THAN_OR_EQUAL_TO]:v(),[Dp.CONTAINS]:b(),[Dp.NOT_CONTAINS]:E(),[Dp.STARTS_WITH]:_(),[Dp.ENDS_WITH]:P()},kp="eventId",Tp="eventType",Rp=["iam.eventType",Tp,"type"],Op=["iam.id","id"],Lp=(e,t,n)=>{switch(t){case Dp.GREATER_THAN:return e>n;case Dp.GREATER_THAN_OR_EQUAL_TO:return e>=n;case Dp.LESS_THAN:return e<n;case Dp.LESS_THAN_OR_EQUAL_TO:return e<=n;case Dp.EQUALS:return e===n;case Dp.NOT_EQUALS:return e!==n;default:return!1}},xp=(e,t)=>{for(let n=0;n<t.length;n+=1)if(!D(e[t[n]]))return t[n];throw new Error("The event does not match the expected schema.")},Np=e=>{const t=structuredClone(e);return[[xp(t,Rp),Tp],[xp(t,Op),kp]].forEach((([e,n])=>{e!==n&&(t[n]=t[e],delete t[e])})),t},jp="TGT",Ap="DEFAULT",Mp="ECID",Vp="<key>",$p="<identity>",qp=J(Y,(e=>e.join("-"))),Up=100,Fp=J(X);var Bp=e=>{const t=structuredClone(e),n=Object.keys(t).sort().reduce(((e,n)=>{const r=t[n];return null==r||""===r?e:e+=`${n}:${r}`}),"");return pt(n)},Kp=e=>{const t=new Date;return t.setDate(t.getDate()-e),t};const Hp=1e3,Gp=30,zp="events",Wp=2097152;var Jp=(e=Gp,t=Hp)=>n=>{let r=Object.entries(n).reduce(((e,[t,{timestamps:n=[]}])=>(n.forEach((n=>{e.push({key:t,timestamp:n})})),e)),[]);const o=Kp(e);return r=r.filter((({timestamp:e})=>e>=o)),r.sort(((e,t)=>e.timestamp-t.timestamp)),r=r.slice(-t),r.reduce(((e,{key:t,timestamp:n})=>(e[t]||(e[t]={timestamps:[]}),e[t].timestamps.push(n),e)),{})},Qp=e=>{const{_experience:t}=e||{};return!!t&&"object"==typeof t};const Yp=e=>e?.scopeDetails?.activity?.id,Xp=e=>e?.scopeDetails?.decisionProvider,Zp=(e,t)=>n=>{try{const n=e.getItem(t);return[JSON.parse(n),n.length]}catch{}return[n,0]},em=(e,t=e=>e)=>n=>{e.setItem(t,JSON.stringify(n))},tm=()=>{const e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,n)=>{e[t]=n}}},nm=e=>{e.clear()};var rm=(e=[])=>Array.isArray(e)?e.flat(1/0):e,om=(e,t,n)=>{const{html:r,mobileParameters:o}=n;return{schema:ql,data:{mobileParameters:o,webParameters:{},content:r,contentType:Mu},id:e}},am=(e,t,n)=>{const{schema:r,data:o,id:a}=n;return{schema:r,data:o,id:a||e}};const im="cjmiam",sm="schema",lm={[im]:om,[sm]:am};var cm=()=>e=>{const{id:t,type:n,detail:r}=e;return"function"==typeof lm[n]?lm[n](t,n,r):r};const dm=e=>{const{schema:t,data:n}=e;if(t===Vl)return!0;if(t!==Ml)return!1;try{const e="string"==typeof n.content?JSON.parse(n.content):n.content;return e&&Object.prototype.hasOwnProperty.call(e,"version")&&Object.prototype.hasOwnProperty.call(e,"rules")}catch{return!1}};var um=(e,t)=>{const n=cm(),r=Yp(e),o=[],a=e=>{const{data:t={},schema:n}=e,r=n===Vl?t:t.content;r&&o.push(oe("string"==typeof r?JSON.parse(r):r,{generateEventHash:Bp}))},i=a=>{const i=t.getEvent(zl,r),s=i?.timestamps[0],l=rm(o.map((e=>e.execute(a)))).map(n).map((e=>{const n=t.addEvent({eventType:Zl.TRIGGER,eventId:r}).timestamps[0];return{...e,data:{...e.data,qualifiedDate:n,displayedDate:s}}}));return{...e,items:l}};return Array.isArray(e.items)&&e.items.filter(dm).forEach(a),{
rank:e?.scopeDetails?.rank||1/0,evaluate:i,isEvaluable:o.length>0}},pm=({eventRegistry:e})=>{const t={},n=n=>{const r=Yp(n);if(!r)return;const o=um(n,e);o.isEvaluable&&(t[r]=o)};return{addPayload:n,addPayloads:e=>{e.forEach(n)},evaluate:(e={})=>Object.values(t).sort((({rank:e},{rank:t})=>e-t)).map((t=>t.evaluate(e))).filter((e=>e.items.length>0))}},mm=e=>({renderDecisions:t=!1,propositions:n=[],event:r,personalization:o})=>(e&&e.onDecision({renderDecisions:t,propositions:n,event:r,personalization:o}),{propositions:n}),gm=({storage:e,logger:t})=>{let n,r,o,a,i=e;const s=e=>{if(i=e,n=Zp(i,zp),r=em(i,zp),[o,a]=n({}),a>Wp){const e=Jp();o=e(o),r(o)}};s(e);const l=(e={})=>{const{eventType:n,eventId:a}=e;if(!n||!a)return;const i=(new Date).getTime(),s=Bp(e);return o[s]&&Array.isArray(o[s].timestamps)||(o[s]={timestamps:[]}),o[s].timestamps.push(i),o[s].timestamps.sort(),t.info("[Event History] Added event for",e,"with hash",s,"and timestamp",i),r(o),o[s]};return{addExperienceEdgeEvent:e=>{const{xdm:t}=e.getContent();if(!Qp(t))return;const{_experience:{decisioning:{propositionEventType:n={},propositionAction:{id:r}={},propositions:o=[]}={}}}=t;Object.keys(n).filter((e=>n[e]===Xl)).forEach((e=>{o.forEach((t=>{Xp(t)===gp&&l({eventId:Yp(t),eventType:e,action:r})}))}))},addEvent:l,getEvent:(e,t)=>{const n=Bp({eventType:e,eventId:t});if(o[n])return o[n]},toJSON:()=>o,setStorage:s}},fm=({eventRegistry:e,window:t,getBrowser:n})=>{const r=(new Date).getTime(),o=()=>({title:t.title,url:t.url,...Jt(t.url)}),a=()=>({url:t.referrer,...Jt(t.referrer)}),i=()=>{const e=new Date,t=e.getTime();return{pageLoadTimestamp:r,currentTimestamp:t,currentDate:e.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":e.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":e.getHours(),currentMinute:e.getMinutes(),currentMonth:e.getMonth(),currentYear:e.getFullYear(),pageVisitDuration:t-r,"~timestampu":t/1e3,"~timestampz":e.toISOString()}},s=()=>({height:t.height,width:t.width,scrollY:t.scrollY,scrollX:t.scrollX}),l={browser:{name:n()},page:o(),referringPage:a()},c=()=>({...l,...i(),window:s(),"~sdkver":ba});return{getContext:(t={})=>{const n={...c(),...t};return{..._p(n),events:e.toJSON()}}}};const ym=(e,...t)=>t,hm=()=>!0,vm=()=>{let e=ym,t=hm,n=0;const r={},o=e=>()=>{delete r[e]},a=(e,t)=>"function"!=typeof e?()=>{}:(n+=1,r[n]={callback:e,params:t},{id:n,unsubscribe:o(n)}),i=(...n)=>{Object.values(r).forEach((({callback:r,params:o})=>{const a=e(o,...n);t(o,...a)&&r(...a)}))},s=(n,...o)=>{if(!n||!r[n])return;const{callback:a,params:i}=r[n],s=e(i,...o);t(i,...s)&&a(...s)};return{add:a,emit:i,emitOne:s,hasSubscriptions:()=>Object.keys(r).length>0,setEmissionPreprocessor:t=>{"function"==typeof t&&(e=t)},setEmissionCondition:e=>{"function"==typeof e&&(t=e)}}},bm=({options:e})=>Pr({surfaces:yr(wr()).uniqueItems(),schemas:yr(wr()).uniqueItems(),callback:vr().required()}).noUnknownFields()(e),Em=e=>{const{id:t,scope:n,scopeDetails:r}=e;return{id:t,scope:n,scopeDetails:r}};var _m=({collect:e})=>{let t=()=>{};const n=new Set,r=e=>[Zl.INTERACT,Zl.DISMISS].includes(e),o=(e,t,o)=>{const a=[e,t].join("-"),i=!o.has(a)&&(r(e)||!n.has(a));return o.add(a),n.add(a),i},a=(t,n=[])=>{if(!(n instanceof Array))return Promise.resolve();if(!Object.values(Zl).includes(t))return Promise.resolve();const r=[],a=new Set;return n.forEach((e=>{const n=Em(e);o(t,n.id,a)&&r.push(n)})),r.length>0?e({decisionsMeta:r,eventType:rc(t),documentMayUnload:!0}):Promise.resolve()},i=vm(),s=(e,t)=>{const{surfacesFilter:n,schemasFilter:r}=e;return[{propositions:t.filter((e=>!n||n.includes(e.scope))).map((e=>{const{items:t=[]}=e;return{...e,items:t.filter((e=>!r||r.includes(e.schema)))}})).filter((e=>e.items.length>0))},a]};i.setEmissionPreprocessor(s);const l=({surfaces:e,schemas:n,callback:r})=>{const{id:o,unsubscribe:a}=i.add(r,{surfacesFilter:e instanceof Array?e:void 0,schemasFilter:n instanceof Array?n:void 0});return t(o),Promise.resolve({unsubscribe:a})};return{refresh:e=>{t=t=>{t?i.emitOne(t,e):i.emit(e)},t()},command:{optionsValidator:e=>bm({options:e}),run:l}}};const Pm={TYPE:"~type",SOURCE:"~source"},wm={EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},Dm={REQUEST:"com.adobe.eventSource.requestContent"},Cm=({options:e})=>Pr({renderDecisions:hr(),personalization:Pr({decisionContext:Pr({})})}).noUnknownFields()(e);var Im=({contextProvider:e,decisionProvider:t})=>({optionsValidator:e=>Cm({options:e}),run:({renderDecisions:n,decisionContext:r,applyResponse:o})=>o({renderDecisions:n,propositions:t.evaluate(e.getContext(r))})});const Sm=({config:e,eventManager:t,createNamespacedStorage:n,consent:r,getBrowser:o,logger:a})=>{const{orgId:i,personalizationStorageEnabled:s}=e,l=Ad({eventManager:t,mergeDecisionsMeta:Wd}),c=n(`${vt(i)}.decisioning.`);s||nm(c.persistent);const d=gm({storage:tm(),logger:a}),u=pm({eventRegistry:d}),p=fm({eventRegistry:d,window:window,getBrowser:o}),m=Im({contextProvider:p,decisionProvider:u}),g=_m({collect:l});let f;return{lifecycle:{onDecision({propositions:e}){g.refresh(e)},onComponentsRegistered(e){f=mm(e.lifecycle),s&&r.awaitConsent().then((()=>{d.setStorage(c.persistent)})).catch((()=>{c&&nm(c.persistent)}))},onBeforeEvent({event:e,renderDecisions:t,personalization:n={},onResponse:r=Gt}){const{decisionContext:o={}}=n;r(Pp({renderDecisions:t,decisionProvider:u,applyResponse:f,event:e,personalization:n,decisionContext:p.getContext({[Pm.TYPE]:wm.EDGE,[Pm.SOURCE]:Dm.REQUEST,...o})}))},onBeforeRequest({request:e}){const t=e.getPayload().toJSON(),{events:n=[]}=t;0!==n.length&&n.forEach((e=>d.addExperienceEdgeEvent(e)))}},commands:{evaluateRulesets:{run:({renderDecisions:e,personalization:t={}})=>{const{decisionContext:n={}}=t;return m.run({renderDecisions:e,decisionContext:{[Pm.TYPE]:wm.RULES_ENGINE,[Pm.SOURCE]:Dm.REQUEST,...n},applyResponse:f})},optionsValidator:m.optionsValidator},subscribeRulesetItems:g.command}}};Sm.namespace="RulesEngine",Sm.configValidators=Pr({personalizationStorageEnabled:hr().default(!1)});var km=Pr({streamingMedia:Pr({channel:wr().nonEmpty().required(),playerName:wr().nonEmpty().required(),appVersion:wr(),mainPingInterval:Er().minimum(10).maximum(50).default(10),adPingInterval:Er().minimum(1).maximum(10).default(10)}).noUnknownFields()}),Tm=({options:e})=>gr([Pr({playerId:wr().required(),getPlayerDetails:vr().required(),xdm:Pr({mediaCollection:Pr({sessionDetails:Pr(fr()).required()})}),edgeConfigOverrides:Pr({})}).required(),Pr({xdm:Pr({mediaCollection:Pr({playhead:Er().required(),sessionDetails:Pr(fr()).required()})}),edgeConfigOverrides:Pr({})}).required()],"Error validating the createMediaSession command options.")(e),Rm=({options:e})=>gr([Pr({playerId:wr().required(),xdm:Pr({eventType:Dr(...Object.values(Ks)).required(),mediaCollection:Pr(fr())}).required()}).required(),Pr({xdm:Pr({eventType:Dr(...Object.values(Ks)).required(),mediaCollection:Pr({playhead:Er().integer().required(),sessionID:wr().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e),Om=({config:e,trackMediaEvent:t,trackMediaSession:n,mediaResponseHandler:r})=>({lifecycle:{onBeforeEvent({mediaOptions:e,onResponse:t=Gt}){if(!e)return;const{legacy:n,playerId:o,getPlayerDetails:a}=e;n||t((({response:e})=>r({playerId:o,getPlayerDetails:a,response:e})))}},commands:{createMediaSession:{optionsValidator:e=>Tm({options:e}),run:n},sendMediaEvent:{optionsValidator:e=>Rm({options:e}),run:n=>e.streamingMedia?t(n):Promise.reject(new Error("Streaming media is not configured."))}}});const Lm=({config:e,logger:t,eventManager:n,sendEdgeNetworkRequest:r,consent:o})=>{const a=Ws(),i=Gs({config:e,eventManager:n,consent:o,sendEdgeNetworkRequest:r,setTimestamp:ha((()=>new Date))}),s=Qs({mediaSessionCacheManager:a,mediaEventManager:i,config:e}),l=Ys({config:e,mediaEventManager:i,mediaSessionCacheManager:a}),c=Zs({mediaSessionCacheManager:a,config:e,trackMediaEvent:s});return Om({config:e,trackMediaEvent:s,mediaResponseHandler:c,trackMediaSession:l})};Lm.namespace="Streaming media",Lm.configValidators=km;const{console:xm}=window,Nm=Vt(window),jm=(e={})=>{const t=Pr({name:wr().default("alloy"),monitors:yr(Pr({})).default([]),components:yr(vr())}).noUnknownFields(),{name:n,monitors:r,components:o}=t(e),a=kr({console:xm,locationSearch:window.location.search,createLogger:bo,instanceName:n,createNamespacedStorage:Nm,getMonitors:da.bind(null,r)}),i=Ni({instanceName:n,logController:a,components:o});return a.logger.logOnInstanceCreated({instance:i}),i};t.createCustomInstance=jm,t.components=[Ds,ks,qs,Bs,gl,yp,Sm,Lm]}},"adobe-alloy/dist/lib/instanceManager/createInstanceManager.js":{script:function(e){"use strict";e.exports=({turbine:e,window:t,createCustomInstance:n,components:r,createEventMergeId:o,orgId:a,wrapOnBeforeEventSend:i,getConfigOverrides:s})=>{const{instances:l}=e.getExtensionSettings(),c={},d={};return t.__alloyMonitors=t.__alloyMonitors||[],t.__alloyMonitors.push({onInstanceCreated:(...e)=>{d.onInstanceCreated||=[],d.onInstanceCreated.push(e)},onInstanceConfigured:(...e)=>{d.onInstanceConfigured||=[],d.onInstanceConfigured.push(e)},onBeforeCommand(...e){const{commandName:t}=e[0];"configure"===t&&(d.onBeforeCommand||=[],d.onBeforeCommand.push(e))}}),l.forEach((({name:o,edgeConfigId:l,stagingEdgeConfigId:d,developmentEdgeConfigId:u,onBeforeEventSend:p,...m})=>{const g=n({name:o,components:r});t[o]=g,t.__alloyNS||(t.__alloyNS=[]),t.__alloyNS.push(o),c[o]=g;const f=e.environment&&e.environment.stage,y="development"===f&&u||"staging"===f&&d||l;m.edgeConfigOverrides=s(m),g("configure",{...m,datastreamId:y,debugEnabled:e.debugEnabled,orgId:m.orgId||a,onBeforeEventSend:i(p)}),e.onDebugChanged((e=>{g("setDebug",{enabled:e})}))})),{getInstance:e=>c[e],createEventMergeId:()=>o(),addMonitor(e){t.__alloyMonitors.push(e),Object.keys(d).forEach((t=>{e[t]&&d[t].forEach((n=>{e[t](...n)}))}))}}}}},"adobe-alloy/dist/lib/instanceManager/injectWrapOnBeforeEventSend.js":{script:function(e){"use strict";e.exports=({version:e})=>t=>n=>{if(n.xdm.implementationDetails.name=`${n.xdm.implementationDetails.name}/reactor`,n.xdm.implementationDetails.version=`${n.xdm.implementationDetails.version}+${e}`,t)return t(n)}}},"adobe-alloy/dist/lib/actions/updateVariable/createUpdateVariable.js":{script:function(e,t,n){"use strict";const{deletePath:r}=n("../../utils/pathUtils");e.exports=({variableStore:e,deepAssign:t})=>({data:n,dataElementId:o,transforms:a,customCode:i},s)=>{var l;const c=Object.keys(a||{}).reduce(((e,t)=>{const{clear:n}=a[t];return n?r(e,t):e}),e[o]||{});e[o]=t({},c,n),i&&i(e[o],s);const d=(null===(l=e[o])||void 0===l?void 0:l.__adobe)||{};return d.audienceManager&&(d.audiencemanager=d.audienceManager,delete d.audienceManager),Promise.resolve()}}},"adobe-alloy/dist/lib/utils/pathUtils.js":{script:function(e,t){"use strict";const n=/^-?[0-9]+$/,r=e=>e.split(".").map((e=>n.test(e)?parseInt(e,10):e)).filter((e=>""!==e)),o=e=>{const t=e||{};return"object"!=typeof t?{}:t},a=e=>{const t=e||[];return Array.isArray(t)?t:[]},i=(e,t,n)=>{if("number"==typeof t){const r=e.slice();return r[t]=n,r}return{...e,[t]:n}},s=(e,t)=>{if("number"==typeof t)return[...e.slice(0,t),...e.slice(t+1)];const n={...e};return delete n[t],n},l=(e,t,n,r,s)=>{if(r===n.length)return s(e,t);let c,d=n[r];return"number"==typeof d?(c=a(e[t]),d=d<0?c.length+d:d,d=d<0?0:d):c=o(e[t]),i(e,t,l(c,d,n,r+1,s))},c=e=>(t,n,o)=>l({value:t},"value",r(n),0,((t,n)=>e(t,n,o))).value;t.setValue=c(i),t.deletePath=c(s)}},"adobe-alloy/dist/lib/actions/setConsent/createSetConsent.js":{script:function(e){"use strict";e.exports=({instanceManager:e,getConfigOverrides:t})=>n=>{const{instanceName:r,identityMap:o,consent:a}=n,i=t(n),s=e.getInstance(r);if(!s)throw new Error(`Failed to set consent for instance "${r}". No matching instance was configured with this name.`);return s("setConsent",o?{identityMap:o,consent:a,edgeConfigOverrides:i}:{consent:a,edgeConfigOverrides:i})}}}}},"common-web-sdk-plugins":{displayName:"Common Web SDK Plugins",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP72fbeb9839644a1daa8eca9f84e02dcf/",modules:{"common-web-sdk-plugins/src/lib/dataElements/getqueryparam.js":{name:"getqueryparam",displayName:"getQueryParam",script:function(e){"use strict";function t(e,t,n){function r(e,t){var n,r=(t=(t=t.split("?").join("&")).split("#").join("&")).indexOf("&");if(e&&(r>-1||t.indexOf("=")>r))for(var o=0,a=(n=t.substring(r+1).split("&")).length;o<a;o++){var i=n[o].split("="),s=i[0],l=i[1];if(s.toLowerCase()===e.toLowerCase())return decodeURIComponent(l||!0)}return""}if("-v"===e)return{plugin:"getQueryParam",version:"5.0.0"};if(e){if(t=t||"",n=(n||"undefined"!=typeof s&&s.pageURL||location.href)+"",(t.length>4||t.indexOf("=")>-1)&&n&&n.length<4){var o=t;t=n,n=o}for(var a,i="",l=e.split(","),c=l.length,d=0;d<c;d++)"string"==typeof(a=r(l[d],n))?(a=a.indexOf("#")>-1?a.substring(0,a.indexOf("#")):a,i+=i?t+a:a):""===i?i=a:i+=t+a;return i}}e.exports=function(e){return t(e.queryStringParameters,e.delimiter,e.urlToCheck)}}}}},core:{displayName:"Core",hostedLibFilesBaseUrl:"https://assets.adobedtm.com/extensions/EP6a6d85ccbeaa4750848f31959dd9eec5/",modules:{"core/src/lib/dataElements/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e){"use strict";e.exports=function(e,t){return e.source(t)}}},"core/src/lib/dataElements/domAttribute.js":{name:"dom-attribute",displayName:"DOM Attribute",script:function(e){"use strict";e.exports=function(e){var t=document.querySelector(e.elementSelector);if(t){var n=e.elementProperty;return"text"===n?t.innerText||t.textContent:n in t?t[n]:t.getAttribute?t.getAttribute(n):void 0}}}},"core/src/lib/conditions/subdomain.js":{name:"subdomain",displayName:"Subdomain",script:function(e,t,n){"use strict";var r=n("@adobe/reactor-document"),o=n("../helpers/textMatch");e.exports=function(e){var t=r.location.hostname;return e.subdomains.some((function(e){var n=e.valueIsRegex?new RegExp(e.value,"i"):e.value;return o(t,n)}))}}},"core/src/lib/events/directCall.js":{name:"direct-call",displayName:"Direct Call",script:function(e,t,n,r){"use strict";var o={};window._satellite=window._satellite||{},window._satellite.track=function(e,t){e=e.trim();var n=o[e];if(n){var a={identifier:e,detail:t};n.forEach((function(e){e(a)}));var i=['Rules using the direct call event type with identifier "'+e+'" have been triggered'+(t?" with additional detail:":".")];t&&i.push(t),r.logger.log.apply(r.logger,i)}else r.logger.log('"'+e+'" does not match any direct call identifiers.')},e.exports=function(e,t){var n=o[e.identifier];n||(n=o[e.identifier]=[]),n.push(t)}}},"core/src/lib/events/entersViewport.js":{name:"enters-viewport",displayName:"Enters Viewport",script:function(e,t,n){"use strict";var r,o=n("@adobe/reactor-document"),a=n("@adobe/reactor-window"),i=n("./helpers/weakMap"),s=n("./helpers/enableWeakMapDefaultValue"),l=n("./helpers/matchesSelector"),c=n("./helpers/matchesProperties"),d=n("../helpers/stringAndNumberUtils").castToNumberIfString,u=n("../helpers/intersectionObserverIntervals"),p={FIRST_ENTRY:"firstEntry",EVERY_ENTRY:"everyEntry"},m=s(new i,(function(){return{timeoutIds:[],completedListeners:[],inViewport:!1}})),g={},f=function(e){var t=m.get(e);t.inViewport||(t.inViewport=!0,Object.keys(g).forEach((function(n){l(e,n)&&g[n].forEach((function(n){if(c(e,n.settings.elementProperties)&&-1===t.completedListeners.indexOf(n)){var r=function(){(n.settings.frequency||p.FIRST_ENTRY)===p.FIRST_ENTRY&&t.completedListeners.push(n),n.trigger({element:e,target:e,delay:n.settings.delay})};if(n.settings.delay){var o=a.setTimeout((function(){Boolean(m.get(e).inViewport)&&r()}),n.settings.delay);t.timeoutIds.push(o)}else r()}}))})))},y=function(e){var t=m.get(e);t.inViewport=!1,t.timeoutIds.length&&(t.timeoutIds.forEach(clearTimeout),t.timeoutIds=[])},h=[],v=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?f(e.target):y(e.target)}))}),{root:null,rootMargin:"0px"}),b=function(e){e&&o.querySelectorAll(e).forEach((function(e){v.observe(e)}))};r=function(){b(h.join(",")),h=[];var e=a.setInterval((function(){b(Object.keys(g).join(","))}),u.standard.pageElementsRefresh);a.addEventListener("beforeunload",(function(){v.disconnect(),a.clearInterval(e)}),!1)},"loading"!==o.readyState?r():o.addEventListener("DOMContentLoaded",r),e.exports=function(e,t){if(e.elementSelector){var n=g[e.elementSelector],r=Boolean(!n);r&&(n=g[e.elementSelector]=[]),e.delay=d(e.delay),n.push({settings:e,trigger:t}),"loading"===o.readyState?h.push(e.elementSelector):r&&b(e.elementSelector)}}}},"core/src/lib/events/click.js":{name:"click",displayName:"Click",script:function(e,t,n){"use strict";var r=n("@adobe/reactor-window"),o=n("./helpers/createBubbly")(),a=new(n("./helpers/weakMap")),i=2,s=n("../helpers/stringAndNumberUtils").castToNumberIfString,l=function(e){if(!e.ctrlKey&&!e.metaKey&&e.button!==i)for(var t=e.target;t;){var n=t.tagName;if(n&&"a"===n.toLowerCase()){var o=t.getAttribute("href"),a=t.getAttribute("target");return o&&(!a||"_self"===a||"_top"===a&&r.top===r||a===r.name)?t:void 0}t=t.parentNode}};document.addEventListener("click",o.evaluateEvent,!0),e.exports=function(e,t){o.addListener(e,(function(n){var o=n.nativeEvent;if(!o.s_fe){var i=s(e.anchorDelay);if(i&&!a.has(o)){var c=l(o);c&&(o.preventDefault(),setTimeout((function(){r.location=c.href}),i)),a.set(o,!0)}t(n)}}))},e.exports.__reset=o.__reset}},"core/src/lib/conditions/valueComparison.js":{name:"value-comparison",displayName:"Value Comparison",script:function(e,t,n){"use strict";var r=n("../helpers/stringAndNumberUtils").isString,o=n("../helpers/stringAndNumberUtils").isNumber,a=n("../helpers/stringAndNumberUtils").castToStringIfNumber,i=n("../helpers/stringAndNumberUtils").castToNumberIfString,s=function(e,t){return t&&r(e)?e.toLowerCase():e},l=function(e){return function(t,n,o){return t=a(t),n=a(n),r(t)&&r(n)&&e(t,n,o)}},c=function(e){return function(t,n){return t=i(t),n=i(n),o(t)&&o(n)&&e(t,n)}},d=function(e){return function(t,n,r){return e(s(t,r),s(n,r))}},u={equals:d((function(e,t){return e==t})),doesNotEqual:function(){return!u.equals.apply(null,arguments)},contains:l(d((function(e,t){return-1!==e.indexOf(t)}))),doesNotContain:function(){return!u.contains.apply(null,arguments)},startsWith:l(d((function(e,t){return 0===e.indexOf(t)}))),doesNotStartWith:function(){return!u.startsWith.apply(null,arguments)},endsWith:l(d((function(e,t){return e.substring(e.length-t.length,e.length)===t}))),doesNotEndWith:function(){return!u.endsWith.apply(null,arguments)},matchesRegex:l((function(e,t,n){return new RegExp(t,n?"i":"").test(e)})),doesNotMatchRegex:function(){return!u.matchesRegex.apply(null,arguments)},lessThan:c((function(e,t){return e<t})),lessThanOrEqual:c((function(e,t){return e<=t})),greaterThan:c((function(e,t){return e>t})),greaterThanOrEqual:c((function(e,t){return e>=t})),isTrue:function(e){return!0===e},isTruthy:function(e){return Boolean(e)},isFalse:function(e){return!1===e},isFalsy:function(e){return!e}};e.exports=function(e){return u[e.comparison.operator](e.leftOperand,e.rightOperand,Boolean(e.comparison.caseInsensitive))}}},"core/src/lib/actions/customCode.js":{name:"custom-code",displayName:"Custom Code",script:function(e,t,n,r){"use strict";var o,a,i,s,l=n("@adobe/reactor-document"),c=n("@adobe/reactor-promise"),d=n("./helpers/decorateCode"),u=n("./helpers/loadCodeSequentially"),p=n("../../../node_modules/postscribe/dist/postscribe"),m=n("./helpers/unescapeHtmlCode"),g=n("../helpers/findPageScript").getTurbine,f=(a=function(e){p(l.body,e,{beforeWriteToken:function(e){var t=e.tagName&&e.tagName.toLowerCase();return o&&"script"===t&&(e.attrs.nonce=o),"script"!==t&&"style"!==t||(Object.keys(e.attrs||{}).forEach((function(t){e.attrs[t]=m(e.attrs[t])})),e.src&&(e.src=m(e.src))),e},error:function(e){r.logger.error(e.msg)}})},i=[],s=function(){if(l.body)for(;i.length;)a(i.shift());else setTimeout(s,20)},function(e){i.push(e),s()}),y=function(){if(l.currentScript)return l.currentScript.async;var e=g();return!e||e.async}();e.exports=function(e,t){var n;o=r.getExtensionSettings().cspNonce;var a={settings:e,event:t},i=a.settings.source;if(i)return a.settings.isExternal?u(i).then((function(e){return e?(n=d(a,e),f(n.code),n.promise):c.resolve()})):(n=d(a,i),y||"loading"!==l.readyState?f(n.code):l.write&&!1===r.propertySettings.ruleComponentSequencingEnabled?l.write(n.code):f(n.code),n.promise)}}},"core/src/lib/events/libraryLoaded.js":{name:"library-loaded",displayName:"Library Loaded (Page Top)",script:function(e,t,n){"use strict";var r=n("./helpers/pageLifecycleEvents");e.exports=function(e,t){r.registerLibraryLoadedTrigger(t)}}},"core/src/lib/helpers/textMatch.js":{script:function(e){"use strict";e.exports=function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))}}},"core/src/lib/events/helpers/weakMap.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-window").WeakMap;if(void 0===r){var o=Object.defineProperty,a=Date.now()%1e9;(r=function(){this.name="__st"+(1e9*Math.random()>>>0)+a+++"__"}).prototype={set:function(e,t){var n=e[this.name];return n&&n[0]===e?n[1]=t:o(e,this.name,{value:[e,t],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},delete:function(e){var t=e[this.name];return!(!t||t[0]!==e||(t[0]=t[1]=void 0,0))},has:function(e){var t=e[this.name];return!!t&&t[0]===e}}}e.exports=r}},"core/src/lib/events/helpers/enableWeakMapDefaultValue.js":{script:function(e){"use strict";e.exports=function(e,t){var n=e.get;return e.get=function(r){return e.has(r)||e.set(r,t()),n.apply(this,arguments)},e}}},"core/src/lib/events/helpers/matchesSelector.js":{script:function(e,t,n,r){"use strict";e.exports=function(e,t){var n=e.matches||e.msMatchesSelector;if(n)try{return n.call(e,t)}catch(e){return r.logger.warn("Matching element failed. "+t+" is not a valid selector."),!1}return!1}}},"core/src/lib/events/helpers/matchesProperties.js":{script:function(e,t,n){"use strict";var r=n("./../../helpers/textMatch"),o=function(e,t){return"@text"===t||"innerText"===t?e.textContent||e.innerText:t in e?e[t]:e.getAttribute?e.getAttribute(t):void 0};e.exports=function(e,t){return!t||t.every((function(t){var n=o(e,t.name),a=t.valueIsRegex?new RegExp(t.value,"i"):t.value;return r(n,a)}))}}},"core/src/lib/helpers/stringAndNumberUtils.js":{script:function(e){"use strict";var t=function(e){return"number"==typeof e&&isFinite(e)},n=function(e){return"string"==typeof e||e instanceof String},r=function(e){return t(e)?String(e):e},o=function(e){return n(e)?Number(e):e};e.exports={isNumber:t,isString:n,castToStringIfNumber:r,castToNumberIfString:o}}},"core/src/lib/helpers/intersectionObserverIntervals.js":{script:function(e){"use strict";e.exports={standard:{pageElementsRefresh:3e3}}}},"core/src/lib/events/helpers/createBubbly.js":{script:function(e,t,n){"use strict";var r=n("./weakMap"),o=n("./matchesProperties"),a=n("./matchesSelector");e.exports=function(){var e=[],t=new r,n={addListener:function(t,n){e.push({settings:t,callback:n})},evaluateEvent:function(n,r){if(e.length&&!t.has(n)){for(var i=n.target,s=!1;i;){for(var l=!1,c=!1,d=0;d<e.length;d++){var u=e[d],p=u.settings.elementSelector,m=u.settings.elementProperties;if((!1!==u.settings.bubbleFireIfChildFired||!s)&&(i===n.target||!1!==u.settings.bubbleFireIfParent)&&(i===n.target||p||m&&Object.keys(m).length)&&(!p||a(i,p))&&(!m||o(i,m))){var g={};r?Object.keys(n).forEach((function(e){g[e]=n[e]})):g.nativeEvent=n,g.element=i,g.target=n.target,!1!==u.callback(g)&&(c=!0,u.settings.bubbleStop&&(l=!0))}}if(l)break;c&&(s=!0),i=i.parentNode}t.set(n,!0)}},__reset:function(){e=[]}};return n}}},"core/src/lib/actions/helpers/decorateCode.js":{script:function(e,t,n){"use strict";var r=n("./decorators/decorateGlobalJavaScriptCode"),o=n("./decorators/decorateNonGlobalJavaScriptCode"),a={javascript:function(e,t){return e.settings.global?r(e,t):o(e,t)},html:n("./decorators/decorateHtmlCode")};e.exports=function(e,t){return a[e.settings.language](e,t)}}},"core/src/lib/actions/helpers/loadCodeSequentially.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-promise"),o=n("./getSourceByUrl"),a=r.resolve();e.exports=function(e){var t=new r((function(t){var n=o(e);r.all([n,a]).then((function(e){var n=e[0];t(n)}))}));return a=t,t}}},"core/node_modules/postscribe/dist/postscribe.js":{script:function(e,t){var n,r;n=this,r=function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(1));e.exports=o.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(){}function i(){var e=g.shift();if(e){var t=u.last(e);t.afterDequeue(),e.stream=s.apply(void 0,e),t.afterStreamStart()}}function s(e,t,n){function r(e){e=n.beforeWrite(e),f.write(e),n.afterWrite(e)}(f=new d.default(e,n)).id=m++,f.name=n.name||f.id,l.streams[f.name]=f;var o=e.ownerDocument,s={close:o.close,open:o.open,write:o.write,writeln:o.writeln};c(o,{close:a,open:a,write:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t.join(""))},writeln:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t.join("")+"\n")}});var u=f.win.onerror||a;return f.win.onerror=function(e,t,r){n.error({msg:e+" - "+t+": "+r}),u.apply(f.win,[e,t,r])},f.write(t,(function(){c(o,s),f.win.onerror=u,n.done(),f=null,i()})),f}function l(e,t,n){if(u.isFunction(n))n={done:n};else if("clear"===n)return g=[],f=null,void(m=0);n=u.defaults(n,p);var r=[e=/^#/.test(e)?window.document.getElementById(e.substr(1)):e.jquery?e[0]:e,t,n];return e.postscribe={cancel:function(){r.stream?r.stream.abort():r[1]=a}},n.beforeEnqueue(r),g.push(r),f||i(),e.postscribe}t.__esModule=!0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=l;var d=o(n(2)),u=r(n(4)),p={afterAsync:a,afterDequeue:a,afterStreamStart:a,afterWrite:a,autoFix:!0,beforeEnqueue:a,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:a,error:function(e){throw new Error(e.msg)},releaseAsync:!1},m=0,g=[],f=null;c(l,{streams:{},queue:g,WriteStream:d.default})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=p+t,r=e.getAttribute(n);return d.existy(r)?String(r):r}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=p+t;d.existy(n)&&""!==n?e.setAttribute(r,n):e.removeAttribute(r)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=o(n(3)),d=r(n(4)),u=!1,p="data-ps-",m="ps-style",g="ps-script",f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.root=t,this.options=n,this.doc=t.ownerDocument,this.win=this.doc.defaultView||this.doc.parentWindow,this.parser=new c.default("",{autoFix:n.autoFix}),this.actuals=[t],this.proxyHistory="",this.proxyRoot=this.doc.createElement(t.nodeName),this.scriptStack=[],this.writeQueue=[],s(this.proxyRoot,"proxyof",0)}return e.prototype.write=function(){var e;for((e=this.writeQueue).push.apply(e,arguments);!this.deferredRemote&&this.writeQueue.length;){var t=this.writeQueue.shift();d.isFunction(t)?this._callFunction(t):this._writeImpl(t)}},e.prototype._callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this._onScriptStart(t),e.call(this.win,this.doc),this._onScriptDone(t)},e.prototype._writeImpl=function(e){this.parser.append(e);for(var t=void 0,n=void 0,r=void 0,o=[];(t=this.parser.readToken())&&!(n=d.isScript(t))&&!(r=d.isStyle(t));)(t=this.options.beforeWriteToken(t))&&o.push(t);o.length>0&&this._writeStaticTokens(o),n&&this._handleScriptToken(t),r&&this._handleStyleToken(t)},e.prototype._writeStaticTokens=function(e){var t=this._buildChunk(e);return t.actual?(t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,u&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this._walkChunk(),u&&(t.actualInnerHTML=this.root.innerHTML),t):null},e.prototype._buildChunk=function(e){for(var t=this.actuals.length,n=[],r=[],o=[],a=e.length,i=0;i<a;i++){var s=e[i],l=s.toString();if(n.push(l),s.attrs){if(!/^noscript$/i.test(s.tagName)){var c=t++;r.push(l.replace(/(\/?>)/," "+p+"id="+c+" $1")),s.attrs.id!==g&&s.attrs.id!==m&&o.push("atomicTag"===s.type?"":"<"+s.tagName+" "+p+"proxyof="+c+(s.unary?" />":">"))}}else r.push(l),o.push("endTag"===s.type?l:"")}return{tokens:e,raw:n.join(""),actual:r.join(""),proxy:o.join("")}},e.prototype._walkChunk=function(){for(var e=void 0,t=[this.proxyRoot];d.existy(e=t.shift());){var n=1===e.nodeType;if(!n||!i(e,"proxyof")){n&&(this.actuals[i(e,"id")]=e,s(e,"id"));var r=e.parentNode&&i(e.parentNode,"proxyof");r&&this.actuals[r].appendChild(e)}t.unshift.apply(t,d.toArray(e.childNodes))}},e.prototype._handleScriptToken=function(e){var t=this,n=this.parser.clear();n&&this.writeQueue.unshift(n),e.src=e.attrs.src||e.attrs.SRC,(e=this.options.beforeWriteToken(e))&&(e.src&&this.scriptStack.length?this.deferredRemote=e:this._onScriptStart(e),this._writeScriptToken(e,(function(){t._onScriptDone(e)})))},e.prototype._handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",(e=this.options.beforeWriteToken(e))&&this._writeStyleToken(e),t&&this.write()},e.prototype._writeStyleToken=function(e){var t=this._buildStyle(e);this._insertCursor(t,m),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},e.prototype._buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),d.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),t},e.prototype._insertCursor=function(e,t){this._writeImpl('<span id="'+t+'"/>');var n=this.doc.getElementById(t);n&&n.parentNode.replaceChild(e,n)},e.prototype._onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},e.prototype._onScriptDone=function(e){e===this.scriptStack[0]?(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),!this.scriptStack.length&&this.deferredRemote&&(this._onScriptStart(this.deferredRemote),this.deferredRemote=null)):this.options.error({msg:"Bad script nesting or script finished twice"})},e.prototype._writeScriptToken=function(e,t){var n=this._buildScript(e),r=this._shouldRelease(n),o=this.options.afterAsync;e.src&&(n.src=e.src,this._scriptLoadHandler(n,r?o:function(){t(),o()}));try{this._insertCursor(n,g),n.src&&!r||t()}catch(e){this.options.error(e),t()}},e.prototype._buildScript=function(e){var t=this.doc.createElement(e.tagName);return d.eachKey(e.attrs,(function(e,n){t.setAttribute(e,n)})),e.content&&(t.text=e.content),t},e.prototype._scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}function r(){n(),null!=t&&t(),t=null}function o(e){n(),i(e),null!=t&&t(),t=null}function a(e,t){var n=e["on"+t];null!=n&&(e["_on"+t]=n)}var i=this.options.error;a(e,"load"),a(e,"error"),l(e,{onload:function(){if(e._onload)try{e._onload.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){o({msg:"onload handler failed "+t+" @ "+e.src})}r()},onerror:function(){if(e._onerror)try{e._onerror.apply(this,Array.prototype.slice.call(arguments,0))}catch(t){return void o({msg:"onerror handler failed "+t+" @ "+e.src})}o({msg:"remote script failed "+e.src})},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&r()}})},e.prototype._shouldRelease=function(e){return!/^script$/i.test(e.nodeName)||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},e}();t.default=f},function(e){var t;t=function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,
o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(1));e.exports=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=o(n(2)),s=o(n(3)),l=r(n(6)),c=n(5),d={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.stream=n;var o=!1,s={};for(var c in i)i.hasOwnProperty(c)&&(r.autoFix&&(s[c+"Fix"]=!0),o=o||s[c+"Fix"]);o?(this._readToken=(0,l.default)(this,s,(function(){return t._readTokenImpl()})),this._peekToken=(0,l.default)(this,s,(function(){return t._peekTokenImpl()}))):(this._readToken=this._readTokenImpl,this._peekToken=this._peekTokenImpl)}return e.prototype.append=function(e){this.stream+=e},e.prototype.prepend=function(e){this.stream=e+this.stream},e.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},e.prototype._peekTokenImpl=function(){for(var e in d)if(d.hasOwnProperty(e)&&d[e].test(this.stream)){var t=s[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},e.prototype.peekToken=function(){return this._peekToken()},e.prototype.readToken=function(){return this._readToken()},e.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},e.prototype.clear=function(){var e=this.stream;return this.stream="",e},e.prototype.rest=function(){return this.stream},e}();for(var p in t.default=u,u.tokenToString=function(e){return e.toString()},u.escapeAttributes=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=(0,c.escapeQuotes)(e[n],null));return t},u.supports=i,i)i.hasOwnProperty(p)&&(u.browserHasFlaw=u.browserHasFlaw||!i[p]&&p)},function(e,t){"use strict";t.__esModule=!0;var n=!1,r=!1,o=window.document.createElement("div");try{var a="<P><I></P></I>";o.innerHTML=a,t.tagSoup=n=o.innerHTML!==a}catch(e){t.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",t.selfClose=r=2===o.childNodes.length}catch(e){t.selfClose=r=!1}o=null,t.tagSoup=n,t.selfClose=r},function(e,t,n){"use strict";function r(e){var t=e.indexOf("-->");if(t>=0)return new c.CommentToken(e.substr(4,t-1),t+3)}function o(e){var t=e.indexOf("<");return new c.CharsToken(t>=0?t:e.length)}function a(e){var t,n,r;if(-1!==e.indexOf(">")){var o=e.match(d.startTag);if(o){var a=(t={},n={},r=o[2],o[2].replace(d.attr,(function(e,o){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(t[arguments[5]]="",n[arguments[5]]=!0):t[o]=arguments[2]||arguments[3]||arguments[4]||d.fillAttr.test(o)&&o||"":t[o]="",r=r.replace(e,"")})),{v:new c.StartTagToken(o[1],o[0].length,t,n,!!o[3],r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))});if("object"===(void 0===a?"undefined":l(a)))return a.v}}}function i(e){var t=a(e);if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(r)return new c.AtomicTagToken(t.tagName,r[0].length+t.length,t.attrs,t.booleanAttrs,r[1])}}}function s(e){var t=e.match(d.endTag);if(t)return new c.EndTagToken(t[1],t[0].length)}t.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.comment=r,t.chars=o,t.startTag=a,t.atomicTag=i,t.endTag=s;var c=n(4),d={startTag:/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var o=n(5),a=(t.Token=function e(t,n){r(this,e),this.type=t,this.length=n,this.text=""},t.CommentToken=function(){function e(t,n){r(this,e),this.type="comment",this.length=n||(t?t.length:0),this.text="",this.content=t}return e.prototype.toString=function(){return"<!--"+this.content},e}(),t.CharsToken=function(){function e(t){r(this,e),this.type="chars",this.length=t,this.text=""}return e.prototype.toString=function(){return this.text},e}(),t.TagToken=function(){function e(t,n,o,a,i){r(this,e),this.type=t,this.length=o,this.text="",this.tagName=n,this.attrs=a,this.booleanAttrs=i,this.unary=!1,this.html5Unary=!1}return e.formatTag=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n="<"+e.tagName;for(var r in e.attrs)if(e.attrs.hasOwnProperty(r)){n+=" "+r;var a=e.attrs[r];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[r]||(n+='="'+(0,o.escapeQuotes)(a)+'"')}return e.rest&&(n+=" "+e.rest),e.unary&&!e.html5Unary?n+="/>":n+=">",null!=t&&(n+=t+"</"+e.tagName+">"),n},e}());t.StartTagToken=function(){function e(t,n,o,a,i,s){r(this,e),this.type="startTag",this.length=n,this.text="",this.tagName=t,this.attrs=o,this.booleanAttrs=a,this.html5Unary=!1,this.unary=i,this.rest=s}return e.prototype.toString=function(){return a.formatTag(this)},e}(),t.AtomicTagToken=function(){function e(t,n,o,a,i){r(this,e),this.type="atomicTag",this.length=n,this.text="",this.tagName=t,this.attrs=o,this.booleanAttrs=a,this.unary=!1,this.html5Unary=!1,this.content=i}return e.prototype.toString=function(){return a.formatTag(this,this.content)},e}(),t.EndTagToken=function(){function e(t,n){r(this,e),this.type="endTag",this.length=n,this.text="",this.tagName=t}return e.prototype.toString=function(){return"</"+this.tagName+">"},e}()},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,(function(e,t){return/\\/.test(t)?t+'"':t+'\\"'})):t}t.__esModule=!0,t.escapeQuotes=n},function(e,t){"use strict";function n(e){return e&&"startTag"===e.type&&(e.unary=s.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function r(e,t){var r=e.stream,o=n(t());return e.stream=r,o}function o(e,t){var n=t.pop();e.prepend("</"+n.tagName+">")}function a(){var e=[];return e.last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1},e}function i(e,t,i){function s(){var t=r(e,i);t&&d[t.type]&&d[t.type](t)}var c=a(),d={startTag:function(n){var r=n.tagName;"TR"===r.toUpperCase()&&c.lastTagNameEq("TABLE")?(e.prepend("<TBODY>"),s()):t.selfCloseFix&&l.test(r)&&c.containsTagName(r)?c.lastTagNameEq(r)?o(e,c):(e.prepend("</"+n.tagName+">"),s()):n.unary||c.push(n)},endTag:function(n){c.last()?t.tagSoupFix&&!c.lastTagNameEq(n.tagName)?o(e,c):c.pop():t.tagSoupFix&&(i(),s())}};return function(){return s(),n(i())}}t.__esModule=!0,t.default=i;var s=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},e.exports=t()},function(e,t){"use strict";function n(e){return null!=e}function r(e){return"function"==typeof e}function o(e,t,n){var r=void 0,o=e&&e.length||0;for(r=0;r<o;r++)t.call(n,e[r],r)}function a(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.call(n,r,e[r])}function i(e,t){return e=e||{},a(t,(function(t,r){n(e[t])||(e[t]=r)})),e}function s(e){try{return Array.prototype.slice.call(e)}catch(r){var t=(n=[],o(e,(function(e){n.push(e)})),{v:n});if("object"===(void 0===t?"undefined":p(t)))return t.v}var n}function l(e){return e[e.length-1]}function c(e,t){return!(!e||"startTag"!==e.type&&"atomicTag"!==e.type||!("tagName"in e)||!~e.tagName.toLowerCase().indexOf(t))}function d(e){return c(e,"script")}function u(e){return c(e,"style")}t.__esModule=!0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.existy=n,t.isFunction=r,t.each=o,t.eachKey=a,t.defaults=i,t.toArray=s,t.last=l,t.isTag=c,t.isScript=d,t.isStyle=u}])},"object"==typeof t&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof t?t.postscribe=r():n.postscribe=r()}},"core/src/lib/actions/helpers/unescapeHtmlCode.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-document").createElement("div");e.exports=function(e){return r.innerHTML=e,r.textContent||r.innerText||e}}},"core/src/lib/helpers/findPageScript.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-document"),o=function(e){for(var t=r.querySelectorAll("script"),n=0;n<t.length;n++){var o=t[n];if(e.test(o.src))return o}},a=function(){return o(new RegExp(/(launch|satelliteLib)-[^\/]+.js(\?.*)?$/))};e.exports={getTurbine:a,byRegexPattern:o}}},"core/src/lib/actions/helpers/decorators/decorateGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-promise");e.exports=function(e,t){return{code:"<script>\n"+t+"\n</script>",promise:r.resolve()}}}},"core/src/lib/actions/helpers/decorators/decorateNonGlobalJavaScriptCode.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-promise"),o=0;e.exports=function(e,t){var n="_runScript"+ ++o,a=new r((function(t,o){_satellite[n]=function(a){delete _satellite[n],new r((function(t){t(a.call(e.event.element,e.event,e.event.target,r))})).then(t,o)}}));return{code:'<script>_satellite["'+n+'"](function(event, target, Promise) {\n'+t+"\n});</script>",promise:a}}}},"core/src/lib/actions/helpers/decorators/decorateHtmlCode.js":{script:function(e,t,n,r){"use strict";var o=n("@adobe/reactor-promise"),a=0,i={};window._satellite=window._satellite||{},window._satellite._onCustomCodeSuccess=function(e){var t=i[e];t&&(delete i[e],t.resolve())},window._satellite._onCustomCodeFailure=function(e){var t=i[e];t&&(delete i[e],t.reject())};var s=function(e){return-1!==e.indexOf("${reactorCallbackId}")},l=function(e,t){return e.replace(/\${reactorCallbackId}/g,t)},c=function(e){return e.settings.isExternal};e.exports=function(e,t){var n;return c(e)&&(t=r.replaceTokens(t,e.event)),s(t)?(n=new o((function(e,t){i[String(a)]={resolve:e,reject:t}})),t=l(t,a),a+=1):n=o.resolve(),{code:t,promise:n}}}},"core/src/lib/actions/helpers/getSourceByUrl.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-load-script"),o=n("@adobe/reactor-promise"),a=n("../../helpers/findPageScript").byRegexPattern,i={},s={},l=function(e){return s[e]||(s[e]=r(e)),s[e]};_satellite.__registerScript=function(e,t){var n;if(document.currentScript)n=document.currentScript.getAttribute("src");else{var r=new RegExp(".*"+e+".*");n=a(r).getAttribute("src")}i[n]=t},e.exports=function(e){return i[e]?o.resolve(i[e]):new o((function(t){l(e).then((function(){t(i[e])}),(function(){t()}))}))}}},"core/src/lib/events/helpers/pageLifecycleEvents.js":{script:function(e,t,n){"use strict";var r=n("@adobe/reactor-window"),o=n("@adobe/reactor-document"),a=-1!==r.navigator.appVersion.indexOf("MSIE 10"),i="WINDOW_LOADED",s="DOM_READY",l="PAGE_BOTTOM",c=[l,s,i],d=function(e,t){return{element:e,target:e,nativeEvent:t}},u={};c.forEach((function(e){u[e]=[]}));var p=function(e,t){c.slice(0,g(e)+1).forEach((function(e){f(t,e)}))},m=function(){return"complete"===o.readyState?i:"interactive"===o.readyState?a?null:s:void 0},g=function(e){return c.indexOf(e)},f=function(e,t){u[t].forEach((function(t){y(e,t)})),u[t]=[]},y=function(e,t){var n=t.trigger,r=t.syntheticEventFn;n(r?r(e):null)};r._satellite=r._satellite||{},r._satellite.pageBottom=p.bind(null,l),o.addEventListener("DOMContentLoaded",p.bind(null,s),!0),r.addEventListener("load",p.bind(null,i),!0),r.setTimeout((function(){var e=m();e&&p(e)}),0),e.exports={registerLibraryLoadedTrigger:function(e){e()},registerPageBottomTrigger:function(e){u[l].push({trigger:e})},registerDomReadyTrigger:function(e){u[s].push({trigger:e,syntheticEventFn:d.bind(null,o)})},registerWindowLoadedTrigger:function(e){u[i].push({trigger:e,syntheticEventFn:d.bind(null,r)})}}}}}}},company:{orgId:"0A661E8266D2273A0A495F8E@AdobeOrg",dynamicCdnEnabled:!1},property:{name:"PL - WebSdk",settings:{domains:["premierleague.com"],undefinedVarsReturnEmpty:!1,ruleComponentSequencingEnabled:!0},id:"PR8bcf0fb4425d49e38c3da3e74704a44b"},rules:[{id:"RL07603aa51cc54e59a2d06a0e5590aa2e",name:"PL Retail - Event - Ecommerce Interaction",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"product_click"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"product_impression"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"product_detail"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"product_interaction"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"add_to_cart"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"remove_from_cart"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"view_cart"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"checkout"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"purchase"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webInteraction:{linkClicks:{value:1}}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{identities:{ssoId:"%DL | ssoid%"},retailWebEvents:{checkout:{revenue:"%Retail | DL | revenue%",user_status:"%Retail | DL | user_status%",payment_method:"%Retail | DL | payment_method%",shipping_method:"%Retail | DL | shipping_method%",checkout_stage_name:"%Retail | DL | checkout_stage_name%",checkout_stage_number:"%Retail | DL | checkout_stage_number%"},purchase:{tax:"%Retail | DL | tax%",coupon:"%Retail | DL | coupon%",revenue:"%Retail | DL | revenue%",currency:"%Retail | DL | currency%",order_id:"%Retail | DL | order_id%",shipping:"%Retail | DL | shipping%",affiliation:"%Retail | DL | affiliation%",payment_method:"%Retail | DL | payment_method%",shipping_method:"%Retail | DL | shipping_method%"},viewCart:{revenue:"%Retail | DL | revenue%"},productArray:"%Retail | CC | product%",userProperty:{sessionType:"%New vs Repeat%"},productInteraction:{interactionType:"%Retail | DL | interaction_type%",interactionValue:"%Retail | DL | interaction_value%"}}}},customCode:function(e,t){const n=t.event.eventModel.event;"purchase"!=n&&(e._thefootballassociationpremierl.retailWebEvents.purchase={}),"view_cart"!=n&&(e._thefootballassociationpremierl.retailWebEvents.viewCart={}),"checkout"!=n&&(e._thefootballassociationpremierl.retailWebEvents.checkout={})},dataElementId:"DEc6192fd0159548aaa46bc9f9afe3629b"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plretail_xdm_variable_ecommerce%",type:"%DL | event%",instanceName:"alloy",edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"5b09a64a-6a9e-4879-bbc8-14d10a716023"},production:{enabled:!0,datastreamId:"9c56c22d-324b-4113-8e48-df4aa7f9c451"},development:{enabled:!0,datastreamId:"53888722-454e-419d-9649-05886f8ff7a3"}}},timeout:2e3,delayNext:!0}]},{id:"RL31506be87381478fb8691d4305549522",name:"PL Main - Event - Page View",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"page_view"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"shop.premierleague.com",valueIsRegex:!0},{value:"devprem.stichdecom.com",valueIsRegex:!0},{value:"stgprem.stichdecom.com",valueIsRegex:!0}]},negate:!0,timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webPageDetails:{name:"%DL | screen_page_name%",pageViews:{value:1}}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{global:{platform:"%DL | platform%",screenTab:"%DL | active_tab_name%",screenPageCategory:"%DL | screen_page_category%"},matchCentres:{season:"%DL | screen_page_season%",matchId:"%DL | screen_page_match_id%",stadium:"%DL |  screen_page_stadium%",matchDate:"%DL | screen_page_match_date%",matchTime:"%DL | screen_page_match_time%",awayTeamId:"%DL | screen_page_away_team_id%",homeTeamId:"%DL | screen_page_home_team_id%",matchStatus:"%DL |  screen_page_match_status%",awayTeamName:"%DL | screen_page_away_team_name%",homeTeamName:"%DL | screen_page_home_team_name%"},userProperty:{sessionType:"%New vs Repeat%"},playerandteam:{teamIds:"%DL | screen_page_team_id%",playerIds:"%DL | screen_page_player_id%",teamNames:"%DL | screen_page_team_name%",playerNames:"%DL | screen_page_player_name%"},utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"}},identities:{ssoId:"%DL | ssoid%"}}},dataElementId:"DE22cf3f7d9d3340ee8f2cebb3ccee27dd"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_pageview%",type:"Page View",instanceName:"alloy",renderDecisions:!0},timeout:8e3,delayNext:!0}]},{id:"RL319fa49920704f14b80c121a982a8a97",name:"PL Retail - Event - Non Ecommerce Interaction",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"sort_event"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"search_input"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"search_event"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"menu_navigation"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"input_field"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"form_submit"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"login_event"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"promo_impression"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"promo_click"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"interaction"},ruleOrder:50},{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"filter_event"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webInteraction:{linkClicks:{value:1}}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{identities:{ssoId:"%DL | ssoid%"},retailWebEvents:{sortEvent:{sortType:"%Retail | DL | sort_type%"},formSubmit:{formType:"%Retail | DL | form_type%"},inputField:{fieldName:"%Retail | DL | field_name%",fieldError:"%Retail | DL | field_error%",fieldInputType:"%Retail | DL | field_input_type%",fieldValidation:"%Retail | DL | field_validation%"},loginEvent:{userStatus:"%Retail | DL | user_status%",optinStatus:"%Retail | DL | optin_status%",customerGroup:"%Retail | DL | customer_group%",customerNumber:"%Retail | DL | customer_number%"},promoClick:"%Retail | DL | promotion%",filterEvent:{filterAction:"%Retail | DL | filter_action%",filterselection:{pimgender:"%Retail | DL | filter_selection.pimgender%"},filterActionValue:{pimgender:"%Retail | DL | filter_action_value.pimgender%"}},interaction:{interactionType:"%Retail | DL | interaction_type%"},searchEvent:{searchType:"%Retail | DL | search_type%",searchTermUsed:"%Retail | DL | search_term_used%",searchTermTyped:"%Retail | DL | search_term_typed%"},searchInput:{searchTermTyped:"%Retail | DL | search_term_typed%"},userProperty:{sessionType:"%New vs Repeat%"},menuNavigation:{menuType:"%Retail | DL | menu_type%",clickText:"%Retail | DL | click_text%",clickType:"%Retail | DL | click_type%"},promoImpression:"%Retail | DL | promotion%"}}},customCode:function(e,t){const n=t.event.eventModel.event;"login_event"!=n&&(e._thefootballassociationpremierl.retailWebEvents.loginEvent={}),"promo_impression"==n&&(e._thefootballassociationpremierl.retailWebEvents.promoClick={}),"promo_click"==n&&(e._thefootballassociationpremierl.retailWebEvents.promoImpression={}),"search_input"==n&&(e._thefootballassociationpremierl.retailWebEvents.searchEvent={}),"search_event"==n&&(e._thefootballassociationpremierl.retailWebEvents.searchInput={})},transforms:{"":{clear:!0}},dataElementId:"DE1a1c8f95e42647199c6cbbdfcb83b18d"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plretail_xdm_variable_non_ecommerce%",type:"%DL | event%",instanceName:"alloy",edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"5b09a64a-6a9e-4879-bbc8-14d10a716023"},production:{enabled:!0,datastreamId:"9c56c22d-324b-4113-8e48-df4aa7f9c451"},development:{enabled:!0,datastreamId:"53888722-454e-419d-9649-05886f8ff7a3"}}},timeout:2e3,delayNext:!0}]},{id:"RL472dbecb4abf47668505eccbd25fa490",name:"Set Consent In",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"opt in"},ruleOrder:0}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/setConsent/index.js",settings:{consent:[{value:{general:"in"},version:"1.0",standard:"Adobe"}],instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RL6ee707c6d189479d8eed8e2bc1aaddc4",name:"PL Main - Enters Viewport - AJO Pop up Visible",events:[{modulePath:"core/src/lib/events/entersViewport.js",settings:{frequency:"firstEntry",elementSelector:'#AdobePopupContainer[data-aep-interact-id="1"]'},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{impression:{name:"%CC | ajoPopUp Attribute%",source:"AJO Pop Up"}}}},transforms:{web:{clear:!0},_thefootballassociationpremierl:{clear:!0}},dataElementId:"DEd2abf065e4c844318b6fe3049e6c0042"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_ajo%",type:"pop up visible",instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RL77c1b9235e704204920f5dc760684051",name:"PL Main - Click - Sign Out",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:".logout button",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webInteraction:{linkClicks:{value:1}},webPageDetails:{name:"%DL | screen_page_name%"}},identityMap:"%identityMap.ssoID%"},transforms:{web:{clear:!0},_thefootballassociationpremierl:{clear:!0}},dataElementId:"DEd2abf065e4c844318b6fe3049e6c0042"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_ajo%",type:"sign out",instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RL89ca2db1eaed490f860e289238346da5",name:"PL Main - Event - Article Tracking",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"content_consumption_track"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"equals"},leftOperand:"%DL | event_component%",rightOperand:"article consumption"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webPageDetails:{name:"%DL | screen_page_name%"}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{global:{platform:"%DL | platform%",screenPageCategory:"%DL | screen_page_category%"},article:{articleId:"%DL | screen_page_article_id%",articleTitle:"%DL | screen_page_article_name%",contentSeries:"%DL | event_content_series%"},content:{contentType:"%DL | event_content_type%",contentClick:"%CC | contentClick%",contentCreator:"%DL | event_content_content_creator%",contentFormats:"%DL | event_content_format%",contentFranchise:"%DL | event_content_franchise%",contentPriorityOrder:"%DL | event_content_prioritisation_order%"},eventType:"%DL | event_type%",userProperty:{sessionType:"%New vs Repeat%"},eventCategory:"%DL | event_category%",playerandteam:{teamIds:"%DL | event_content_team_id%",playerIds:"%DL | event_content_player_id%",teamNames:"%DL | event_content_team_name%",managerIds:"%DL | event_content_manager_id%",playerNames:"%DL | event_content_player_name%"},utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"},eventComponent:"%DL | event_component%"},identities:{ssoId:"%DL | ssoid%"}}},transforms:{web:{clear:!0},_thefootballassociationpremierl:{clear:!0}},dataElementId:"DEc81ff5ced1de4103a8a9986e8875e779"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_article%",type:"%DL | event%",instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RL98134890488943e5aa0cbd83498e2f69",name:"PL Main | FPL - Event - Click Track",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"click_track"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex"},leftOperand:"%DL | event_component%",rightOperand:"^(fantasy classic clicks|outbound link click)$"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webInteraction:{URL:"%DL | click_url%",name:"%DL | event_detail%",linkClicks:{value:1}},webPageDetails:{name:"%DL | screen_page_name%"}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{global:{platform:"%DL | platform%",screenTab:"%DL | active_tab_name%",screenPageCategory:"%DL | screen_page_category%"},fantasy:{teamId:"%FPL | DL | fpl_entry_id%",gameType:"%FPL | CC | gametype%"},eventType:"%DL | event_type%",eventDetail:"%DL | event_detail%",userProperty:{sessionType:"%New vs Repeat%"},eventCategory:"%DL | event_category%",utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"},eventComponent:"%DL | event_component%"},identities:{ssoId:"%DL | ssoid%"}}},transforms:{"":{clear:!0}},dataElementId:"DEba634003e9db44bfa2d42479f179f1f4"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_click%",type:"click_track",instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RLa7ac4e61d0ab47cc9bb60a811f3704af",name:"PL Main - Click - AJO Pop up Click",events:[{modulePath:"core/src/lib/events/click.js",settings:{elementSelector:'#AdobePopupContainer[data-aep-interact-id="1"] > div > [ajobutton]',bubbleFireIfParent:!0,bubbleFireIfChildFired:!0},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{impression:{name:"%CC | ajoPopUp button%",source:"AJO Pop Up"}}}},transforms:{web:{clear:!0},_thefootballassociationpremierl:{clear:!0}},dataElementId:"DEd2abf065e4c844318b6fe3049e6c0042"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_ajo%",type:"pop up click",instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RLb1043acbdcce4dc8aa50dea56cffe831",name:"Consent Checker",events:[{modulePath:"core/src/lib/events/libraryLoaded.js",settings:{},ruleOrder:-1}],conditions:[],actions:[{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"function onOneTrustReady() {\n    return new Promise((resolve) => {\n        if (typeof OneTrust !== 'undefined' && typeof OneTrust.OnConsentChanged === 'function') {\n            resolve(OneTrust);\n        } else {\n            const interval = setInterval(() => {\n                if (typeof OneTrust !== 'undefined' && typeof OneTrust.OnConsentChanged === 'function') {\n                    clearInterval(interval);\n                    resolve(OneTrust);\n                }\n            }, 100);\n        }\n    });\n}\n\nonOneTrustReady().then((OneTrust) => {\n    OneTrust.OnConsentChanged(function() {\n        const activeGroups = (typeof OnetrustActiveGroups !== 'undefined') ? OnetrustActiveGroups.split(',') : [];\n        if(activeGroups.includes('C0002')){\n            _satellite.track('opt in')\n        }else{\n            _satellite.track('opt out')\n        }\n    });\n});",language:"javascript"},timeout:2e3,delayNext:!0}]},{id:"RLbdd918818ac246fd8daea166814780aa",name:"PL Main - Event - Video | Vertical Video Tracking",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"content_consumption_track"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/valueComparison.js",settings:{comparison:{operator:"matchesRegex"},leftOperand:"%DL | event_component%",rightOperand:"\\b(moment|video|story) consumption\\b"},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webInteraction:{linkClicks:{value:1}},webPageDetails:{name:"%DL | screen_page_name%"}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{story:{storyId:"%DL | story_id%",storyName:"%DL | story_title%",storyType:"%DL | story_type%",storyPageId:"%DL | story_page_id%",storyPageCount:"%DL | story_page_count%",storyPageIndex:"%DL | story_page_index%",storyStartTrigger:"%DL | story_start_trigger%"},video:{videoId:"%DL | event_video_id%",videoName:"%DL | event_video_name%",videoWatch:"%DL | event_category%",contentSeries:"%DL | event_content_series%"},global:{platform:"%DL | platform%",screenPageCategory:"%DL | screen_page_category%"},moment:{momentId:"%DL | moment_id%",momentName:"%DL | moment_title%",momentIndex:"%DL | moment_index%"},content:{contentType:"%DL | event_content_type%",contentClick:"%CC | contentClick%",contentCreator:"%DL | event_content_content_creator%",contentFormats:"%DL | event_content_format%",contentFranchise:"%DL | event_content_franchise%",contentPriorityOrder:"%DL | event_content_prioritisation_order%"},eventType:"%DL | event_type%",matchCentres:{matchId:"%DL | event_content_match_id%",matchWeek:"%DL | event_content_matchweek%"},userProperty:{sessionType:"%New vs Repeat%"},eventCategory:"%DL | event_category%",playerandteam:{teamIds:"%DL | event_content_team_id%",playerIds:"%DL | event_content_player_id%",teamNames:"%DL | event_content_team_name%",managerIds:"%DL | event_content_manager_id%",playerNames:"%DL | event_content_player_name%"},utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"},
eventComponent:"%DL | event_component%"},identities:{ssoId:"%DL | ssoid%"}}},customCode:function(e){const t=_satellite.getVar("DL | event_component");"video consumption"!=t&&(e._thefootballassociationpremierl.webEvents.video={}),"story consumption"!=t&&(e._thefootballassociationpremierl.webEvents.story={}),"moment consumption"!=t&&(e._thefootballassociationpremierl.webEvents.moment={}),"story consumption"==t&&(e._thefootballassociationpremierl.webEvents.content.contentFormats="story"),"moment consumption"==t&&(e._thefootballassociationpremierl.webEvents.content.contentFormats="moment")},transforms:{"":{clear:!0}},dataElementId:"DE605f022de49847a4ace2f40131e5ac93"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_video%",type:"%DL | event%",instanceName:"alloy"},timeout:2e3,delayNext:!0}]},{id:"RLd830bef60ca1476198ad9f146b1c701b",name:"PL Main - Event - Tab View",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"tab_viewed"},ruleOrder:50}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webInteraction:{linkClicks:{value:1}}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{webEvents:{global:{platform:"%DL | platform%",screenTab:"%DL | active_tab_name%",screenPageCategory:"%DL | screen_page_category%"},matchCentres:{season:"%DL | screen_page_season%",matchId:"%DL | screen_page_match_id%",stadium:"%DL |  screen_page_stadium%",matchDate:"%DL | screen_page_match_date%",matchTime:"%DL | screen_page_match_time%",awayTeamId:"%DL | screen_page_away_team_id%",homeTeamId:"%DL | screen_page_home_team_id%",matchStatus:"%DL |  screen_page_match_status%",awayTeamName:"%DL | screen_page_away_team_name%",homeTeamName:"%DL | screen_page_home_team_name%"},playerandteam:{teamIds:"%DL | screen_page_team_id%",playerIds:"%DL | screen_page_player_id%",teamNames:"%DL | screen_page_team_name%",playerNames:"%DL | screen_page_player_name%"},utmParameters:{utmTerm:"%Plugin | utmTerm%",utmMedium:"%Plugin | utmMedium%",utmSource:"%Plugin | utmSource%",utmContent:"%Plugin | utmContent%",utmCampaign:"%Plugin | utmCampaign%"}},identities:{ssoId:"%DL | ssoid%"}}},dataElementId:"DE22cf3f7d9d3340ee8f2cebb3ccee27dd"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plmain_xdm_variable_pageview%",type:"Tab View",instanceName:"alloy",renderDecisions:!0},timeout:8e3,delayNext:!0}]},{id:"RLedfbf874fa014d27a5450e19cb80501d",name:"Set Consent Out",events:[{modulePath:"core/src/lib/events/directCall.js",settings:{identifier:"opt out"},ruleOrder:0}],conditions:[],actions:[{modulePath:"adobe-alloy/dist/lib/actions/setConsent/index.js",settings:{consent:[{value:{general:"out"},version:"1.0",standard:"Adobe"}],instanceName:"alloy"},timeout:2e3,delayNext:!0},{modulePath:"core/src/lib/actions/customCode.js",settings:{source:"https://assets.adobedtm.com/e7ad550d4f82/693c01019a2b/081c6cd281b4/RCad78cf5227904feb9586d685b0fba424-source.min.js",language:"javascript",isExternal:!0},timeout:2e3,delayNext:!0}]},{id:"RLf9ce2f261cb443d99e271aea2ef2756f",name:"PL Retail - Event - Page View",events:[{modulePath:"adobegoogledatalayer/src/lib/events/gtmDlPushEvent.js",settings:{method:"specificEvent",eventKey:"page_view"},ruleOrder:50}],conditions:[{modulePath:"core/src/lib/conditions/subdomain.js",settings:{subdomains:[{value:"stgprem.stichdecom.com",valueIsRegex:!0},{value:"devprem.stichdecom.com",valueIsRegex:!0},{value:"shop.premierleague.com",valueIsRegex:!0}]},timeout:2e3}],actions:[{modulePath:"adobe-alloy/dist/lib/actions/updateVariable/index.js",settings:{data:{web:{webPageDetails:{pageViews:{value:1},_thefootballassociationpremierl:{currency:"%Retail | DL | currency%",pageType:"%Retail | DL | page_type%",platform:"%DL | platform%",user_group:"%Retail | DL | customer_group%",environment:"%Retail | DL | environment%",user_number:"%Retail | DL | user_number%",user_status:"%Retail | DL | user_status%",platform_country_code:"%Retail | DL | platfrom_country_code%",platform_language_code:"%Retail | DL | platfrom_language_code%"}}},identityMap:"%identityMap.ssoID%",_thefootballassociationpremierl:{retailWebEvents:{userProperty:{sessionType:"%New vs Repeat%"}}}},dataElementId:"DE8d13f5782bbd4334b6becdc76960b7a5"},timeout:2e3,delayNext:!0},{modulePath:"adobe-alloy/dist/lib/actions/sendEvent/index.js",settings:{xdm:"%plretail_xdm_variable_pageview%",type:"page_view",instanceName:"alloy",edgeConfigOverrides:{staging:{enabled:!0,datastreamId:"5b09a64a-6a9e-4879-bbc8-14d10a716023"},production:{enabled:!0,datastreamId:"9c56c22d-324b-4113-8e48-df4aa7f9c451"},development:{enabled:!0,datastreamId:"53888722-454e-419d-9649-05886f8ff7a3"}}},timeout:2e3,delayNext:!0}]}]};var _satellite=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function n(e){var n,r;return!1!==t(e)&&(void 0===(n=e.constructor)||!1!==t(r=n.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}function r(e){return"string"==typeof e&&-1!==e.indexOf("[")&&-1!==e.indexOf("]")}function o(e){return e.substr(0,e.indexOf("["))}function a(e,t,n){if(e.length&&ut(t)){var i=e[0];if(1!==e.length){var s=e.slice(1);if(!r(i))return a(s,t[i],n);var l=t[i=o(i)];Array.isArray(l)&&l.forEach((function(e){return a(s,e,n)}))}else t.hasOwnProperty(i)&&"string"==typeof t[i]&&(t[i]=n(t[i]))}}if(window.atob){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=document,l=Object.assign,c=window,d=c,u=function(e,t,n,r){var o,a=Boolean(t&&Array.isArray(n)),i=Boolean(a&&e),s=document.createElement("a");if(a){var l=function(){var e=new Error("Unable to find the Library Embed Code for Dynamic Host Resolution.");throw e.code="dynamic_host_resolver_constructor_error",e};if(e&&(/^((https?:)?\/\/).+/.test(e)||l(),/^\/\/.+/.test(e)?s.href=d.location.protocol+e:s.href=e),s.hostname||l(),-1===n.indexOf(s.hostname)){var c=new Error("This library is not authorized for this domain. Please contact your CSM for more information.");throw c.code="dynamic_host_not_allowed",c}}var u=function(){if(null!=o)return o;if(i){var e=s.host;/:80$/.test(e)?e=e.replace(":80",""):/:80\/$/.test(e)?e=e.replace(":80/",""):/:443$/.test(e)?e=e.replace(":443",""):/:443\/$/.test(e)&&(e=e.replace(":443/","")),o=s.protocol+"//"+e}else o="";return o},p=function(e){return i&&"string"==typeof e?[u(),"/"===e.charAt(0)?e.slice(1):e].join("/"):e},m={getTurbineHost:u,decorateWithDynamicHost:p,get isDynamicEnforced(){return a}};return d&&r.onDebugChanged((function(e){e?d.dynamicHostResolver=m:delete d.dynamicHostResolver})),m},p=function(e){var t=[];return e.forEach((function(e){e.events&&e.events.forEach((function(n){t.push({rule:e,event:n})}))})),t.sort((function(e,t){return e.event.ruleOrder-t.event.ruleOrder}))},m="debug",g=function(e,t){var n=function(){return"true"===e.getItem(m)},r=function(t){e.setItem(m,t)},o=[],a=function(e){o.push(e)};return t.outputEnabled=n(),{onDebugChanged:a,getDebugEnabled:n,setDebugEnabled:function(e){n()!==e&&(r(e),t.outputEnabled=e,o.forEach((function(t){t(e)})))}}},f="Module did not export a function.",y=function(e,t,n){return function(r,o,a){a=a||[];var i=e.getModuleExports(r.modulePath);if("function"!=typeof i)throw new Error(f);var s=e.getModuleDefinition(r.modulePath),l=r.settings||{};!r.hasTransformedFilePaths&&s.filePaths&&(n(l,s.filePaths,r.modulePath),r.hasTransformedFilePaths=!0);var c=t(l,o);return i.bind(null,c).apply(null,a)}},h=function(e){return"string"==typeof e?e.replace(/\s+/g," ").trim():e},v={LOG:"log",INFO:"info",DEBUG:"debug",WARN:"warn",ERROR:"error"},b="\ud83d\ude80",E=10===parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])?"[Launch]":b,_=!1,P=function(e){if(_&&window.console){var t=Array.prototype.slice.call(arguments,1);t.unshift(E),e!==v.DEBUG||window.console[e]||(e=v.INFO),window.console[e].apply(window.console,t)}},w=P.bind(null,v.LOG),D=P.bind(null,v.INFO),C=P.bind(null,v.DEBUG),I=P.bind(null,v.WARN),S=P.bind(null,v.ERROR),k=function(){var e=_;_=!0,P.apply(null,Array.prototype.concat(v.WARN,Array.prototype.slice.call(arguments))),e||(_=!1)},T={log:w,info:D,debug:C,warn:I,error:S,deprecation:k,get outputEnabled(){return _},set outputEnabled(e){_=e},createPrefixedLogger:function(e){var t="["+e+"]";return{log:w.bind(null,t),info:D.bind(null,t),debug:C.bind(null,t),warn:I.bind(null,t),error:S.bind(null,t)}}},R=c,O="com.adobe.reactor.",L=function(e,t){var n=O+(t||"");return{getItem:function(t){try{return R[e].getItem(n+t)}catch(e){return null}},setItem:function(t,r){try{return R[e].setItem(n+t,r),!0}catch(e){return!1}}}},x=L,N="dataElements.",j=x("sessionStorage",N),A=x("localStorage",N),M={PAGEVIEW:"pageview",SESSION:"session",VISITOR:"visitor"},V={},$=function(e){var t;try{t=JSON.stringify(e)}catch(e){}return t},q=h,U=T,F={setValue:function(e,t,n){var r;switch(t){case M.PAGEVIEW:return void(V[e]=n);case M.SESSION:return void((r=$(n))&&j.setItem(e,r));case M.VISITOR:return void((r=$(n))&&A.setItem(e,r))}},getValue:function(e,t){var n;switch(t){case M.PAGEVIEW:return V.hasOwnProperty(e)?V[e]:null;case M.SESSION:return null===(n=j.getItem(e))?n:JSON.parse(n);case M.VISITOR:return null===(n=A.getItem(e))?n:JSON.parse(n)}}},B=function(e,t,n,r){return"Failed to execute data element module "+e.modulePath+" for data element "+t+". "+n+(r?"\n"+r:"")},K=function(e,t,n,r,o){return function(a,i){var s=t(a);if(!s)return r?"":void 0;var l,c,d=s.storageDuration;try{l=e.getModuleExports(s.modulePath),c=e.getModuleDefinition(s.modulePath)}catch(e){return void U.error(B(s,a,e.message,e.stack))}if("function"==typeof l){var u,p=s.settings||{};!s.hasTransformedFilePaths&&c.filePaths&&(o(p,c.filePaths,s.modulePath),s.hasTransformedFilePaths=!0);try{u=l(n(p,i),i)}catch(e){return void U.error(B(s,a,e.message,e.stack))}return d&&(null!=u?F.setValue(a,d,u):u=F.getValue(a,d)),null==u&&null!=s.defaultValue&&(u=s.defaultValue),"string"==typeof u&&(s.cleanText&&(u=q(u)),s.forceLowerCase&&(u=u.toLowerCase())),u}U.error(B(s,a,"Module did not export a function."))}},H=h,G={text:function(e){return e.textContent},cleanText:function(e){return H(e.textContent)}},z=function(e,t,n){for(var r,o=e,a=0,i=t.length;a<i;a++){if(null==o)return;var s=t[a];if(n&&"@"===s.charAt(0)){var l=s.slice(1);o=G[l](o)}else if(o.getAttribute&&(r=s.match(/^getAttribute\((.+)\)$/))){var c=r[1];o=o.getAttribute(c)}else o=o[s]}return o},W=function(e,t,n){return function(r,o){var a;if(t(r))a=n(r,o);else{var i=r.split("."),s=i.shift();"this"===s?o&&(a=z(o.element,i,!0)):"event"===s?o&&(a=z(o,i)):"target"===s?o&&(a=z(o.target,i)):a=z(e[s],i)}return a}},J=function(e,t){return function(n){var r=n.split(".")[0];return Boolean(t(n)||"this"===r||"event"===r||"target"===r||e.hasOwnProperty(r))}},Q=function(e,t,n){var r={exports:{}};return e.call(r.exports,r,r.exports,t,n),r.exports},Y=Q,X=T,Z=function(){var e={},t=function(t){var n=e[t];if(!n)throw new Error("Module "+t+" not found.");return n},n=function(){Object.keys(e).forEach((function(e){try{r(e)}catch(n){var t="Error initializing module "+e+". "+n.message+(n.stack?"\n"+n.stack:"");X.error(t)}}))},r=function(e){var n=t(e);return n.hasOwnProperty("exports")||(n.exports=Y(n.definition.script,n.require,n.turbine)),n.exports};return{registerModule:function(t,n,r,o,a){var i={definition:n,extensionName:r,require:o,turbine:a};i.require=o,e[t]=i},hydrateCache:n,getModuleExports:r,getModuleDefinition:function(e){return t(e).definition},getModuleExtensionName:function(e){return t(e).extensionName}}},ee=T,te=!1,ne=function(e){return function(t,n){var r=e._monitors;r&&(te||(ee.warn("The _satellite._monitors API may change at any time and should only be used for debugging."),te=!0),r.forEach((function(e){e[t]&&e[t](n)})))}},re=T,oe=function(e,t,n){var r,o,a,i,s=[],l=function(r,o,a){if(!e(o))return r;s.push(o);var i=t(o,a);return s.pop(),null==i&&n?"":i};return r=function(e,t){var n=/^%([^%]+)%$/.exec(e);return n?l(e,n[1],t):e.replace(/%(.+?)%/g,(function(e,n){return l(e,n,t)}))},o=function(e,t){for(var n={},r=Object.keys(e),o=0;o<r.length;o++){var a=r[o],s=e[a];n[a]=i(s,t)}return n},a=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n.push(i(e[r],t));return n},i=function(e,t){return"string"==typeof e?r(e,t):Array.isArray(e)?a(e,t):"object"==typeof e&&null!==e?o(e,t):e},function(e,t){return s.length>10?(re.error("Data element circular reference detected: "+s.join(" -> ")),e):i(e,t)}},ae=function(e){return function(){if("string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)e[n]=t[n]}}},ie="undefined"!=typeof window&&window.Promise||void 0!==i&&i.Promise,se=ie,le=function(e,t,n){return function(r,o,a,i){return i.then((function(){var i,s=r.delayNext;return new se((function(t,n){var o=e(r,a,[a]);if(!s)return t();var l=r.timeout,c=new se((function(e,t){i=setTimeout((function(){t(new Error("A timeout occurred because the action took longer than "+l/1e3+" seconds to complete. "))}),l)}));se.race([o,c]).then(t,n)})).catch((function(e){return clearTimeout(i),e=t(e),n(r,o,e),se.reject(e)})).then((function(){clearTimeout(i)}))}))}},ce=ie,de=function(e,t,n,r,o){return function(a,i,s,l){return l.then((function(){var l;return new ce((function(t,n){var r=e(a,s,[s]),o=a.timeout,i=new ce((function(e,t){l=setTimeout((function(){t(new Error("A timeout occurred because the condition took longer than "+o/1e3+" seconds to complete. "))}),o)}));ce.race([r,i]).then(t,n)})).catch((function(e){return clearTimeout(l),e=t(e),r(a,i,e),ce.reject(e)})).then((function(e){if(clearTimeout(l),!n(a,e))return o(a,i),ce.reject()}))}))}},ue=ie.resolve(),pe=function(e,t,n){return function(r,o){return r.conditions&&r.conditions.forEach((function(t){ue=e(t,r,o,ue)})),r.actions&&r.actions.forEach((function(e){ue=t(e,r,o,ue)})),ue=(ue=ue.then((function(){n(r)}))).catch((function(){}))}},me=function(e){return Boolean(e&&"object"==typeof e&&"function"==typeof e.then)},ge=function(e,t,n,r){return function(o,a){var i;if(o.conditions)for(var s=0;s<o.conditions.length;s++){i=o.conditions[s];try{var l=e(i,a,[a]);if(me(l))throw new Error("Rule component sequencing must be enabled on the property for this condition to function properly.");if(!t(i,l))return n(i,o),!1}catch(e){return r(i,o,e),!1}}return!0}},fe=function(e,t){return function(n,r){e(n,r)&&t(n,r)}},ye=function(e){return function(t){var n=e.getModuleDefinition(t.modulePath);return n&&n.displayName||t.modulePath}},he=function(e){return function(t){var n=t.rule,r=t.event,o=e.getModuleDefinition(r.modulePath).name;return{$type:e.getModuleExtensionName(r.modulePath)+"."+o,$rule:{id:n.id,name:n.name}}}},ve=function(e,t,n,r,o,a){return function(i,s){var l=s.rule,c=s.event;c.settings=c.settings||{};try{var d=o(s);t(c,null,[function(t){var r=n(d,t);i((function(){e(r,l)}))}])}catch(e){a.error(r(c,l,e))}}},be=function(e,t,n,r){return function(o,a,i){var s=t(o);n.error(e(s,a.name,i)),r("ruleActionFailed",{rule:a,action:o})}},Ee=function(e,t,n,r){return function(o,a,i){var s=t(o);n.error(e(s,a.name,i)),r("ruleConditionFailed",{rule:a,condition:o})}},_e=function(e,t,n){return function(r,o){var a=e(r);t.log('Condition "'+a+'" for rule "'+o.name+'" was not met.'),n("ruleConditionFailed",{rule:o,condition:r})}},Pe=function(e,t){return function(n){e.log('Rule "'+n.name+'" fired.'),t("ruleCompleted",{rule:n})}},we=function(e,t,n){return function(r,o){var a;if(r.actions)for(var i=0;i<r.actions.length;i++){a=r.actions[i];try{e(a,o,[o])}catch(e){return void t(a,r,e)}}n(r)}},De=function(e,t,n,r){return function(o,a){r("ruleTriggered",{rule:a}),e?n(a,o):t(a,o)}},Ce=function(e,t,n){return'Failed to execute "'+e+'" for "'+t+'" rule. '+n.message+(n.stack?"\n"+n.stack:"")},Ie=function(e,t){return t&&!e.negate||!t&&e.negate},Se=[],ke=!1,Te=function(e){ke?e():Se.push(e)},Re=function(e,t,n){e(t).forEach((function(e){n(Te,e)})),ke=!0,Se.forEach((function(e){e()})),Se=[]},Oe=function(e){if(e||(e=new Error("The extension triggered an error, but no error information was provided.")),!(e instanceof Error)){var t="object"==typeof e?JSON.stringify(e):String(e);e=new Error(t)}return e},Le={};Object.defineProperty(Le,"__esModule",{value:!0}),Le.isPlainObject=n;var xe,Ne=T,je=l,{isPlainObject:Ae}=Le,Me=function(e,t){return Ae(t=t||{})?t=je({},t,e):je(t,e),t.hasOwnProperty("type")||Object.defineProperty(t,"type",{get:function(){return Ne.deprecation("Accessing event.type in Adobe Launch has been deprecated and will be removed soon. Please use event.$type instead."),t.$type}}),t},Ve=function(e,t){return function(n,r){var o=e[n];if(o){var a=o.modules;if(a)for(var i=Object.keys(a),s=0;s<i.length;s++){var l=i[s],c=a[l];if(c.shared&&c.name===r)return t.getModuleExports(l)}}}},$e=function(e,t){return function(){return t?e(t):{}}},qe=function(e,t,n){return function(r){if(n){var o=r.split(".");o.splice(o.length-1||1,0,"min"),r=o.join(".")}return e(t)+r}},Ue=".js",Fe=function(e){return e.substr(0,e.lastIndexOf("/"))},Be=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},Ke=function(e,t){Be(t,Ue)||(t+=Ue);var n=t.split("/"),r=Fe(e).split("/");return n.forEach((function(e){e&&"."!==e&&(".."===e?r.length&&r.pop():r.push(e))})),r.join("/")},He={exports:{}};xe=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(r){function o(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l].split(";")[0]));return document.cookie=t+"="+n+s}}function i(e,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var s=a[i].split("="),l=s.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(s[0]);if(l=(r.read||r)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(o[c]=l,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,n){a(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}return n((function(){}))},He.exports=xe();var Ge=He.exports,ze={get:Ge.get,set:Ge.set,remove:Ge.remove},We=ie,Je=function(e,t){return new We((function(n,r){t.onload=function(){n(t)},t.onerror=function(){r(new Error("Failed to load script "+e))}}))},Qe=function(e){var t={};if(!e||"string"!=typeof e)return t;var n=e.trim().replace(/^[?#&]/,""),r=new URLSearchParams(n),o=r.keys();do{var a=o.next(),i=a.value;if(i){var s=r.getAll(i);1===s.length?t[i]=s[0]:t[i]=s}}while(!1===a.done);return t},Ye=function(e){var t="{{space}}",n=new URLSearchParams;return Object.keys(e).forEach((function(r){var o=e[r];"string"==typeof e[r]?o=o.replace(/ /g,t):["object","undefined"].includes(typeof o)&&!Array.isArray(o)&&(o=""),Array.isArray(o)?o.forEach((function(e){n.append(r,e)})):n.append(r,o)})),n.toString().replace(new RegExp(encodeURIComponent(t),"g"),"%20")},Xe="@adobe/reactor-",Ze={cookie:ze,document:s,"load-script":function(e){var t=document.createElement("script");t.src=e,t.async=!0;var n=Je(e,t);return document.getElementsByTagName("head")[0].appendChild(t),n},"object-assign":l,promise:ie,"query-string":{parse:function(e){return Qe(e)},stringify:function(e){return Ye(e)}},window:c},et=function(e){return function(t){if(0===t.indexOf(Xe)){var n=t.substr(Xe.length),r=Ze[n];if(r)return r}if(0===t.indexOf("./")||0===t.indexOf("../"))return e(t);throw new Error('Cannot resolve module "'+t+'".')}},tt=Ve,nt=$e,rt=qe,ot=T,at=Ke,it=et,st=function(e,t,n,r,o,a,i){var s=e.extensions,l=e.buildInfo,c=e.environment,d=e.property.settings;if(s){var u=tt(s,t);Object.keys(s).forEach((function(p){var m=s[p],g=m.settings;Array.isArray(m.filePaths)&&(g=a(g,m.filePaths));var f=nt(r,g);if(m.modules){var y=ot.createPrefixedLogger(m.displayName),h=rt(i,m.hostedLibFilesBaseUrl,l.minified),v={buildInfo:l,environment:c,property:{name:e.property.name,id:e.property.id},getDataElementValue:o,getExtensionSettings:f,getHostedLibFileUrl:h,getSharedModule:u,logger:y,propertySettings:d,replaceTokens:r,onDebugChanged:n.onDebugChanged,get debugEnabled(){return n.getDebugEnabled()}};Object.keys(m.modules).forEach((function(e){var n=m.modules[e],r=it((function(n){var r=at(e,n);return t.getModuleExports(r)}));t.registerModule(e,n,p,r,v)}))}})),t.hydrateCache()}return t},lt=ze,ct=T,dt=function(e,t,n,r,o){var a=ct.createPrefixedLogger("Custom Script");e.track=function(e){ct.log('"'+e+'" does not match any direct call identifiers.')},e.getVisitorId=function(){return null},e.property={name:t.property.name,id:t.property.id},e.company=t.company,e.buildInfo=t.buildInfo,e.environment=t.environment,e.logger=a,e.notify=function(e,t){switch(ct.deprecation("_satellite.notify is deprecated. Please use the `_satellite.logger` API."),t){case 3:a.info(e);break;case 4:a.warn(e);break;case 5:a.error(e);break;default:a.log(e)}},e.getVar=r,e.setVar=o,e.setCookie=function(e,t,n){var r="",o={};n&&(r=", { expires: "+n+" }",o.expires=n);var a='_satellite.setCookie is deprecated. Please use _satellite.cookie.set("'+e+'", "'+t+'"'+r+").";ct.deprecation(a),lt.set(e,t,o)},e.readCookie=function(e){return ct.deprecation('_satellite.readCookie is deprecated. Please use _satellite.cookie.get("'+e+'").'),lt.get(e)},e.removeCookie=function(e){ct.deprecation('_satellite.removeCookie is deprecated. Please use _satellite.cookie.remove("'+e+'").'),lt.remove(e)},e.cookie=lt,e.pageBottom=function(){},e.setDebug=n;var i=!1;Object.defineProperty(e,"_container",{get:function(){return i||(ct.warn("_satellite._container may change at any time and should only be used for debugging."),i=!0),t}})},{isPlainObject:ut}=Le,pt=s,mt=l,gt=u,ft=p,yt=g,ht=y,vt=K,bt=W,Et=J,_t=Z,Pt=ne,wt=oe,Dt=ae,Ct=le,It=de,St=pe,kt=ge,Tt=fe,Rt=ye,Ot=he,Lt=ve,xt=be,Nt=Ee,jt=_e,At=Pe,Mt=we,Vt=De,$t=Ce,qt=Ie,Ut=Re,Ft=Oe,Bt=Me,Kt=L,Ht=st,Gt=dt,zt=function(e,t){return function(n,r,o){return e&&ut(n)&&Object.keys(n).length&&Array.isArray(r)&&r.length?(r.forEach((function(e){Boolean(null!=o&&/^core\/.*actions.*\/customCode\.js$/.test(o))&&"source"===e&&!n.isExternal||a(e.split("."),n,t)})),n):n}},Wt=T,Jt=window._satellite;if(Jt&&!window.__satelliteLoaded){window.__satelliteLoaded=!0;var Qt=Jt.container;delete Jt.container;var Yt=mt({},Qt.buildInfo);Object.defineProperty(Yt,"environment",{get:function(){return Wt.deprecation("container.buildInfo.environment is deprecated.Please use `container.environment.stage` instead"),Qt.environment.stage}}),Qt.buildInfo=Yt;var Xt,Zt=yt(Kt("localStorage"),Wt),en="";pt.currentScript&&pt.currentScript.getAttribute("src")&&(en=pt.currentScript.getAttribute("src"));try{Xt=gt(en,Boolean(Qt.company.dynamicCdnEnabled),Qt.company.cdnAllowList,Zt)}catch(e){throw Wt.warn("Please review the following error:"),e}var tn,nn=zt(Xt.isDynamicEnforced,Xt.decorateWithDynamicHost),rn=_t(),on=Qt.property.settings.undefinedVarsReturnEmpty,an=Qt.property.settings.ruleComponentSequencingEnabled,sn=Qt.dataElements||{},ln=function(e){return sn[e]},cn=function(){return tn.apply(null,arguments)},dn=vt(rn,ln,cn,on,nn),un={},pn=Dt(un),mn=Et(un,ln),gn=bt(un,ln,dn);tn=wt(mn,gn,on),Gt(Jt,Qt,Zt.setDebugEnabled,gn,pn),Ht(Qt,rn,Zt,tn,dn,nn,Xt.decorateWithDynamicHost);var fn=Pt(Jt),yn=ht(rn,tn,nn),hn=Rt(rn),vn=jt(hn,Wt,fn),bn=Nt($t,hn,Wt,fn),En=xt($t,hn,Wt,fn),_n=At(Wt,fn),Pn=Lt(Vt(an,Tt(kt(yn,qt,vn,bn),Mt(yn,En,_n)),St(It(yn,Ft,qt,bn,vn),Ct(yn,Ft,En),_n),fn),yn,Bt,$t,Ot(rn),Wt);Ut(ft,Qt.rules||[],Pn)}return e(Jt)}console.warn("Adobe Launch is unsupported in IE 9 and below.")}();